var kb=Object.defineProperty,Db=(Ie,Ze,$e)=>Ze in Ie?kb(Ie,Ze,{enumerable:!0,configurable:!0,writable:!0,value:$e}):Ie[Ze]=$e,le=(Ie,Ze,$e)=>(Db(Ie,typeof Ze!="symbol"?Ze+"":Ze,$e),$e);(function(Ie,Ze){typeof exports=="object"&&typeof module<"u"?Ze(exports):typeof define=="function"&&define.amd?define(["exports"],Ze):(Ie=typeof globalThis<"u"?globalThis:Ie||self,Ze(Ie.BanubaSDK={}))})(this,function(Ie){var Ze,$e;let du=0;const No=()=>du++,Bo="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2FkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCh7ZGF0YTp0fSk9Pntjb25zdCBzPXtpZDp0LmlkfTtzZXRUaW1lb3V0KHBvc3RNZXNzYWdlLHQudGltZW91dCxzKX0pfSkoKTsK",Uo=typeof window<"u"&&window.Blob&&new Blob([atob(Bo)],{type:"text/javascript;charset=utf-8"});function hu(){let r;try{if(r=Uo&&(window.URL||window.webkitURL).createObjectURL(Uo),!r)throw"";return new Worker(r)}catch{return new Worker("data:application/javascript;base64,"+Bo)}finally{r&&(window.URL||window.webkitURL).revokeObjectURL(r)}}let Xr;const ii=new Map,Wo=(r,a)=>{const i=No(),c={id:i,timeout:a};return ii.set(c.id,r),Xr||(Xr=new hu,Xr.onmessage=({data:g})=>{const v=ii.get(g.id);ii.delete(g.id),v()}),Xr.postMessage(c),i},zo=1e3/60,Hr=[];let $o=0;const Go=r=>{const a=No();if(Hr.length===0){const i=performance.now(),c=zo-(i-$o)%zo;Wo(()=>{const g=$o=performance.now(),v=[...Hr];Hr.length=0,v.forEach(w=>w(g))},c)}return Hr.push(r),a},pu=Object.freeze(Object.defineProperty({__proto__:null,requestAnimationFrame:Go,setTimeout:Wo},Symbol.toStringTag,{value:"Module"})),mu=(...r)=>window.setTimeout(...r),qr=new Map,bu=r=>{const a=window.requestAnimationFrame((...i)=>{qr.delete(a),r(...i)});return qr.set(a,r),a};typeof document<"u"&&document.addEventListener("visibilitychange",()=>{document.visibilityState!=="visible"&&qr.forEach((r,a)=>{qr.delete(a),cancelAnimationFrame(a),Go(r)})});const gu=Object.freeze(Object.defineProperty({__proto__:null,requestAnimationFrame:bu,setTimeout:mu},Symbol.toStringTag,{value:"Module"})),yu=typeof document<"u"?document:{visibilityState:"hidden"},Vo=()=>yu.visibilityState==="visible"?gu:pu,Rr=r=>Vo().requestAnimationFrame(r),Yo=(r,a)=>Vo().setTimeout(r,a),Ko=r=>Promise.resolve().then(r),oi={requestAnimationFrame:Rr,setTimeout:Yo},_u=Object.freeze(Object.defineProperty({__proto__:null,nextTick:Ko,requestAnimationFrame:Rr,setTimeout:Yo,timers:oi},Symbol.toStringTag,{value:"Module"})),vu=()=>new Promise(r=>Rr(r)),ai=(r=-1)=>function(a,i,c){const g=c,v=g.value;return{...g,value:async function*(...w){const _=v.apply(this,w);let I=0,D=0;for(;;){const B=1e3/r,te=.1*B;for(;(D=performance.now())-I<B-te;)await vu();I=D;const{done:H,value:re}=await _.next();if(H)return re;const X=yield re;typeof X<"u"&&(r=X)}}}},Jr=async(r,a={})=>new Promise(i=>{const c=document.createElement("video");if(c.muted=!0,c.controls=!1,c.playsInline=!0,Object.assign(c,a),r instanceof globalThis.MediaStream)c.srcObject=r,c.addEventListener("ended",()=>c.srcObject=null,{once:!0}),r.addEventListener("inactive",()=>c.dispatchEvent(new CustomEvent("ended")),{once:!0});else{if(typeof r!="string"){const v=r=URL.createObjectURL(r);c.addEventListener("emptied",()=>URL.revokeObjectURL(v),{once:!0})}c.crossOrigin="anonymous",c.src=r,c.addEventListener("ended",()=>c.src="",{once:!0})}c.style.position="fixed",c.style.zIndex="-9999999",c.style.opacity="0.0000000001",document.body.appendChild(c),c.addEventListener("emptied",()=>c.remove(),{once:!0});const g=setInterval(()=>c.readyState,300);c.addEventListener("play",()=>clearInterval(g),{once:!0}),c.addEventListener("play",()=>i(c),{once:!0}),c.addEventListener("loadedmetadata",()=>c.play(),{once:!0})}),wu=r=>new Promise((a,i)=>{const c=document.createElement("img");c.onload=()=>a(c),c.onerror=i,c.crossOrigin="anonymous",c.src=typeof r=="string"?r:URL.createObjectURL(r)}),Xo=new Map,Eu=(r,a,i)=>r*(1-i)+a*i,si=r=>`webar::${r}:start`,li=r=>`webar::${r}:end`,ui=r=>{let a={internalName:r+":"+Math.random()};return performance.mark(si(a.internalName)),a},ci=r=>{const a=r.internalName;performance.mark(li(a));let i=performance.measure(a,si(a),li(a));i||(i=performance.getEntriesByName(a)[0]),performance.clearMarks(si(a)),performance.clearMarks(li(a)),performance.clearMeasures(a);const{duration:c}=i,g=a.split(":")[0];let{averagedDuration:v=0}=Xo.get(g)||{};return v=Eu(v,c,.05),Xo.set(g,{averagedDuration:v}),{instantDuration:c,averagedDuration:v}},Ho=(r,a=i=>console.warn(i))=>function(i,c,g){const v=g.value;if(typeof v!="function")throw new TypeError("Only functions can be marked as deprecated");return{...g,value:function(...w){return a.call(this,`DEPRECATION: ${i.constructor.name}.${c}() is deprecated. ${r}`),v.call(this,...w)}}};let Lr=class{constructor(){le(this,"_emitter",new EventTarget)}addEventListener(r,a,i){this._emitter.addEventListener(r,a,i)}removeEventListener(r,a,i){this._emitter.removeEventListener(r,a,i)}dispatchEvent(r){return this._emitter.dispatchEvent(r)}removeAllEventListeners(){this._emitter=new EventTarget}};const Su=(r,a,i)=>fetch(r,a).then(c=>{if(!c.body)return c;let g=0;const v=Number(c.headers.get("content-length")||0),w=c.body.getReader();return new Response(new ReadableStream({async start(_){for(;;){const{done:I,value:D}=await w.read();if(I?g=v:g+=D.byteLength,i?.onProgress?.({total:v,transferred:g}),I)break;_.enqueue(D)}_.close()}}),c)}),qo=()=>/Edge?\/(79|[89]\d|\d{3,})(\.\d+|)(\.\d+|)|Firefox\/(6[5-9]|[7-9]\d|\d{3,})\.\d+(\.\d+|)|Chrom(ium|e)\/(5[7-9]|[6-9]\d|\d{3,})\.\d+(\.\d+|)([\d.]+$|.*Safari\/(?![\d.]+ Edge\/[\d.]+$))|Maci.* Version\/(1[5-9]|[2-9]\d|\d{3,})\.\d+([,.]\d+|)( Mobile\/\w+|) Safari\/|Chrome.+OPR\/(4[4-9]|[5-9]\d|\d{3,})\.\d+\.\d+|(CPU[ +]OS|iPhone[ +]OS|CPU[ +]iPhone|CPU IPhone OS|CPU iPad OS)[ +]+(1[5-9]|[2-9]\d|\d{3,})[._]\d+([._]\d+|)|Mobile Safari.+OPR\/(7[2-9]|[89]\d|\d{3,})\.\d+\.\d+|Android.+Chrom(ium|e)\/(10[7-9]|1[1-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Android.+(UC? ?Browser|UCWEB|U3)[ /]?(1[3-9]|[2-9]\d|\d{3,})\.\d+\.\d+|SamsungBrowser\/([7-9]|\d{2,})\.\d+|Android.+MQ{2}Browser\/(1[3-9]|[2-9]\d|\d{3,})(\.\d+|)(\.\d+|)|baidubrowser[\s/](1[3-9]|[2-9]\d|\d{3,})(\.\d+|)(\.\d+|)/.test(navigator.userAgent),Cu=typeof window<"u"&&/^((?!chrome|android).)*safari/i.test(window.navigator?.userAgent),Jo=typeof OffscreenCanvas<"u"&&!Cu,Qo={alpha:!0,antialias:!1,depth:!1,desynchronized:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1};let se;const Tu=(()=>{if(typeof window>"u"||!qo())return!1;se??(se=Zo().getContext("webgl2",Qo));const r=se.createTexture();se.bindTexture(se.TEXTURE_2D,r),se.texImage2D(se.TEXTURE_2D,0,se.RGB,1,1,0,se.RGB,se.UNSIGNED_BYTE,null);const a=se.createFramebuffer();se.bindFramebuffer(se.FRAMEBUFFER,a),se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,r,0);const i=se.getParameter(se.IMPLEMENTATION_COLOR_READ_FORMAT);return se.bindFramebuffer(se.FRAMEBUFFER,null),se.bindTexture(se.TEXTURE_2D,null),se.deleteFramebuffer(a),se.deleteTexture(r),i===se.RGB})(),xu=async(r,a,i,c="RGBA")=>{se??(se=Zo().getContext("webgl2",Qo)),se.canvas.width=r.width,se.canvas.height=r.height,c==="RGB"&&se.pixelStorei(se.PACK_ALIGNMENT,1);const g=se.createTexture();se.bindTexture(se.TEXTURE_2D,g),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_MIN_FILTER,se.NEAREST),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_MAG_FILTER,se.LINEAR),se.texImage2D(se.TEXTURE_2D,0,se[c],se[c],se.UNSIGNED_BYTE,r);const v=se.createFramebuffer();se.bindFramebuffer(se.FRAMEBUFFER,v),se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,g,0);const w=se.createBuffer();se.bindBuffer(se.PIXEL_PACK_BUFFER,w),se.bufferData(se.PIXEL_PACK_BUFFER,a.byteLength,se.STREAM_READ),se.readPixels(i.x,i.y,i.width,i.height,se[c],se.UNSIGNED_BYTE,0),se.bindBuffer(se.PIXEL_PACK_BUFFER,null),se.bindFramebuffer(se.FRAMEBUFFER,null),se.deleteFramebuffer(v),se.bindTexture(se.TEXTURE_2D,null),se.deleteTexture(g);const _=se.fenceSync(se.SYNC_GPU_COMMANDS_COMPLETE,0);se.flush(),await ku(se,_).finally(()=>se.deleteSync(_)),se.bindBuffer(se.PIXEL_PACK_BUFFER,w),se.getBufferSubData(se.PIXEL_PACK_BUFFER,0,new DataView(a.buffer()),a.byteOffset,a.byteLength),se.bindBuffer(se.PIXEL_PACK_BUFFER,null),se.deleteBuffer(w)},ku=(r,a)=>new Promise((i,c)=>function g(){const v=r.clientWaitSync(a,0,0);if(v===r.WAIT_FAILED)return c(new Error("GPU operations complete wait failed"));if(v===r.CONDITION_SATISFIED||v===r.ALREADY_SIGNALED)return i();oi.setTimeout(g,2)}());function Au(r=256,a=128){const i=document.createElement("canvas");return i.width=r,i.height=a,i}function Ru(r=256,a=128){return new OffscreenCanvas(r,a)}function Zo(r=256,a=128){return Jo?Ru(r,a):Au(r,a)}const fi=(r={})=>{const a=({displayWidth:i,displayHeight:c,visibleRect:g=null})=>{let v=g?.x??0,w=g?.y??0,_=g?.width??i,I=g?.height??c;if(r.crop){const[D,B,te,H]=r.crop(_,I);[v,w,_,I]=[v+D,w+B,te,H]}return[i,c]=[_,I],{visibleRect:{x:v,y:w,width:_,height:I},displayWidth:i,displayHeight:c,horizontalFlip:!!r.horizontalFlip}};return{getSourceOptions:i=>{let c=i instanceof HTMLVideoElement?i.videoWidth:i.width,g=i instanceof HTMLVideoElement?i.videoHeight:i.height;return a({displayWidth:c,displayHeight:g})},getFrameOptions:a}};class Qr{constructor(a,i={},c=null){le(this,"_source",null),le(this,"_visibleRect",{x:0,y:0,width:0,height:0}),le(this,"_deleter"),le(this,"horizontalFlip",!1);const g=a instanceof HTMLVideoElement?a.videoWidth:a.width,v=a instanceof HTMLVideoElement?a.videoHeight:a.height;this._visibleRect.x=i.visibleRect?.x??0,this._visibleRect.y=i.visibleRect?.y??0,this._visibleRect.width=i.visibleRect?.width??g,this._visibleRect.height=i.visibleRect?.height??v,this.horizontalFlip=i.horizontalFlip??this.horizontalFlip,a.width=g,a.height=v,this._source=a,this._deleter=c}get texture(){return this._source?.width==this.displayWidth&&this._source?.height==this.displayHeight?this._source:null}get displayWidth(){return this._visibleRect.width}get displayHeight(){return this._visibleRect.height}get format(){return this._source?Tu?"RGB":"RGBA":null}allocationSize(){if(!this.format)throw new Error("Failed to execute 'allocationSize' on 'Frame': Frame is closed.");const{width:a,height:i}={width:this._visibleRect.width,height:this._visibleRect.height};return a*i*this.format.length}async copyTo(a){if(!this._source)throw new Error("Failed to execute 'copyTo' on 'Frame': Frame is closed.");return await xu(this._source,a,this._visibleRect,this.format),[]}close(){this._deleter&&this._deleter(),this._source=null}}var Lu=Object.defineProperty,Fu=Object.getOwnPropertyDescriptor,Pu=(r,a,i,c)=>{for(var g=c>1?void 0:c?Fu(a,i):a,v=r.length-1,w;v>=0;v--)(w=r[v])&&(g=(c?w(a,i,g):w(g))||g);return c&&g&&Lu(a,i,g),g},ea;let ta=class{constructor(r){le(this,"_src"),le(this,"kind","image"),this._src=r}async*[ea=Symbol.asyncIterator](r){const a=await wu(this._src),i=fi(r);yield new Qr(a,i.getSourceOptions(a),()=>{URL.revokeObjectURL(a.src),a.src=""})}};Pu([ai(30)],ta.prototype,ea,1);var Iu=Object.defineProperty,Du=Object.getOwnPropertyDescriptor,Mu=(r,a,i,c)=>{for(var g=c>1?void 0:c?Du(a,i):a,v=r.length-1,w;v>=0;v--)(w=r[v])&&(g=(c?w(a,i,g):w(g))||g);return c&&g&&Iu(a,i,g),g},ra;const na=(Ze=class{constructor(r){if(le(this,"_stream"),le(this,"kind","stream"),!Ze.cache.has(r))Ze.cache.set(r,this);else return Ze.cache.get(r);this._stream=r}async*[ra=Symbol.asyncIterator](r){const a=fi(r);if("MediaStreamTrackProcessor"in window){const i=new MediaStreamTrackProcessor({track:this._stream.getVideoTracks()[0]}).readable.getReader();try{for(;;){const{done:c,value:g}=await i.read();if(c)return;const v=new VideoFrame(g,a.getFrameOptions(g));v.horizontalFlip=r?.horizontalFlip??!0,g.close(),yield v}}finally{i.releaseLock()}}else{const i=await Jr(this._stream),c="requestVideoFrameCallback"in i?i.requestVideoFrameCallback.bind(i):requestAnimationFrame;for(;!i.paused;)await new Promise(c),yield new Qr(i,a.getSourceOptions(i));URL.revokeObjectURL(i.src),i.src="",i.srcObject=null}}stop(){for(const r of this._stream.getVideoTracks())r.stop();this._stream&&Ze.cache.delete(this._stream)}},le(Ze,"cache",new WeakMap),Ze);Mu([ai(30)],na.prototype,ra,1);let Zr=na;var ju=Object.defineProperty,Ou=Object.getOwnPropertyDescriptor,Nu=(r,a,i,c)=>{for(var g=c>1?void 0:c?Ou(a,i):a,v=r.length-1,w;v>=0;v--)(w=r[v])&&(g=(c?w(a,i,g):w(g))||g);return c&&g&&ju(a,i,g),g},ia;const oa={loop:!1};class aa{constructor(a,i){le(this,"_src"),le(this,"_options"),le(this,"_video",null),le(this,"kind","video"),this._src=a,this._options={...oa,...i}}async*[ia=Symbol.asyncIterator](a){const i=await(this._video??(this._video=Jr(this._src,this._options))),c=fi(a),g="requestVideoFrameCallback"in i?i.requestVideoFrameCallback.bind(i):requestAnimationFrame;for(;!i.paused;)await new Promise(g),yield new Qr(i,c.getSourceOptions(i))}stop(){this._video&&this._video.then(a=>(URL.revokeObjectURL(a.src),a.src="",a.srcObject=null)),this._video=null}}Nu([ai(30)],aa.prototype,ia,1);const Bu=`#define GLSLIFY 1
attribute vec2 a_position;
varying vec2 v_tex_uv;

void main() {
  v_tex_uv.x = (a_position.x + 1.) * .5;
  v_tex_uv.y = 1. - (a_position.y + 1.) * .5;
  gl_Position = vec4(a_position, 0., 1.);
}
`,Uu=`precision highp float;
#define GLSLIFY 1

varying vec2 v_tex_uv;

uniform sampler2D u_texture;
uniform vec2 u_viewsize;

/**
 * u_filters.x - denoising algorithm to use
 *   1 - FSR
 *   2 - Bilateral
 *   any other value - none
 * u_filters.y - light correction coefficient in [0, 2]
 *   1 - no light correction
 */
uniform vec2 u_filters;

// https://github.com/glslify/glslify#importing-a-glsl-module
// https://github.com/glslify/glslify#passing-references-between-modules
// Copyright (c) 2021 Advanced Micro Devices, Inc. All rights reserved.
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.
//
// FidelityFX FSR v1.0.2 by AMD
// ported to mpv by agyild - https://gist.github.com/agyild/82219c545228d70c5604f865ce0b0ce5
// ported to WebGL by goingdigital - https://www.shadertoy.com/view/stXSWB
// using colorspace functions from tobspr - https://github.com/tobspr/GLSL-Color-Spaces/blob/master/ColorSpaces.inc.glsl

#define SHARPENING 2.0 // Sharpening intensity: Adjusts sharpening intensity by averaging the original pixels to the sharpened result. 1.0 is the unmodified default. 0.0 to 1.0.
#define CONTRAST 2.0 // Adjusts the range the shader adapts to high contrast (0 is not all the way off). Higher values = more high contrast sharpening. 0.0 to 1.0.
#define PERFORMANCE 1 // Whether to use optimizations for performance with loss of quality

// Used to convert from linear RGB to XYZ space
const mat3 RGB_2_XYZ_2717090884 = (mat3(
  0.4124564, 0.2126729, 0.0193339,
  0.3575761, 0.7151522, 0.1191920,
  0.1804375, 0.0721750, 0.9503041
));

// Used to convert from XYZ to linear RGB space
const mat3 XYZ_2_RGB_2717090884 = (mat3(
   3.2404542,-0.9692660, 0.0556434,
  -1.5371385, 1.8760108,-0.2040259,
  -0.4985314, 0.0415560, 1.0572252
));
// Converts a color from linear RGB to XYZ space
vec3 rgb_to_xyz_2717090884(vec3 rgb) {
  return RGB_2_XYZ_2717090884 * rgb;
}

// Converts a color from XYZ to linear RGB space
vec3 xyz_to_rgb_2717090884(vec3 xyz) {
  return XYZ_2_RGB_2717090884 * xyz;
}

/* EASU stage
*
* This takes a reduced resolution source, and scales it up while preserving detail.
*
* Updates:
*   stretch definition fixed. Thanks nehon for the bug report!
*/

vec3 FsrEasuCF(vec2 p) {
  vec2 uv = (p + .5) / u_viewsize;
  vec4 color = texture2D(u_texture, uv);
    return rgb_to_xyz_2717090884(color.rgb);
}

/**** EASU ****/
void FsrEasuCon(
  out vec4 con0,
  out vec4 con1,
  out vec4 con2,
  out vec4 con3,
  // This the rendered image resolution being upscaled
  vec2 inputViewportInPixels,
  // This is the resolution of the resource containing the input image (useful for dynamic resolution)
  vec2 inputSizeInPixels,
  // This is the display resolution which the input image gets upscaled to
  vec2 outputSizeInPixels
)
{
  // Output integer position to a pixel position in viewport.
  con0 = vec4(
    inputViewportInPixels.x/outputSizeInPixels.x,
    inputViewportInPixels.y/outputSizeInPixels.y,
    .5*inputViewportInPixels.x/outputSizeInPixels.x-.5,
    .5*inputViewportInPixels.y/outputSizeInPixels.y-.5
  );
  // Viewport pixel position to normalized image space.
  // This is used to get upper-left of 'F' tap.
  con1 = vec4(1.,1.,1.,-1.)/inputSizeInPixels.xyxy;
  // Centers of gather4, first offset from upper-left of 'F'.
  //      +---+---+
  //      |   |   |
  //      +--(0)--+
  //      | b | c |
  //  +---F---+---+---+
  //  | e | f | g | h |
  //  +--(1)--+--(2)--+
  //  | i | j | k | l |
  //  +---+---+---+---+
  //      | n | o |
  //      +--(3)--+
  //      |   |   |
  //      +---+---+
  // These are from (0) instead of 'F'.
  con2 = vec4(-1.,2.,1.,2.)/inputSizeInPixels.xyxy;
  con3 = vec4(0.,4.,0.,0.)/inputSizeInPixels.xyxy;
}

// Filtering for a given tap for the scalar.
void FsrEasuTapF(
  inout vec3 aC, // Accumulated color, with negative lobe.
  inout float aW, // Accumulated weight.
  vec2 off_0, // Pixel offset from resolve position to tap.
  vec2 dir_0, // Gradient direction.
  vec2 len_0, // Length.
  float lob_0, // Negative lobe strength.
  float clp_0, // Clipping point.
  vec3 c_0
)
{
  // Tap color.
  // Rotate offset by direction.
  vec2 v = vec2(dot(off_0, dir_0), dot(off_0,vec2(-dir_0.y,dir_0.x)));
  // Anisotropy.
  v *= len_0;
  // Compute distance^2.
  float d2 = min(dot(v,v),clp_0);
  // Limit to the window as at corner, 2 taps can easily be outside.
  // Approximation of lancos2 without sin() or rcp(), or sqrt() to get x.
  //  (25/16 * (2/5 * x^2 - 1)^2 - (25/16 - 1)) * (1/4 * x^2 - 1)^2
  //  |_______________________________________|   |_______________|
  //                   base                             window
  // The general form of the 'base' is,
  //  (a*(b*x^2-1)^2-(a-1))
  // Where 'a=1/(2*b-b^2)' and 'b' moves around the negative lobe.
  float wB = .4 * d2 - 1.;
  float wA = lob_0 * d2 -1.;
  wB *= wB;
  wA *= wA;
  wB = 1.5625*wB-.5625;
  float w=  wB * wA;
  // Do weighted average.
  aC += c_0*w;
  aW += w;
}

//------------------------------------------------------------------------------------------------------------------------------
// Accumulate direction and length.
void FsrEasuSetF(
    inout vec2 dir,
    inout float len,
    float w,
    float lA,float lB,float lC,float lD,float lE
)
{
  // Direction is the '+' diff.
  //    a
  //  b c d
  //    e
  // Then takes magnitude from abs average of both sides of 'c'.
  // Length converts gradient reversal to 0, smoothly to non-reversal at 1, shaped, then adding horz and vert terms.
  float lenX = max(abs(lD - lC), abs(lC - lB));
  float dirX = lD - lB;
  dir.x += dirX * w;
  lenX = clamp(abs(dirX)/lenX,0.,1.);
  lenX *= lenX;
  len += lenX * w;
  // Repeat for the y axis.
  float lenY = max(abs(lE - lC), abs(lC - lA));
  float dirY = lE - lA;
  dir.y += dirY * w;
  lenY = clamp(abs(dirY) / lenY,0.,1.);
  lenY *= lenY;
  len += lenY * w;
}

//------------------------------------------------------------------------------------------------------------------------------
void FsrEasuF(
  out vec3 pix,
  vec2 ip, // Integer pixel position in output.
  // Constants generated by FsrEasuCon().
  vec4 con0, // xy = output to input scale, zw = first pixel offset correction
  vec4 con1_0,
  vec4 con2_0,
  vec4 con3_0
)
{
  //------------------------------------------------------------------------------------------------------------------------------
  // Get position of 'f'.
  vec2 pp = ip * con0.xy + con0.zw; // Corresponding input pixel/subpixel
  vec2 fp = floor(pp);// fp = source nearest pixel
  pp -= fp; // pp = source subpixel

  //------------------------------------------------------------------------------------------------------------------------------
  // 12-tap kernel.
  //    b c
  //  e f g h
  //  i j k l
  //    n o
  // Gather 4 ordering.
  //  a b
  //  r g
  vec2 p0 = fp * con1_0.xy + con1_0.zw;
  
  // These are from p0 to avoid pulling two constants on pre-Navi hardware.
  vec2 p1 = p0 + con2_0.xy;
  vec2 p2 = p0 + con2_0.zw;
  vec2 p3 = p0 + con3_0.xy;

  // TextureGather is not available on WebGL2
  vec4 off = vec4(-.5,.5,-.5,.5)*con1_0.xxyy;
  // textureGather to texture offsets
  // x=west y=east z=north w=south
  vec3 bC = FsrEasuCF(p0 + off.xw); float bL = bC.g + 0.5 *(bC.r + bC.b);
  vec3 cC = FsrEasuCF(p0 + off.yw); float cL = cC.g + 0.5 *(cC.r + cC.b);
  vec3 iC = FsrEasuCF(p1 + off.xw); float iL = iC.g + 0.5 *(iC.r + iC.b);
  vec3 jC = FsrEasuCF(p1 + off.yw); float jL = jC.g + 0.5 *(jC.r + jC.b);
  vec3 fC = FsrEasuCF(p1 + off.yz); float fL = fC.g + 0.5 *(fC.r + fC.b);
  vec3 eC = FsrEasuCF(p1 + off.xz); float eL = eC.g + 0.5 *(eC.r + eC.b);
  vec3 kC = FsrEasuCF(p2 + off.xw); float kL = kC.g + 0.5 *(kC.r + kC.b);
  vec3 lC = FsrEasuCF(p2 + off.yw); float lL = lC.g + 0.5 *(lC.r + lC.b);
  vec3 hC = FsrEasuCF(p2 + off.yz); float hL = hC.g + 0.5 *(hC.r + hC.b);
  vec3 gC = FsrEasuCF(p2 + off.xz); float gL = gC.g + 0.5 *(gC.r + gC.b);
  vec3 oC = FsrEasuCF(p3 + off.yz); float oL = oC.g + 0.5 *(oC.r + oC.b);
  vec3 nC = FsrEasuCF(p3 + off.xz); float nL = nC.g + 0.5 *(nC.r + nC.b);
 
  //------------------------------------------------------------------------------------------------------------------------------
  // Simplest multi-channel approximate luma possible (luma times 2, in 2 FMA/MAD).
  // Accumulate for bilinear interpolation.
  vec2 dir = vec2(0.);
  float len = 0.;

  FsrEasuSetF(dir, len, (1.-pp.x)*(1.-pp.y), bL, eL, fL, gL, jL);
  FsrEasuSetF(dir, len,    pp.x  *(1.-pp.y), cL, fL, gL, hL, kL);
  FsrEasuSetF(dir, len, (1.-pp.x)*  pp.y  , fL, iL, jL, kL, nL);
  FsrEasuSetF(dir, len,    pp.x  *  pp.y  , gL, jL, kL, lL, oL);

  //------------------------------------------------------------------------------------------------------------------------------
  // Normalize with approximation, and cleanup close to zero.
  vec2 dir2 = dir * dir;
  float dirR = dir2.x + dir2.y;
  bool zro = dirR < (1.0/32768.0);
  dirR = inversesqrt(dirR);
#if (PERFORMANCE == 1)
  if (zro) {
    vec4 w = vec4(0.0);
    w.x = (1.0 - pp.x) * (1.0 - pp.y);
    w.y =        pp.x  * (1.0 - pp.y);
    w.z = (1.0 - pp.x) *        pp.y;
    w.w =        pp.x  *        pp.y;
    pix.r = clamp(dot(w, vec4(fL, gL, jL, kL)), 0.0, 1.0);
    return;
  }
#elif (PERFORMANCE == 0)
  dirR = zro ? 1.0 : dirR;
  dir.x = zro ? 1.0 : dir.x;
#endif
  dir *= vec2(dirR);
  // Transform from {0 to 2} to {0 to 1} range, and shape with square.
  len = len * 0.5;
  len *= len;
  // Stretch kernel {1.0 vert|horz, to sqrt(2.0) on diagonal}.
  float stretch = dot(dir,dir) / (max(abs(dir.x), abs(dir.y)));
  // Anisotropic length after rotation,
  //  x := 1.0 lerp to 'stretch' on edges
  //  y := 1.0 lerp to 2x on edges
  vec2 len2 = vec2(1. +(stretch-1.0)*len, 1. -.5 * len);
  // Based on the amount of 'edge',
  // the window shifts from +/-{sqrt(2.0) to slightly beyond 2.0}.
  float lob = .5 - .29 * len;
  // Set distance^2 clipping point to the end of the adjustable window.
  float clp = 1./lob;

  //------------------------------------------------------------------------------------------------------------------------------
  // Accumulation mixed with min/max of 4 nearest.
  //    b c
  //  e f g h
  //  i j k l
  //    n o
  // Accumulation.
  vec3 aC = vec3(0);
  float aW = 0.;
  FsrEasuTapF(aC, aW, vec2( 0.,-1.)-pp, dir, len2, lob, clp, bC);
  FsrEasuTapF(aC, aW, vec2( 1.,-1.)-pp, dir, len2, lob, clp, cC);
  FsrEasuTapF(aC, aW, vec2(-1., 1.)-pp, dir, len2, lob, clp, iC);
  FsrEasuTapF(aC, aW, vec2( 0., 1.)-pp, dir, len2, lob, clp, jC);
  FsrEasuTapF(aC, aW, vec2( 0., 0.)-pp, dir, len2, lob, clp, fC);
  FsrEasuTapF(aC, aW, vec2(-1., 0.)-pp, dir, len2, lob, clp, eC);
  FsrEasuTapF(aC, aW, vec2( 1., 1.)-pp, dir, len2, lob, clp, kC);
  FsrEasuTapF(aC, aW, vec2( 2., 1.)-pp, dir, len2, lob, clp, lC);
  FsrEasuTapF(aC, aW, vec2( 2., 0.)-pp, dir, len2, lob, clp, hC);
  FsrEasuTapF(aC, aW, vec2( 1., 0.)-pp, dir, len2, lob, clp, gC);
  FsrEasuTapF(aC, aW, vec2( 1., 2.)-pp, dir, len2, lob, clp, oC);
  FsrEasuTapF(aC, aW, vec2( 0., 2.)-pp, dir, len2, lob, clp, nC);
  //------------------------------------------------------------------------------------------------------------------------------
  // Normalize and dering.
#if (PERFORMANCE == 1)
pix = aC/aW;
#elif (PERFORMANCE == 0)
  vec3 min4 = min(min(fC,gC),min(jC,kC));
  vec3 max4 = max(max(fC,gC),max(jC,kC));
  pix=min(max4,max(min4,aC/aW));
#endif
}

void EASU( out vec4 fragColor, in vec2 fragCoord )
{
  vec3 c;
  vec4 con0,con1,con2,con3;
  
  // "rendersize" refers to size of source image before upscaling.
  vec2 rendersize = u_viewsize;
  FsrEasuCon(
    con0, con1, con2, con3, rendersize, rendersize, rendersize
  );
  FsrEasuF(c, fragCoord, con0, con1, con2, con3);
  
  fragColor = vec4(xyz_to_rgb_2717090884(c.xyz), 1);
}

vec4 getPixel(vec2 pos) {
  vec2 coord = (pos + .5) / u_viewsize;
  coord.y = 1.0 - coord.y;
  return texture2D(u_texture, coord);
}

vec4 fsr_easu_2717090884(vec2 uv) {
  vec4 e = getPixel(gl_FragCoord.xy);

    
  vec4 e_xyz = vec4(rgb_to_xyz_2717090884(e.rgb), 1);
  EASU(e_xyz, (gl_FragCoord.xy + 0.5) / u_viewsize);  
  
  // fetch a 3x3 neighborhood around the pixel 'e',
  //  a b c
  //  d(e)f
  //  g h i 
  vec3 a = getPixel(gl_FragCoord.xy + vec2(-1.0,-1.0)).rgb;
  vec3 b = getPixel(gl_FragCoord.xy + vec2( 0.0,-1.0)).rgb;
  vec3 c = getPixel(gl_FragCoord.xy + vec2( 1.0,-1.0)).rgb;
  vec3 f = getPixel(gl_FragCoord.xy + vec2( 1.0, 0.0)).rgb;
  vec3 g = getPixel(gl_FragCoord.xy + vec2(-1.0, 1.0)).rgb;
  vec3 h = getPixel(gl_FragCoord.xy + vec2( 0.0, 1.0)).rgb;
  vec3 d = getPixel(gl_FragCoord.xy + vec2(-1.0, 0.0)).rgb;
  vec3 i = getPixel(gl_FragCoord.xy + vec2( 1.0, 1.0)).rgb;;
  // Soft min and max.
  //  a b c     b
  //  d e f * 0.5 + d e f * 0.5
  //  g h i     h
  // These are 2.0x bigger (factored out the extra multiply).

  vec3 mnRGB = min(min(min(d, e.rgb), min(f, b)), h);
  vec3 mnRGB2 = min(mnRGB, min(min(a, c), min(g, i)));
  mnRGB += mnRGB2;

  vec3 mxRGB = max(max(max(d, e.rgb), max(f, b)), h);
  vec3 mxRGB2 = max(mxRGB, max(max(a, c), max(g, i)));
  mxRGB += mxRGB2;

  // Smooth minimum distance to signal limit divided by smooth max.
  vec3 rcpMRGB = 1.0 / mxRGB;
  vec3 ampRGB = clamp(min(mnRGB, 2.0 - mxRGB) * rcpMRGB, 0.0, 1.0);

  // Shaping amount of sharpening.
  ampRGB = inversesqrt(ampRGB);

  float peak = -3.0 * clamp(CONTRAST, 0.0, 1.0) + 8.0;
  vec3 wRGB = -(1.0 / (ampRGB * peak));

  vec3 rcpWeightRGB = 1.0 / (4.0 * wRGB + 1.0);

  //          0 w 0
  //  Filter shape: w 1 w
  //          0 w 0
  vec3 window = (b + d) + (f + h);
  vec3 outColor = clamp((window * wRGB + e.rgb) * rcpWeightRGB, 0.0, 1.0);

  return vec4(mix(e.rgb, outColor, SHARPENING), e.a);
}

// https://github.com/glslify/glslify#exporting-a-glsl-module

#define DIFF 1.0
#define RADIUS 4.0

void bilateral_iter_3977570374(vec2 random_dir, vec2 radius, float diff, vec4 pixel, vec2 uv, inout vec3 result, inout float totalWeight)
{
  vec2 dir = random_dir * radius;
  vec3 randomPixel = texture2D(u_texture, uv + dir).xyz;
  vec3 delta = randomPixel - pixel.rgb;
  float weight = exp(-dot(delta, delta) / diff);
  result += randomPixel * weight;
  totalWeight += weight;
}

vec4 bilateral(vec2 uv)
{
  vec2 radius = (RADIUS / u_viewsize);
  float diff = DIFF / 255.0;
  vec4 pixel = texture2D(u_texture, uv);
  vec3 result = vec3(0.0, 0.0, 0.0);
  float totalWeight = 0.0;

  // uroll loop and substitute precalculated random vectors for GLSL 1.0 ES:

  bilateral_iter_3977570374(vec2(-0.886051297,0.447155535), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(0.270759493,0.537728608), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.896959424,0.440607518), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.804274619,0.125076547), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(0.373693645,0.240383312), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.850325704,-0.192106694), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.453608066,0.889671504), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.280496657,0.206442386), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(0.840040743,-0.36367026), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.151598319,-0.884027064), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.221440807,0.593896627), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.797481239,-0.243254974), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(0.48824361,0.225083455), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.0387817062,0.838459492), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(0.92897892,-0.133588716), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.693672359,-0.706737161), radius, diff, pixel, uv, result, totalWeight);
  
  result = result / totalWeight;    
  return vec4(result, pixel.a);
}

// https://github.com/glslify/glslify#exporting-a-glsl-module

vec3 rgb2hsv(vec3 c)
{
  vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));
  float d = q.x - min(q.w, q.y);
  float e = 1.0e-10;
  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);
}

vec3 hsv2rgb(vec3 c)
{
  vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

vec4 light_correction_1117569599(vec4 c, float s)
{
  vec3 hsv = rgb2hsv(c.rgb);
  hsv.y = pow(hsv.y, pow(s, -0.5));
  hsv.z = pow(hsv.z, s);
  vec3 rgb = hsv2rgb(hsv);
  return vec4(rgb, c.a);
}

// https://github.com/glslify/glslify#exporting-a-glsl-module

void main() {
  vec4 c;

  if (u_filters.x == 1.)
    c = fsr_easu_2717090884(v_tex_uv);
  else if (u_filters.x == 2.)
    c = bilateral(v_tex_uv);
  else
    c = texture2D(u_texture, v_tex_uv);

  if (u_filters.y != 1.)
    c = light_correction_1117569599(c, u_filters.y);

  gl_FragColor = c;
}`,Wu=(r,a,i)=>{const c=r.createProgram();return r.attachShader(c,a),r.attachShader(c,i),r.linkProgram(c),r.useProgram(c),c},sa=(r,a,i)=>{const c=r.createShader(a);return r.shaderSource(c,i),r.compileShader(c),c},zu=r=>{const a=r.createTexture();return r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,r.RGB,1,1,0,r.RGB,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.bindTexture(r.TEXTURE_2D,null),a},la=(r,a)=>{let i=0,c=1;const g=document.createElement("canvas"),v=g.captureStream(30),w=g.getContext("webgl"),_=sa(w,w.VERTEX_SHADER,Bu),I=sa(w,w.FRAGMENT_SHADER,Uu),D=Wu(w,_,I),B=zu(w);w.bindTexture(w.TEXTURE_2D,B);const te=w.getAttribLocation(D,"a_position"),H=w.createBuffer();w.bindBuffer(w.ARRAY_BUFFER,H),w.bufferData(w.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),w.STATIC_DRAW),w.enableVertexAttribArray(te),w.vertexAttribPointer(te,2,w.FLOAT,!1,0,0);const re=w.getUniformLocation(D,"u_viewsize"),X=w.getUniformLocation(D,"u_filters");w.uniform2fv(X,new Float32Array([i,c])),Jr(r).then(fe=>{const ge=fe.requestVideoFrameCallback?.bind(fe)||oi.requestAnimationFrame;(function J(){fe.ended||!v.active||(ge(J),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,fe),(g.width!==fe.videoWidth||g.height!==fe.videoHeight)&&(w.viewport(0,0,g.width=fe.videoWidth,g.height=fe.videoHeight),w.uniform2fv(re,new Float32Array([g.width,g.height]))),w.drawArrays(w.TRIANGLES,0,6))})()}),w.deleteProgram(D),w.deleteShader(I),w.deleteShader(_);const Se={stream:v,denoise(fe){w.uniform2fv(X,new Float32Array([i=fe,c]))},exposureCompensation(fe){w.uniform2fv(X,new Float32Array([i,c=fe]))}};if(a)for(const[fe,ge]of Object.entries(a))Se[fe](ge);return Se},$u=typeof screen<"u"&&screen.height>screen.width,en={facingMode:"user",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080},resizeMode:{ideal:"crop-and-scale"}};$u&&(delete en.width,delete en.height);class Gu{constructor(a){le(this,"_stream",null),le(this,"_constraints"),le(this,"_preferences",{}),le(this,"_enhancer",null),le(this,"kind","stream"),this._constraints={...en,...a}}get active(){return!!this._stream}denoise(a){this._preferences.denoise=Number(a),this._enhancer?.denoise(this._preferences.denoise)}setExposureCompensation(a){this._preferences.exposureCompensation=a,this._enhancer?.exposureCompensation(this._preferences.exposureCompensation)}async start(){return await(this._stream??(this._stream=ua(this._constraints))),this}async*[Symbol.asyncIterator](a){const i=await(this._stream??(this._stream=ua(this._constraints))),c=this._enhancer=di(this._preferences)?la(i,this._preferences):null;let g=new Zr(c?c.stream:i)[Symbol.asyncIterator]({horizontalFlip:!0,...a}),v;for(;;){if(!this._enhancer&&di(this._preferences)){const I=this._enhancer=la(i,this._preferences);g=new Zr(I.stream)[Symbol.asyncIterator]({horizontalFlip:!0,...a})}this._enhancer&&!di(this._preferences)&&(this._enhancer.stream.getTracks().forEach(I=>I.stop()),this._enhancer=null,g=new Zr(i)[Symbol.asyncIterator]({horizontalFlip:!0,...a}));const{done:w,value:_}=await g.next(v);if(w)break;v=yield _}this.stop()}stop(){this._stream&&this._stream.then(a=>a.getTracks().forEach(i=>i.stop())),this._enhancer&&this._enhancer.stream.getTracks().forEach(a=>a.stop()),this._stream=null,this._enhancer=null}}const ua=async r=>{if(typeof navigator.mediaDevices>"u")throw new Error(`SecureContext is required to access webcam
It\u2018s likely you need to set up HTTPS/TLS for your website
See https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia#Encryption_based_security for details `);return await navigator.mediaDevices.getUserMedia({video:r})},di=r=>typeof r.exposureCompensation=="number"&&r.exposureCompensation!==1||r.denoise===1||r.denoise===2,Vu={createVideoElement:Jr};let Yu="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",ca=(r=21)=>{let a="",i=r;for(;i--;)a+=Yu[Math.random()*64|0];return a};const fa="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBzPVVpbnQ4QXJyYXkseD1VaW50MTZBcnJheSxPPVVpbnQzMkFycmF5LEg9bmV3IHMoWzAsMCwwLDAsMCwwLDAsMCwxLDEsMSwxLDIsMiwyLDIsMywzLDMsMyw0LDQsNCw0LDUsNSw1LDUsMCwwLDAsMF0pLEk9bmV3IHMoWzAsMCwwLDAsMSwxLDIsMiwzLDMsNCw0LDUsNSw2LDYsNyw3LDgsOCw5LDksMTAsMTAsMTEsMTEsMTIsMTIsMTMsMTMsMCwwXSksbDE9bmV3IHMoWzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdKSxKPWZ1bmN0aW9uKHIsdCl7Zm9yKHZhciBhPW5ldyB4KDMxKSxuPTA7bjwzMTsrK24pYVtuXT10Kz0xPDxyW24tMV07Zm9yKHZhciB2PW5ldyBPKGFbMzBdKSxuPTE7bjwzMDsrK24pZm9yKHZhciBpPWFbbl07aTxhW24rMV07KytpKXZbaV09aS1hW25dPDw1fG47cmV0dXJuW2Esdl19LEs9SihILDIpLFE9S1swXSxjMT1LWzFdO1FbMjhdPTI1OCxjMVsyNThdPTI4O2Zvcih2YXIgczE9SihJLDApLGQxPXMxWzBdLFU9bmV3IHgoMzI3NjgpLHU9MDt1PDMyNzY4OysrdSl7dmFyIEM9KHUmNDM2OTApPj4+MXwodSYyMTg0NSk8PDE7Qz0oQyY1MjQyOCk+Pj4yfChDJjEzMTA3KTw8MixDPShDJjYxNjgwKT4+PjR8KEMmMzg1NSk8PDQsVVt1XT0oKEMmNjUyODApPj4+OHwoQyYyNTUpPDw4KT4+PjF9Zm9yKHZhciB6PWZ1bmN0aW9uKHQsYSxuKXtmb3IodmFyIHY9dC5sZW5ndGgsaT0wLGM9bmV3IHgoYSk7aTx2OysraSl0W2ldJiYrK2NbdFtpXS0xXTt2YXIgZj1uZXcgeChhKTtmb3IoaT0wO2k8YTsrK2kpZltpXT1mW2ktMV0rY1tpLTFdPDwxO3ZhciBvO2lmKG4pe289bmV3IHgoMTw8YSk7dmFyIGU9MTUtYTtmb3IoaT0wO2k8djsrK2kpaWYodFtpXSlmb3IodmFyIGw9aTw8NHx0W2ldLGI9YS10W2ldLGQ9Zlt0W2ldLTFdKys8PGIseT1kfCgxPDxiKS0xO2Q8PXk7KytkKW9bVVtkXT4+PmVdPWx9ZWxzZSBmb3Iobz1uZXcgeCh2KSxpPTA7aTx2OysraSl0W2ldJiYob1tpXT1VW2ZbdFtpXS0xXSsrXT4+PjE1LXRbaV0pO3JldHVybiBvfSxCPW5ldyBzKDI4OCksdT0wO3U8MTQ0OysrdSlCW3VdPTg7Zm9yKHZhciB1PTE0NDt1PDI1NjsrK3UpQlt1XT05O2Zvcih2YXIgdT0yNTY7dTwyODA7Kyt1KUJbdV09Nztmb3IodmFyIHU9MjgwO3U8Mjg4OysrdSlCW3VdPTg7Zm9yKHZhciBWPW5ldyBzKDMyKSx1PTA7dTwzMjsrK3UpVlt1XT01O3ZhciBnMT16KEIsOSwxKSx3MT16KFYsNSwxKSxXPWZ1bmN0aW9uKHIpe2Zvcih2YXIgdD1yWzBdLGE9MTthPHIubGVuZ3RoOysrYSlyW2FdPnQmJih0PXJbYV0pO3JldHVybiB0fSxoPWZ1bmN0aW9uKHIsdCxhKXt2YXIgbj10Lzh8MDtyZXR1cm4ocltuXXxyW24rMV08PDgpPj4odCY3KSZhfSxYPWZ1bmN0aW9uKHIsdCl7dmFyIGE9dC84fDA7cmV0dXJuKHJbYV18clthKzFdPDw4fHJbYSsyXTw8MTYpPj4odCY3KX0saDE9ZnVuY3Rpb24ocil7cmV0dXJuKHIrNykvOHwwfSxqPWZ1bmN0aW9uKHIsdCxhKXsodD09bnVsbHx8dDwwKSYmKHQ9MCksKGE9PW51bGx8fGE+ci5sZW5ndGgpJiYoYT1yLmxlbmd0aCk7dmFyIG49bmV3KHIuQllURVNfUEVSX0VMRU1FTlQ9PTI/eDpyLkJZVEVTX1BFUl9FTEVNRU5UPT00P086cykoYS10KTtyZXR1cm4gbi5zZXQoci5zdWJhcnJheSh0LGEpKSxufSxtMT1bInVuZXhwZWN0ZWQgRU9GIiwiaW52YWxpZCBibG9jayB0eXBlIiwiaW52YWxpZCBsZW5ndGgvbGl0ZXJhbCIsImludmFsaWQgZGlzdGFuY2UiLCJzdHJlYW0gZmluaXNoZWQiLCJubyBzdHJlYW0gaGFuZGxlciIsLCJubyBjYWxsYmFjayIsImludmFsaWQgVVRGLTggZGF0YSIsImV4dHJhIGZpZWxkIHRvbyBsb25nIiwiZGF0ZSBub3QgaW4gcmFuZ2UgMTk4MC0yMDk5IiwiZmlsZW5hbWUgdG9vIGxvbmciLCJzdHJlYW0gZmluaXNoaW5nIiwiaW52YWxpZCB6aXAgZGF0YSJdLGc9ZnVuY3Rpb24ocix0LGEpe3ZhciBuPW5ldyBFcnJvcih0fHxtMVtyXSk7aWYobi5jb2RlPXIsRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UmJkVycm9yLmNhcHR1cmVTdGFja1RyYWNlKG4sZyksIWEpdGhyb3cgbjtyZXR1cm4gbn0sYjE9ZnVuY3Rpb24ocix0LGEpe3ZhciBuPXIubGVuZ3RoO2lmKCFufHxhJiZhLmYmJiFhLmwpcmV0dXJuIHR8fG5ldyBzKDApO3ZhciB2PSF0fHxhLGk9IWF8fGEuaTthfHwoYT17fSksdHx8KHQ9bmV3IHMobiozKSk7dmFyIGM9ZnVuY3Rpb24odTEpe3ZhciB2MT10Lmxlbmd0aDtpZih1MT52MSl7dmFyIGYxPW5ldyBzKE1hdGgubWF4KHYxKjIsdTEpKTtmMS5zZXQodCksdD1mMX19LGY9YS5mfHwwLG89YS5wfHwwLGU9YS5ifHwwLGw9YS5sLGI9YS5kLGQ9YS5tLHk9YS5uLFI9bio4O2Rve2lmKCFsKXtmPWgocixvLDEpO3ZhciBZPWgocixvKzEsMyk7aWYobys9MyxZKWlmKFk9PTEpbD1nMSxiPXcxLGQ9OSx5PTU7ZWxzZSBpZihZPT0yKXt2YXIgUz1oKHIsbywzMSkrMjU3LHIxPWgocixvKzEwLDE1KSs0LHQxPVMraChyLG8rNSwzMSkrMTtvKz0xNDtmb3IodmFyIEY9bmV3IHModDEpLEc9bmV3IHMoMTkpLHc9MDt3PHIxOysrdylHW2wxW3ddXT1oKHIsbyt3KjMsNyk7bys9cjEqMztmb3IodmFyIGExPVcoRyksQjE9KDE8PGExKS0xLFIxPXooRyxhMSwxKSx3PTA7dzx0MTspe3ZhciBuMT1SMVtoKHIsbyxCMSldO28rPW4xJjE1O3ZhciBwPW4xPj4+NDtpZihwPDE2KUZbdysrXT1wO2Vsc2V7dmFyIFQ9MCxOPTA7Zm9yKHA9PTE2PyhOPTMraChyLG8sMyksbys9MixUPUZbdy0xXSk6cD09MTc/KE49MytoKHIsbyw3KSxvKz0zKTpwPT0xOCYmKE49MTEraChyLG8sMTI3KSxvKz03KTtOLS07KUZbdysrXT1UfX12YXIgaTE9Ri5zdWJhcnJheSgwLFMpLF89Ri5zdWJhcnJheShTKTtkPVcoaTEpLHk9VyhfKSxsPXooaTEsZCwxKSxiPXooXyx5LDEpfWVsc2UgZygxKTtlbHNle3ZhciBwPWgxKG8pKzQsTD1yW3AtNF18cltwLTNdPDw4LFo9cCtMO2lmKFo+bil7aSYmZygwKTticmVha312JiZjKGUrTCksdC5zZXQoci5zdWJhcnJheShwLFopLGUpLGEuYj1lKz1MLGEucD1vPVoqOCxhLmY9Zjtjb250aW51ZX1pZihvPlIpe2kmJmcoMCk7YnJlYWt9fXYmJmMoZSsxMzEwNzIpO2Zvcih2YXIgWTE9KDE8PGQpLTEsRjE9KDE8PHkpLTEsJD1vOzskPW8pe3ZhciBUPWxbWChyLG8pJlkxXSxrPVQ+Pj40O2lmKG8rPVQmMTUsbz5SKXtpJiZnKDApO2JyZWFrfWlmKFR8fGcoMiksazwyNTYpdFtlKytdPWs7ZWxzZSBpZihrPT0yNTYpeyQ9byxsPW51bGw7YnJlYWt9ZWxzZXt2YXIgbzE9ay0yNTQ7aWYoaz4yNjQpe3ZhciB3PWstMjU3LE09SFt3XTtvMT1oKHIsbywoMTw8TSktMSkrUVt3XSxvKz1NfXZhciBQPWJbWChyLG8pJkYxXSxEPVA+Pj40O1B8fGcoMyksbys9UCYxNTt2YXIgXz1kMVtEXTtpZihEPjMpe3ZhciBNPUlbRF07Xys9WChyLG8pJigxPDxNKS0xLG8rPU19aWYobz5SKXtpJiZnKDApO2JyZWFrfXYmJmMoZSsxMzEwNzIpO2Zvcih2YXIgZTE9ZStvMTtlPGUxO2UrPTQpdFtlXT10W2UtX10sdFtlKzFdPXRbZSsxLV9dLHRbZSsyXT10W2UrMi1fXSx0W2UrM109dFtlKzMtX107ZT1lMX19YS5sPWwsYS5wPSQsYS5iPWUsYS5mPWYsbCYmKGY9MSxhLm09ZCxhLmQ9YixhLm49eSl9d2hpbGUoIWYpO3JldHVybiBlPT10Lmxlbmd0aD90OmoodCwwLGUpfSx5MT1uZXcgcygwKSxFPWZ1bmN0aW9uKHIsdCl7cmV0dXJuIHJbdF18clt0KzFdPDw4fSxtPWZ1bmN0aW9uKHIsdCl7cmV0dXJuKHJbdF18clt0KzFdPDw4fHJbdCsyXTw8MTZ8clt0KzNdPDwyNCk+Pj4wfSxxPWZ1bmN0aW9uKHIsdCl7cmV0dXJuIG0ocix0KSttKHIsdCs0KSo0Mjk0OTY3Mjk2fTtmdW5jdGlvbiBFMShyLHQpe3JldHVybiBiMShyLHQpfXZhciBBPXR5cGVvZiBUZXh0RGVjb2RlcjwidSImJm5ldyBUZXh0RGVjb2RlcixwMT0wO3RyeXtBLmRlY29kZSh5MSx7c3RyZWFtOiEwfSkscDE9MX1jYXRjaHt9dmFyIEMxPWZ1bmN0aW9uKHIpe2Zvcih2YXIgdD0iIixhPTA7Oyl7dmFyIG49clthKytdLHY9KG4+MTI3KSsobj4yMjMpKyhuPjIzOSk7aWYoYSt2PnIubGVuZ3RoKXJldHVyblt0LGoocixhLTEpXTt2P3Y9PTM/KG49KChuJjE1KTw8MTh8KHJbYSsrXSY2Myk8PDEyfChyW2ErK10mNjMpPDw2fHJbYSsrXSY2MyktNjU1MzYsdCs9U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxuPj4xMCw1NjMyMHxuJjEwMjMpKTp2JjE/dCs9U3RyaW5nLmZyb21DaGFyQ29kZSgobiYzMSk8PDZ8clthKytdJjYzKTp0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKChuJjE1KTw8MTJ8KHJbYSsrXSY2Myk8PDZ8clthKytdJjYzKTp0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKG4pfX07ZnVuY3Rpb24gUzEocix0KXtpZih0KXtmb3IodmFyIGE9IiIsbj0wO248ci5sZW5ndGg7bis9MTYzODQpYSs9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHIuc3ViYXJyYXkobixuKzE2Mzg0KSk7cmV0dXJuIGF9ZWxzZXtpZihBKXJldHVybiBBLmRlY29kZShyKTt2YXIgdj1DMShyKSxpPXZbMF0sYz12WzFdO3JldHVybiBjLmxlbmd0aCYmZyg4KSxpfX12YXIgXzE9ZnVuY3Rpb24ocix0KXtyZXR1cm4gdCszMCtFKHIsdCsyNikrRShyLHQrMjgpfSx4MT1mdW5jdGlvbihyLHQsYSl7dmFyIG49RShyLHQrMjgpLHY9UzEoci5zdWJhcnJheSh0KzQ2LHQrNDYrbiksIShFKHIsdCs4KSYyMDQ4KSksaT10KzQ2K24sYz1tKHIsdCsyMCksZj1hJiZjPT00Mjk0OTY3Mjk1P1QxKHIsaSk6W2MsbShyLHQrMjQpLG0ocix0KzQyKV0sbz1mWzBdLGU9ZlsxXSxsPWZbMl07cmV0dXJuW0Uocix0KzEwKSxvLGUsdixpK0Uocix0KzMwKStFKHIsdCszMiksbF19LFQxPWZ1bmN0aW9uKHIsdCl7Zm9yKDtFKHIsdCkhPTE7dCs9NCtFKHIsdCsyKSk7cmV0dXJuW3Eocix0KzEyKSxxKHIsdCs0KSxxKHIsdCsyMCldfTtmdW5jdGlvbiBrMShyLHQpe2Zvcih2YXIgYT17fSxuPXIubGVuZ3RoLTIyO20ocixuKSE9MTAxMDEwMjU2Oy0tbikoIW58fHIubGVuZ3RoLW4+NjU1NTgpJiZnKDEzKTt2YXIgdj1FKHIsbis4KTtpZighdilyZXR1cm57fTt2YXIgaT1tKHIsbisxNiksYz1pPT00Mjk0OTY3Mjk1O2MmJihuPW0ocixuLTEyKSxtKHIsbikhPTEwMTA3NTc5MiYmZygxMyksdj1tKHIsbiszMiksaT1tKHIsbis0OCkpO2Zvcih2YXIgZj10JiZ0LmZpbHRlcixvPTA7bzx2Oysrbyl7dmFyIGU9eDEocixpLGMpLGw9ZVswXSxiPWVbMV0sZD1lWzJdLHk9ZVszXSxSPWVbNF0sWT1lWzVdLFM9XzEocixZKTtpPVIsKCFmfHxmKHtuYW1lOnksc2l6ZTpiLG9yaWdpbmFsU2l6ZTpkLGNvbXByZXNzaW9uOmx9KSkmJihsP2w9PTg/YVt5XT1FMShyLnN1YmFycmF5KFMsUytiKSxuZXcgcyhkKSk6ZygxNCwidW5rbm93biBjb21wcmVzc2lvbiB0eXBlICIrbCk6YVt5XT1qKHIsUyxTK2IpKX1yZXR1cm4gYX1jb25zdCB6MT1yPT5rMShyLHtmaWx0ZXI6KHtuYW1lOnR9KT0+ISh0LnN0YXJ0c1dpdGgoIl9fTUFDT1NYLyIpfHx0LmluY2x1ZGVzKCIuRFNfU3RvcmUiKSl9KTthZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoe2RhdGE6cn0pPT57bGV0IHQ7dHJ5e3Q9e2lkOnIuaWQsZGF0YTp6MShyLmRhdGEpfX1jYXRjaChhKXt0PXtpZDpyLmlkLGVycm9yOmEubWVzc2FnZX19cG9zdE1lc3NhZ2UodCl9KX0pKCk7Cg==",da=typeof window<"u"&&window.Blob&&new Blob([atob(fa)],{type:"text/javascript;charset=utf-8"});function Ku(){let r;try{if(r=da&&(window.URL||window.webkitURL).createObjectURL(da),!r)throw"";return new Worker(r)}catch{return new Worker("data:application/javascript;base64,"+fa)}finally{r&&(window.URL||window.webkitURL).revokeObjectURL(r)}}let Fr;const Xu=async r=>new Promise((a,i)=>{const c=ca(),g=new Uint8Array(r),v={id:c,data:g};Fr||(Fr=new Ku);const w=({data:_})=>{_.id===v.id&&(Fr.removeEventListener("message",w),"error"in _&&i(new Error(_.error)),"data"in _&&a(_.data))};Fr.addEventListener("message",w),Fr.postMessage(v,[r])}),hi="/";class ha{constructor(a){le(this,"_source",null),le(this,"_fs",null),le(this,"_mountpoint",hi),le(this,"_data",{}),this._source=a}static async preload(a,i){if(Array.isArray(a)){const g=i?.onProgress;return await Promise.all(a.map((v,w)=>{const _=g?{onProgress:(...I)=>g(w,...I)}:{};return this.preload(v,_)}))}const c=new this(a);return await c.load(i),c}async _fetch(a,i){return await Su(a,{},i).then(c=>{if(c.ok)return c.blob();throw new Error(`Failed to fetch ${a.url} ${c.status} (${c.statusText})`)}).then(c=>{if(c.size>0)return c;throw new Error(`The source must not be empty. Received ${c.size} bytes size source.`)})}async _unzip(a){if(!a.type.includes("zip"))throw new TypeError(`The source type must be "application/zip"-like. Received: "${a.type}".`);return await a.arrayBuffer().then(Xu).then(i=>Object.entries(i)).then(i=>Object.fromEntries(i))}async load(a){let i=this._source;return typeof i=="string"&&(i=new Request(i)),i instanceof Request&&(i=await this._fetch(i,a)),i instanceof Blob&&(i=await this._unzip(i)),i instanceof Object&&i.constructor===Object&&await Promise.all(Object.entries(i).map(([c,g])=>this.writeFile(c,g))),this._source=null,this._data}_fsWriteFile(a,i){this._fs&&(a=`${this._mountpoint}${a.startsWith("/")?a.substring(1):a}`,this._fs.writeFile(a,i))}async writeFile(a,i){const c=new Uint8Array(i instanceof Blob?await i.arrayBuffer():i);this._data[a]=c,this._fsWriteFile(a,this._data[a])}mount(a,i=hi){this._fs=a,this._mountpoint=i.endsWith("/")?i:`${i}/`,Object.entries(this._data).forEach(([c,g])=>this._fsWriteFile(c,g))}unmount(){this._fs=null,this._mountpoint=hi}}var Hu=Object.defineProperty,qu=Object.getOwnPropertyDescriptor,Ju=(r,a,i,c)=>{for(var g=c>1?void 0:c?qu(a,i):a,v=r.length-1,w;v>=0;v--)(w=r[v])&&(g=(c?w(a,i,g):w(g))||g);return c&&g&&Hu(a,i,g),g};class pa{constructor(a){le(this,"name",`effects/${ca()}`),le(this,"_player",null),le(this,"_resource"),this._resource=new Qu(a)}static async preload(a,i){if(Array.isArray(a)){const g=i?.onProgress;return await Promise.all(a.map((v,w)=>{const _=g?{onProgress:(...I)=>g(w,...I)}:{};return this.preload(v,_)}))}const c=new this(a);return await c._load(i),c}async _load(a){await this._resource.load(a)}async _bind(a){await this._resource.load(),this._player=a,this._resource.mount(this._player.FS,this.name)}_unbind(){this._resource.unmount(),this._player=null}async writeFile(a,i){return this._resource.writeFile(a,i)}callJsMethod(a,i=""){if(!this._player){console.warn("The method won't evaluate: the effect is not applied to a player.");return}return this._player.callJsMethod(a,i)}async evalJs(a){if(!this._player){console.warn("The script won't evaluate: the effect is not applied to a player.");return}return await this._player.evalJs(a)}}Ju([Ho("Please, use Effect.evalJs() instead.")],pa.prototype,"callJsMethod",1);class Qu extends ha{async _unzip(a){let i=await super._unzip(a);const c=Object.keys(i).map(v=>v.split("/").find(Boolean)),g=c[0];return c.every(v=>v===g)&&(i=Object.fromEntries(Object.entries(i).map(([v,w])=>[v.replace(`${g}/`,""),w]))),i}}let Zu=class{constructor(r){le(this,"_resource"),this._resource=new ha(r)}static async preload(r,a){if(Array.isArray(r)){const c=a?.onProgress;return await Promise.all(r.map((g,v)=>{const w=c?{onProgress:(..._)=>c(v,..._)}:{};return this.preload(g,w)}))}const i=new this(r);return await i._load(a),i}async _load(r){await this._resource.load(r)}async _bind(r){await this._resource.load(),this._resource.mount(r.FS)}};var ec=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(a={}){var i=a,c,g;i.ready=new Promise((e,t)=>{c=e,g=t}),i.expectedDataFileDownloads||(i.expectedDataFileDownloads=0),i.expectedDataFileDownloads++,function(){if(!(i.ENVIRONMENT_IS_PTHREAD||i.$ww)){var e=function(t){typeof window=="object"?window.encodeURIComponent(window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/"):typeof process>"u"&&typeof location<"u"&&encodeURIComponent(location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/");var n="BanubaSDK.data",o="BanubaSDK.data";typeof i.locateFilePackage=="function"&&!i.locateFile&&(i.locateFile=i.locateFilePackage,Se("warning: you defined Module.locateFilePackage, that has been renamed to Module.locateFile (using your locateFilePackage for now)"));var s=i.locateFile?i.locateFile(o,""):o,d=t.remote_package_size;function p(R,W,O,G){var ie=new XMLHttpRequest;ie.open("GET",R,!0),ie.responseType="arraybuffer",ie.onprogress=function(ue){var ce=R,he=W;if(ue.total&&(he=ue.total),ue.loaded){ie.addedTotal?i.dataFileDownloads[ce].loaded=ue.loaded:(ie.addedTotal=!0,i.dataFileDownloads||(i.dataFileDownloads={}),i.dataFileDownloads[ce]={loaded:ue.loaded,total:he});var V=0,Z=0,be=0;for(var Te in i.dataFileDownloads){var ae=i.dataFileDownloads[Te];V+=ae.total,Z+=ae.loaded,be++}V=Math.ceil(V*i.expectedDataFileDownloads/be),i.setStatus&&i.setStatus(`Downloading data... (${Z}/${V})`)}else i.dataFileDownloads||i.setStatus&&i.setStatus("Downloading data...")},ie.onerror=function(ue){throw new Error("NetworkError for: "+R)},ie.onload=function(ue){if(ie.status==200||ie.status==304||ie.status==206||ie.status==0&&ie.response){var ce=ie.response;O(ce)}else throw new Error(ie.statusText+" : "+ie.responseURL)},ie.send(null)}var m=null,S=i.getPreloadedPackage?i.getPreloadedPackage(s,d):null;S||p(s,d,function(R){m?(m(R),m=null):S=R});function x(){function R(ue,ce){if(!ue)throw ce+new Error().stack}i.FS_createPath("/","bnb_js",!0,!0),i.FS_createPath("/","bnb_prefabs",!0,!0),i.FS_createPath("/bnb_prefabs","audio",!0,!0),i.FS_createPath("/bnb_prefabs","base",!0,!0),i.FS_createPath("/bnb_prefabs","camera",!0,!0),i.FS_createPath("/bnb_prefabs/camera","images",!0,!0),i.FS_createPath("/bnb_prefabs","foreground",!0,!0),i.FS_createPath("/bnb_prefabs","gltf",!0,!0),i.FS_createPath("/bnb_prefabs/gltf","meshes",!0,!0),i.FS_createPath("/bnb_prefabs/gltf","shaders",!0,!0),i.FS_createPath("/bnb_prefabs","hint",!0,!0),i.FS_createPath("/bnb_prefabs/hint","font",!0,!0),i.FS_createPath("/bnb_prefabs/hint","meshes",!0,!0),i.FS_createPath("/bnb_prefabs/hint","scripts",!0,!0),i.FS_createPath("/bnb_prefabs/hint","shaders",!0,!0),i.FS_createPath("/bnb_prefabs","lights",!0,!0),i.FS_createPath("/bnb_prefabs","lut",!0,!0),i.FS_createPath("/bnb_prefabs/lut","scripts",!0,!0),i.FS_createPath("/bnb_prefabs/lut","shaders",!0,!0),i.FS_createPath("/bnb_prefabs/lut/shaders","lut-filter",!0,!0),i.FS_createPath("/bnb_prefabs/lut","textures",!0,!0),i.FS_createPath("/bnb_prefabs","msaa",!0,!0),i.FS_createPath("/","bnb_shaders",!0,!0),i.FS_createPath("/bnb_shaders","bnb",!0,!0),i.FS_createPath("/bnb_shaders/bnb","lib",!0,!0),i.FS_createPath("/","frx",!0,!0);function W(ue,ce,he){this.start=ue,this.end=ce,this.audio=he}W.prototype={requests:{},open:function(ue,ce){this.name=ce,this.requests[ce]=this,i.addRunDependency(`fp ${this.name}`)},send:function(){},onload:function(){var ue=this.byteArray.subarray(this.start,this.end);this.finish(ue)},finish:function(ue){var ce=this;i.FS_createDataFile(this.name,null,ue,!0,!0,!0),i.removeRunDependency(`fp ${ce.name}`),this.requests[this.name]=null}};for(var O=t.files,G=0;G<O.length;++G)new W(O[G].start,O[G].end,O[G].audio||0).open("GET",O[G].filename);function ie(ue){R(ue,"Loading data file failed."),R(ue.constructor.name===ArrayBuffer.name,"bad input to processPackageData");var ce=new Uint8Array(ue);W.prototype.byteArray=ce;for(var he=t.files,V=0;V<he.length;++V)W.prototype.requests[he[V].filename].onload();i.removeRunDependency("datafile_BanubaSDK.data")}i.addRunDependency("datafile_BanubaSDK.data"),i.preloadResults||(i.preloadResults={}),i.preloadResults[n]={fromCache:!1},S?(ie(S),S=null):m=ie}i.calledRun?x():(i.preRun||(i.preRun=[]),i.preRun.push(x))};e({files:[{filename:"/bnb_js/.empty",start:0,end:20},{filename:"/bnb_js/background.js",start:20,end:3866},{filename:"/bnb_js/console.js",start:3866,end:4426},{filename:"/bnb_js/global.js",start:4426,end:4807},{filename:"/bnb_js/legacy.js",start:4807,end:9131},{filename:"/bnb_js/light_streaks.js",start:9131,end:18838},{filename:"/bnb_js/prefabs.js",start:18838,end:21147},{filename:"/bnb_js/timers.js",start:21147,end:24466},{filename:"/bnb_prefabs/audio/config.js",start:24466,end:25841},{filename:"/bnb_prefabs/audio/config.json",start:25841,end:25911},{filename:"/bnb_prefabs/audio/schema.json",start:25911,end:26467},{filename:"/bnb_prefabs/base/config.json",start:26467,end:27096},{filename:"/bnb_prefabs/camera/config.json",start:27096,end:28766},{filename:"/bnb_prefabs/camera/images/ibl_diff.ktx",start:28766,end:53410},{filename:"/bnb_prefabs/camera/images/ibl_spec.ktx",start:53410,end:348394},{filename:"/bnb_prefabs/camera/schema.json",start:348394,end:348474},{filename:"/bnb_prefabs/foreground/config.js",start:348474,end:349810},{filename:"/bnb_prefabs/foreground/config.json",start:349810,end:351003},{filename:"/bnb_prefabs/foreground/foreground.frag",start:351003,end:351191},{filename:"/bnb_prefabs/foreground/foreground.vert",start:351191,end:351441},{filename:"/bnb_prefabs/foreground/null_image.png",start:351441,end:351509},{filename:"/bnb_prefabs/foreground/schema.json",start:351509,end:352201},{filename:"/bnb_prefabs/gltf/config.js",start:352201,end:355868},{filename:"/bnb_prefabs/gltf/config.json",start:355868,end:358871},{filename:"/bnb_prefabs/gltf/meshes/cut.bsm2",start:358871,end:415148},{filename:"/bnb_prefabs/gltf/meshes/cut_ears.bsm2",start:415148,end:491309},{filename:"/bnb_prefabs/gltf/schema.json",start:491309,end:496083},{filename:"/bnb_prefabs/gltf/shaders/mat_cut.frag",start:496083,end:496169},{filename:"/bnb_prefabs/gltf/shaders/mat_cut.vert",start:496169,end:497877},{filename:"/bnb_prefabs/hint/config.json",start:497877,end:499561},{filename:"/bnb_prefabs/hint/font/NotoSans-Regular.ttf",start:499561,end:898529},{filename:"/bnb_prefabs/hint/meshes/quad.bsm2",start:898529,end:898807},{filename:"/bnb_prefabs/hint/schema.json",start:898807,end:899844},{filename:"/bnb_prefabs/hint/scripts/index.js",start:899844,end:902890},{filename:"/bnb_prefabs/hint/shaders/text.frag",start:902890,end:903120},{filename:"/bnb_prefabs/hint/shaders/text.vert",start:903120,end:903364},{filename:"/bnb_prefabs/lights/config.js",start:903364,end:904697},{filename:"/bnb_prefabs/lights/config.json",start:904697,end:905008},{filename:"/bnb_prefabs/lights/schema.json",start:905008,end:905814},{filename:"/bnb_prefabs/lut/config.json",start:905814,end:907297},{filename:"/bnb_prefabs/lut/schema.json",start:907297,end:907742},{filename:"/bnb_prefabs/lut/scripts/index.js",start:907742,end:909053},{filename:"/bnb_prefabs/lut/shaders/lut-filter/lut_filter.frag",start:909053,end:909504},{filename:"/bnb_prefabs/lut/shaders/lut-filter/lut_filter.vert",start:909504,end:909754},{filename:"/bnb_prefabs/lut/textures/_null_lut_.png",start:909754,end:914712},{filename:"/bnb_prefabs/msaa/config.js",start:914712,end:915135},{filename:"/bnb_prefabs/msaa/config.json",start:915135,end:915206},{filename:"/bnb_prefabs/msaa/schema.json",start:915206,end:915685},{filename:"/bnb_shaders/.empty",start:915685,end:915704},{filename:"/bnb_shaders/bnb/anim_transform.glsl",start:915704,end:915867},{filename:"/bnb_shaders/bnb/color_spaces.glsl",start:915867,end:921714},{filename:"/bnb_shaders/bnb/decode_int1010102.glsl",start:921714,end:922403},{filename:"/bnb_shaders/bnb/get_bone.glsl",start:922403,end:922825},{filename:"/bnb_shaders/bnb/get_transform.glsl",start:922825,end:923464},{filename:"/bnb_shaders/bnb/glsl.frag",start:923464,end:924026},{filename:"/bnb_shaders/bnb/glsl.vert",start:924026,end:924807},{filename:"/bnb_shaders/bnb/lib/apply_light_streaks.frag",start:924807,end:925119},{filename:"/bnb_shaders/bnb/lib/apply_light_streaks.vert",start:925119,end:925368},{filename:"/bnb_shaders/bnb/lib/auto_morph.frag",start:925368,end:925481},{filename:"/bnb_shaders/bnb/lib/auto_morph.vert",start:925481,end:926093},{filename:"/bnb_shaders/bnb/lib/auto_morph_fisheye.frag",start:926093,end:926206},{filename:"/bnb_shaders/bnb/lib/auto_morph_fisheye.vert",start:926206,end:926713},{filename:"/bnb_shaders/bnb/lib/beauty_morph.frag",start:926713,end:926827},{filename:"/bnb_shaders/bnb/lib/beauty_morph.vert",start:926827,end:927976},{filename:"/bnb_shaders/bnb/lib/bg_blur_downscale.frag",start:927976,end:928850},{filename:"/bnb_shaders/bnb/lib/bg_blur_downscale.vert",start:928850,end:929049},{filename:"/bnb_shaders/bnb/lib/bg_blur_upscale.frag",start:929049,end:930044},{filename:"/bnb_shaders/bnb/lib/bg_blur_upscale.vert",start:930044,end:930379},{filename:"/bnb_shaders/bnb/lib/bg_blur_upscale_apply.frag",start:930379,end:931584},{filename:"/bnb_shaders/bnb/lib/camera.frag",start:931584,end:932165},{filename:"/bnb_shaders/bnb/lib/camera.vert",start:932165,end:932484},{filename:"/bnb_shaders/bnb/lib/camera_bgmask.frag",start:932484,end:933243},{filename:"/bnb_shaders/bnb/lib/camera_bgmask.vert",start:933243,end:933632},{filename:"/bnb_shaders/bnb/lib/copy_pixels.frag",start:933632,end:933806},{filename:"/bnb_shaders/bnb/lib/copy_pixels.vert",start:933806,end:934055},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_0.frag",start:934055,end:935041},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_0.vert",start:935041,end:935626},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_1.frag",start:935626,end:936612},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_1.vert",start:936612,end:937197},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_2.frag",start:937197,end:938183},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_2.vert",start:938183,end:938768},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_3.frag",start:938768,end:939754},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_3.vert",start:939754,end:940339},{filename:"/bnb_shaders/bnb/lib/gltf.frag",start:940339,end:943072},{filename:"/bnb_shaders/bnb/lib/gltf.vert",start:943072,end:944786},{filename:"/bnb_shaders/bnb/lib/gltf_physics.vert",start:944786,end:946388},{filename:"/bnb_shaders/bnb/lib/gltf_spec_gloss.frag",start:946388,end:948201},{filename:"/bnb_shaders/bnb/lib/gltf_spec_gloss.vert",start:948201,end:949915},{filename:"/bnb_shaders/bnb/lib/gltf_spec_gloss_physics.vert",start:949915,end:951517},{filename:"/bnb_shaders/bnb/lib/gltf_transmissive.frag",start:951517,end:953795},{filename:"/bnb_shaders/bnb/lib/gltf_transmissive.vert",start:953795,end:955636},{filename:"/bnb_shaders/bnb/lib/gltf_transmissive_physics.vert",start:955636,end:957365},{filename:"/bnb_shaders/bnb/lib/init_light_streaks.frag",start:957365,end:957695},{filename:"/bnb_shaders/bnb/lib/init_light_streaks.vert",start:957695,end:957944},{filename:"/bnb_shaders/bnb/lib/mesh_morph.frag",start:957944,end:958058},{filename:"/bnb_shaders/bnb/lib/mesh_morph.vert",start:958058,end:959941},{filename:"/bnb_shaders/bnb/lib/morph_apply.frag",start:959941,end:960284},{filename:"/bnb_shaders/bnb/lib/morph_apply.vert",start:960284,end:962466},{filename:"/bnb_shaders/bnb/lib/morph_blur.frag",start:962466,end:963789},{filename:"/bnb_shaders/bnb/lib/morph_blur.vert",start:963789,end:964115},{filename:"/bnb_shaders/bnb/lib/retouch.frag",start:964115,end:967807},{filename:"/bnb_shaders/bnb/lib/retouch.vert",start:967807,end:968365},{filename:"/bnb_shaders/bnb/lib/static_pos.frag",start:968365,end:968476},{filename:"/bnb_shaders/bnb/lib/static_pos.vert",start:968476,end:968742},{filename:"/bnb_shaders/bnb/lib/uv_morph.frag",start:968742,end:968855},{filename:"/bnb_shaders/bnb/lib/uv_morph.vert",start:968855,end:969362},{filename:"/bnb_shaders/bnb/lib/vbg.frag",start:969362,end:970269},{filename:"/bnb_shaders/bnb/lib/vbg.vert",start:970269,end:971309},{filename:"/bnb_shaders/bnb/lut.glsl",start:971309,end:975838},{filename:"/bnb_shaders/bnb/math.glsl",start:975838,end:975838},{filename:"/bnb_shaders/bnb/matrix_operations.glsl",start:975838,end:976322},{filename:"/bnb_shaders/bnb/morph_transform.glsl",start:976322,end:977380},{filename:"/bnb_shaders/bnb/pbr.glsl",start:977380,end:980972},{filename:"/bnb_shaders/bnb/quat_rotation.glsl",start:980972,end:982366},{filename:"/bnb_shaders/bnb/sample_camera.glsl",start:982366,end:983303},{filename:"/bnb_shaders/bnb/samplers_declaration.glsl",start:983303,end:986047},{filename:"/bnb_shaders/bnb/texture_bicubic.glsl",start:986047,end:987405},{filename:"/bnb_shaders/bnb/textures_lookup.glsl",start:987405,end:988605},{filename:"/bnb_shaders/bnb/transform_uv.glsl",start:988605,end:991042},{filename:"/bnb_shaders/bnb/version.glsl",start:991042,end:991264},{filename:"/frx/frx.js",start:991264,end:994181},{filename:"/modules.json",start:994181,end:1007839},{filename:"/resources-versions.txt",start:1007839,end:1010560},{filename:"/watermark.png",start:1010560,end:1013046},{filename:"/watermark_blurred.png",start:1013046,end:1035479}],remote_package_size:1035479})}}();var v=Object.assign({},i),w="./this.program",_=(e,t)=>{throw t},I=!0,D=!1,B="";function te(e){return i.locateFile?i.locateFile(e,B):B+e}var H,re;typeof document<"u"&&document.currentScript&&(B=document.currentScript.src),r&&(B=r),B.indexOf("blob:")!==0?B=B.substr(0,B.replace(/[?#].*/,"").lastIndexOf("/")+1):B="",H=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},re=(e,t,n)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{if(o.status==200||o.status==0&&o.response){t(o.response);return}n()},o.onerror=n,o.send(null)};var X=i.print||console.log.bind(console),Se=i.printErr||console.error.bind(console);Object.assign(i,v),v=null,i.thisProgram&&(w=i.thisProgram),i.quit&&(_=i.quit);var fe;i.wasmBinary&&(fe=i.wasmBinary);var ge=i.noExitRuntime||!0;typeof WebAssembly!="object"&&Qe("no native wasm support detected");var J,Le=!1,We;function pe(e,t){e||Qe(t)}var we,de,xe,ye,F,Y,De,Pe;function Ce(){var e=J.buffer;i.HEAP8=we=new Int8Array(e),i.HEAP16=xe=new Int16Array(e),i.HEAP32=F=new Int32Array(e),i.HEAPU8=de=new Uint8Array(e),i.HEAPU16=ye=new Uint16Array(e),i.HEAPU32=Y=new Uint32Array(e),i.HEAPF32=De=new Float32Array(e),i.HEAPF64=Pe=new Float64Array(e)}var ve,Ge=[],ze=[],Oe=[],at=0;function oe(){return ge||at>0}function _e(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)wt(i.preRun.shift());$(Ge)}function Re(){!i.noFSInit&&!y.init.initialized&&y.init(),y.ignorePermissions=!1,$(ze)}function vt(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Nt(i.postRun.shift());$(Oe)}function wt(e){Ge.unshift(e)}function dt(e){ze.unshift(e)}function Nt(e){Oe.unshift(e)}var tt=0,Xe=null;function ht(e){return e}function bt(e){tt++,i.monitorRunDependencies&&i.monitorRunDependencies(tt)}function nt(e){if(tt--,i.monitorRunDependencies&&i.monitorRunDependencies(tt),tt==0&&Xe){var t=Xe;Xe=null,t()}}function Qe(e){i.onAbort&&i.onAbort(e),e="Aborted("+e+")",Se(e),Le=!0,We=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw g(t),t}var P="data:application/octet-stream;base64,";function N(e){return e.startsWith(P)}var q;q="BanubaSDK.wasm",N(q)||(q=te(q));function u(e){if(e==q&&fe)return new Uint8Array(fe);throw"both async and sync fetching of the wasm failed"}function h(e){return!fe&&I&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>u(e)):Promise.resolve().then(()=>u(e))}function E(e,t,n){return h(e).then(o=>WebAssembly.instantiate(o,t)).then(o=>o).then(n,o=>{Se("failed to asynchronously prepare wasm: "+o),Qe(o)})}function L(e,t,n,o){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!N(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(s=>{var d=WebAssembly.instantiateStreaming(s,n);return d.then(o,function(p){return Se("wasm streaming compile failed: "+p),Se("falling back to ArrayBuffer instantiation"),E(t,n,o)})}):E(t,n,o)}function U(){var e={env:Zl,wasi_snapshot_preview1:Zl};function t(o,s){var d=o.exports;return i.asm=d,J=i.asm.memory,Ce(),ve=i.asm.__indirect_function_table,dt(i.asm.__wasm_call_ctors),nt(),d}bt();function n(o){t(o.instance)}if(i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(o){Se("Module.instantiateWasm callback failed with error: "+o),g(o)}return L(fe,q,e,n).catch(g),{}}var j,ee;function ke(){return/electron/i.test(navigator.userAgent)}function Ve(){function e(){var s=self.top,d=self.parent,p=[];do{try{p.push(d.location.href)}catch{}d&&(d=d.parent)}while(d&&d!==s);return p}var t=[self.location.href].concat(Array.from("ancestorOrigins"in self.location?self.location.ancestorOrigins:e())).map(function(s){return new URL(s.replace(/^blob:/,"")).hostname}).find(function(s){return!!s}),n=ur(t)+1,o=Wt(n);return st(t,o,n),o}function C(e,t){const n=Je(e),o=y.readFile(n),s=document.createElement("video"),d=URL.createObjectURL(new Blob([o],{type:"video/mp4"})),p=i.proxyVideoRequestsTo;s.muted=!0,s.autoplay=!1,s.controls=!1,s.playsInline=!0,s.src=p?p+encodeURIComponent(d):d;var m=Ye.toValue(t);return s.onloadedmetadata=S=>{m(S)},Ye.toHandle(s)}function T(e){const t=Ye.toValue(e);URL.revokeObjectURL(t.src),t.src=""}function l(e,t,n,o){const s=ve.length,d=new Uint8Array(de.slice(e+t,e+n));try{var p=new WebAssembly.Module(d),m=new WebAssembly.Instance(p,{env:{memory:J}});for(var S in m.exports){var x=m.exports[S];addFunction(x)}return s<ve.length?s:o}catch(R){return console.log(R),o}}function f(){function e(o){return o.toString(16).padStart(2,"0")}let t=localStorage.getItem("billing_id");if(!t){var n=new Uint8Array(8);window.crypto.getRandomValues(n),t=Array.from(n,e).join(""),localStorage.setItem("billing_id",t)}return Tr(t)}function b(){return i.getRandomValue()}function A(){if(i.getRandomValue===void 0)try{var e=typeof window=="object"?window:self,t=typeof e.crypto<"u"?e.crypto:e.msCrypto,n=function(){var d=new Uint32Array(1);return t.getRandomValues(d),d[0]>>>0};n(),i.getRandomValue=n}catch{try{var o=require("crypto"),s=function(){var d=o.randomBytes(4);return(d[0]<<24|d[1]<<16|d[2]<<8|d[3])>>>0};s(),i.getRandomValue=s}catch{throw"No secure random number generator found"}}}function M(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var $=e=>{for(;e.length>0;)e.shift()(i)};function ne(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(t){Y[this.ptr+4>>2]=t},this.get_type=function(){return Y[this.ptr+4>>2]},this.set_destructor=function(t){Y[this.ptr+8>>2]=t},this.get_destructor=function(){return Y[this.ptr+8>>2]},this.set_caught=function(t){t=t?1:0,we[this.ptr+12>>0]=t},this.get_caught=function(){return we[this.ptr+12>>0]!=0},this.set_rethrown=function(t){t=t?1:0,we[this.ptr+13>>0]=t},this.get_rethrown=function(){return we[this.ptr+13>>0]!=0},this.init=function(t,n){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(n)},this.set_adjusted_ptr=function(t){Y[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return Y[this.ptr+16>>2]},this.get_exception_ptr=function(){var t=ou(this.get_type());if(t)return Y[this.excPtr>>2];var n=this.get_adjusted_ptr();return n!==0?n:this.excPtr}}var je=0;function He(e,t,n){var o=new ne(e);throw o.init(t,n),je=e,je}var me={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var n=0,o=e.length-1;o>=0;o--){var s=e[o];s==="."?e.splice(o,1):s===".."?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=me.isAbs(e),n=e.substr(-1)==="/";return e=me.normalizeArray(e.split("/").filter(o=>!!o),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=me.splitPath(e),n=t[0],o=t[1];return!n&&!o?".":(o&&(o=o.substr(0,o.length-1)),n+o)},basename:e=>{if(e==="/")return"/";e=me.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments);return me.normalize(e.join("/"))},join2:(e,t)=>me.normalize(e+"/"+t)},Me=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);Qe("initRandomDevice")},Be=e=>(Be=Me())(e),Et={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var o=n>=0?arguments[n]:y.cwd();if(typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!o)return"";e=o+"/"+e,t=me.isAbs(o)}return e=me.normalizeArray(e.split("/").filter(s=>!!s),!t).join("/"),(t?"/":"")+e||"."},relative:(e,t)=>{e=Et.resolve(e).substr(1),t=Et.resolve(t).substr(1);function n(x){for(var R=0;R<x.length&&x[R]==="";R++);for(var W=x.length-1;W>=0&&x[W]==="";W--);return R>W?[]:x.slice(R,W-R+1)}for(var o=n(e.split("/")),s=n(t.split("/")),d=Math.min(o.length,s.length),p=d,m=0;m<d;m++)if(o[m]!==s[m]){p=m;break}for(var S=[],m=p;m<o.length;m++)S.push("..");return S=S.concat(s.slice(p)),S.join("/")}},Jt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,gt=(e,t,n)=>{for(var o=t+n,s=t;e[s]&&!(s>=o);)++s;if(s-t>16&&e.buffer&&Jt)return Jt.decode(e.subarray(t,s));for(var d="";t<s;){var p=e[t++];if(!(p&128)){d+=String.fromCharCode(p);continue}var m=e[t++]&63;if((p&224)==192){d+=String.fromCharCode((p&31)<<6|m);continue}var S=e[t++]&63;if((p&240)==224?p=(p&15)<<12|m<<6|S:p=(p&7)<<18|m<<12|S<<6|e[t++]&63,p<65536)d+=String.fromCharCode(p);else{var x=p-65536;d+=String.fromCharCode(55296|x>>10,56320|x&1023)}}return d},St=[],ur=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);o<=127?t++:o<=2047?t+=2:o>=55296&&o<=57343?(t+=4,++n):t+=3}return t},po=(e,t,n,o)=>{if(!(o>0))return 0;for(var s=n,d=n+o-1,p=0;p<e.length;++p){var m=e.charCodeAt(p);if(m>=55296&&m<=57343){var S=e.charCodeAt(++p);m=65536+((m&1023)<<10)|S&1023}if(m<=127){if(n>=d)break;t[n++]=m}else if(m<=2047){if(n+1>=d)break;t[n++]=192|m>>6,t[n++]=128|m&63}else if(m<=65535){if(n+2>=d)break;t[n++]=224|m>>12,t[n++]=128|m>>6&63,t[n++]=128|m&63}else{if(n+3>=d)break;t[n++]=240|m>>18,t[n++]=128|m>>12&63,t[n++]=128|m>>6&63,t[n++]=128|m&63}}return t[n]=0,n-s};function An(e,t,n){var o=n>0?n:ur(e)+1,s=new Array(o),d=po(e,s,0,s.length);return t&&(s.length=d),s}var fp=()=>{if(!St.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e)return null;St=An(e,!0)}return St.shift()},cr={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){cr.ttys[e]={input:[],output:[],ops:t},y.registerDevice(e,cr.stream_ops)},stream_ops:{open:function(e){var t=cr.ttys[e.node.rdev];if(!t)throw new y.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.fsync(e.tty)},fsync:function(e){e.tty.ops.fsync(e.tty)},read:function(e,t,n,o,s){if(!e.tty||!e.tty.ops.get_char)throw new y.ErrnoError(60);for(var d=0,p=0;p<o;p++){var m;try{m=e.tty.ops.get_char(e.tty)}catch{throw new y.ErrnoError(29)}if(m===void 0&&d===0)throw new y.ErrnoError(6);if(m==null)break;d++,t[n+p]=m}return d&&(e.node.timestamp=Date.now()),d},write:function(e,t,n,o,s){if(!e.tty||!e.tty.ops.put_char)throw new y.ErrnoError(60);try{for(var d=0;d<o;d++)e.tty.ops.put_char(e.tty,t[n+d])}catch{throw new y.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),d}},default_tty_ops:{get_char:function(e){return fp()},put_char:function(e,t){t===null||t===10?(X(gt(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(X(gt(e.output,0)),e.output=[])},ioctl_tcgets:function(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets:function(e,t,n){return 0},ioctl_tiocgwinsz:function(e){return[24,80]}},default_tty1_ops:{put_char:function(e,t){t===null||t===10?(Se(gt(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(Se(gt(e.output,0)),e.output=[])}}},mo=(e,t)=>(de.fill(0,e,e+t),e),dp=(e,t)=>Math.ceil(e/t)*t,Sl=e=>{e=dp(e,65536);var t=ru(65536,e);return t?mo(t,e):0},Ae={ops_table:null,mount(e){return Ae.createNode(null,"/",16895,0)},createNode(e,t,n,o){if(y.isBlkdev(n)||y.isFIFO(n))throw new y.ErrnoError(63);Ae.ops_table||(Ae.ops_table={dir:{node:{getattr:Ae.node_ops.getattr,setattr:Ae.node_ops.setattr,lookup:Ae.node_ops.lookup,mknod:Ae.node_ops.mknod,rename:Ae.node_ops.rename,unlink:Ae.node_ops.unlink,rmdir:Ae.node_ops.rmdir,readdir:Ae.node_ops.readdir,symlink:Ae.node_ops.symlink},stream:{llseek:Ae.stream_ops.llseek}},file:{node:{getattr:Ae.node_ops.getattr,setattr:Ae.node_ops.setattr},stream:{llseek:Ae.stream_ops.llseek,read:Ae.stream_ops.read,write:Ae.stream_ops.write,allocate:Ae.stream_ops.allocate,mmap:Ae.stream_ops.mmap,msync:Ae.stream_ops.msync}},link:{node:{getattr:Ae.node_ops.getattr,setattr:Ae.node_ops.setattr,readlink:Ae.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ae.node_ops.getattr,setattr:Ae.node_ops.setattr},stream:y.chrdev_stream_ops}});var s=y.createNode(e,t,n,o);return y.isDir(s.mode)?(s.node_ops=Ae.ops_table.dir.node,s.stream_ops=Ae.ops_table.dir.stream,s.contents={}):y.isFile(s.mode)?(s.node_ops=Ae.ops_table.file.node,s.stream_ops=Ae.ops_table.file.stream,s.usedBytes=0,s.contents=null):y.isLink(s.mode)?(s.node_ops=Ae.ops_table.link.node,s.stream_ops=Ae.ops_table.link.stream):y.isChrdev(s.mode)&&(s.node_ops=Ae.ops_table.chrdev.node,s.stream_ops=Ae.ops_table.chrdev.stream),s.timestamp=Date.now(),e&&(e.contents[t]=s,e.timestamp=s.timestamp),s},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){var o=1048576;t=Math.max(t,n*(n<o?2:1.125)>>>0),n!=0&&(t=Math.max(t,256));var s=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(s.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=y.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,y.isDir(e.mode)?t.size=4096:y.isFile(e.mode)?t.size=e.usedBytes:y.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&Ae.resizeFileStorage(e,t.size)},lookup(e,t){throw y.genericErrors[44]},mknod(e,t,n,o){return Ae.createNode(e,t,n,o)},rename(e,t,n){if(y.isDir(e.mode)){var o;try{o=y.lookupNode(t,n)}catch{}if(o)for(var s in o.contents)throw new y.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var n=y.lookupNode(e,t);for(var o in n.contents)throw new y.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink(e,t,n){var o=Ae.createNode(e,t,41471,0);return o.link=n,o},readlink(e){if(!y.isLink(e.mode))throw new y.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,o,s){var d=e.node.contents;if(s>=e.node.usedBytes)return 0;var p=Math.min(e.node.usedBytes-s,o);if(p>8&&d.subarray)t.set(d.subarray(s,s+p),n);else for(var m=0;m<p;m++)t[n+m]=d[s+m];return p},write(e,t,n,o,s,d){if(t.buffer===we.buffer&&(d=!1),!o)return 0;var p=e.node;if(p.timestamp=Date.now(),t.subarray&&(!p.contents||p.contents.subarray)){if(d)return p.contents=t.subarray(n,n+o),p.usedBytes=o,o;if(p.usedBytes===0&&s===0)return p.contents=t.slice(n,n+o),p.usedBytes=o,o;if(s+o<=p.usedBytes)return p.contents.set(t.subarray(n,n+o),s),o}if(Ae.expandFileStorage(p,s+o),p.contents.subarray&&t.subarray)p.contents.set(t.subarray(n,n+o),s);else for(var m=0;m<o;m++)p.contents[s+m]=t[n+m];return p.usedBytes=Math.max(p.usedBytes,s+o),o},llseek(e,t,n){var o=t;if(n===1?o+=e.position:n===2&&y.isFile(e.node.mode)&&(o+=e.node.usedBytes),o<0)throw new y.ErrnoError(28);return o},allocate(e,t,n){Ae.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap(e,t,n,o,s){if(!y.isFile(e.node.mode))throw new y.ErrnoError(43);var d,p,m=e.node.contents;if(!(s&2)&&m.buffer===we.buffer)p=!1,d=m.byteOffset;else{if((n>0||n+t<m.length)&&(m.subarray?m=m.subarray(n,n+t):m=Array.prototype.slice.call(m,n,n+t)),p=!0,d=Sl(t),!d)throw new y.ErrnoError(48);we.set(m,d)}return{ptr:d,allocated:p}},msync(e,t,n,o,s){return Ae.stream_ops.write(e,t,0,o,n,!1),0}}},hp=(e,t,n,o)=>{var s=o?"":`al ${e}`;re(e,d=>{pe(d,`Loading data file "${e}" failed (no arrayBuffer).`),t(new Uint8Array(d)),s&&nt()},d=>{if(n)n();else throw`Loading data file "${e}" failed.`}),s&&bt()},bo=i.preloadPlugins||[];function pp(e,t,n,o){typeof z<"u"&&z.init();var s=!1;return bo.forEach(function(d){s||d.canHandle(t)&&(d.handle(e,t,n,o),s=!0)}),s}function mp(e,t,n,o,s,d,p,m,S,x){var R=t?Et.resolve(me.join2(e,t)):e;function W(O){function G(ie){x&&x(),m||y.createDataFile(e,t,ie,o,s,S),d&&d(),nt()}pp(O,R,G,()=>{p&&p(),nt()})||G(O)}bt(),typeof n=="string"?hp(n,O=>W(O),p):W(n)}function bp(e){var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},n=t[e];if(typeof n>"u")throw new Error(`Unknown file open mode: ${e}`);return n}function go(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n}var y={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(e=Et.resolve(e),!e)return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};if(t=Object.assign(n,t),t.recurse_count>8)throw new y.ErrnoError(32);for(var o=e.split("/").filter(W=>!!W),s=y.root,d="/",p=0;p<o.length;p++){var m=p===o.length-1;if(m&&t.parent)break;if(s=y.lookupNode(s,o[p]),d=me.join2(d,o[p]),y.isMountpoint(s)&&(!m||m&&t.follow_mount)&&(s=s.mounted.root),!m||t.follow)for(var S=0;y.isLink(s.mode);){var x=y.readlink(d);d=Et.resolve(me.dirname(d),x);var R=y.lookupPath(d,{recurse_count:t.recurse_count+1});if(s=R.node,S++>40)throw new y.ErrnoError(32)}}return{path:d,node:s}},getPath:e=>{for(var t;;){if(y.isRoot(e)){var n=e.mount.mountpoint;return t?n[n.length-1]!=="/"?`${n}/${t}`:n+t:n}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName:(e,t)=>{for(var n=0,o=0;o<t.length;o++)n=(n<<5)-n+t.charCodeAt(o)|0;return(e+n>>>0)%y.nameTable.length},hashAddNode:e=>{var t=y.hashName(e.parent.id,e.name);e.name_next=y.nameTable[t],y.nameTable[t]=e},hashRemoveNode:e=>{var t=y.hashName(e.parent.id,e.name);if(y.nameTable[t]===e)y.nameTable[t]=e.name_next;else for(var n=y.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:(e,t)=>{var n=y.mayLookup(e);if(n)throw new y.ErrnoError(n,e);for(var o=y.hashName(e.id,t),s=y.nameTable[o];s;s=s.name_next){var d=s.name;if(s.parent.id===e.id&&d===t)return s}return y.lookup(e,t)},createNode:(e,t,n,o)=>{var s=new y.FSNode(e,t,n,o);return y.hashAddNode(s),s},destroyNode:e=>{y.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>(e&61440)===32768,isDir:e=>(e&61440)===16384,isLink:e=>(e&61440)===40960,isChrdev:e=>(e&61440)===8192,isBlkdev:e=>(e&61440)===24576,isFIFO:e=>(e&61440)===4096,isSocket:e=>(e&49152)===49152,flagsToPermissionString:e=>{var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions:(e,t)=>y.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0,mayLookup:e=>{var t=y.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:(e,t)=>{try{return y.lookupNode(e,t),20}catch{}return y.nodePermissions(e,"wx")},mayDelete:(e,t,n)=>{var o;try{o=y.lookupNode(e,t)}catch(d){return d.errno}var s=y.nodePermissions(e,"wx");if(s)return s;if(n){if(!y.isDir(o.mode))return 54;if(y.isRoot(o)||y.getPath(o)===y.cwd())return 10}else if(y.isDir(o.mode))return 31;return 0},mayOpen:(e,t)=>e?y.isLink(e.mode)?32:y.isDir(e.mode)&&(y.flagsToPermissionString(t)!=="r"||t&512)?31:y.nodePermissions(e,y.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:()=>{for(var e=0;e<=y.MAX_OPEN_FDS;e++)if(!y.streams[e])return e;throw new y.ErrnoError(33)},getStreamChecked:e=>{var t=y.getStream(e);if(!t)throw new y.ErrnoError(8);return t},getStream:e=>y.streams[e],createStream:(e,t=-1)=>(y.FSStream||(y.FSStream=function(){this.shared={}},y.FSStream.prototype={},Object.defineProperties(y.FSStream.prototype,{object:{get(){return this.node},set(n){this.node=n}},isRead:{get(){return(this.flags&2097155)!==1}},isWrite:{get(){return(this.flags&2097155)!==0}},isAppend:{get(){return this.flags&1024}},flags:{get(){return this.shared.flags},set(n){this.shared.flags=n}},position:{get(){return this.shared.position},set(n){this.shared.position=n}}})),e=Object.assign(new y.FSStream,e),t==-1&&(t=y.nextfd()),e.fd=t,y.streams[t]=e,e),closeStream:e=>{y.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=y.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new y.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{y.devices[e]={stream_ops:t}},getDevice:e=>y.devices[e],getMounts:e=>{for(var t=[],n=[e];n.length;){var o=n.pop();t.push(o),n.push.apply(n,o.mounts)}return t},syncfs:(e,t)=>{typeof e=="function"&&(t=e,e=!1),y.syncFSRequests++,y.syncFSRequests>1&&Se(`warning: ${y.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=y.getMounts(y.root.mount),o=0;function s(p){return y.syncFSRequests--,t(p)}function d(p){if(p)return d.errored?void 0:(d.errored=!0,s(p));++o>=n.length&&s(null)}n.forEach(p=>{if(!p.type.syncfs)return d(null);p.type.syncfs(p,e,d)})},mount:(e,t,n)=>{var o=n==="/",s=!n,d;if(o&&y.root)throw new y.ErrnoError(10);if(!o&&!s){var p=y.lookupPath(n,{follow_mount:!1});if(n=p.path,d=p.node,y.isMountpoint(d))throw new y.ErrnoError(10);if(!y.isDir(d.mode))throw new y.ErrnoError(54)}var m={type:e,opts:t,mountpoint:n,mounts:[]},S=e.mount(m);return S.mount=m,m.root=S,o?y.root=S:d&&(d.mounted=m,d.mount&&d.mount.mounts.push(m)),S},unmount:e=>{var t=y.lookupPath(e,{follow_mount:!1});if(!y.isMountpoint(t.node))throw new y.ErrnoError(28);var n=t.node,o=n.mounted,s=y.getMounts(o);Object.keys(y.nameTable).forEach(p=>{for(var m=y.nameTable[p];m;){var S=m.name_next;s.includes(m.mount)&&y.destroyNode(m),m=S}}),n.mounted=null;var d=n.mount.mounts.indexOf(o);n.mount.mounts.splice(d,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,n)=>{var o=y.lookupPath(e,{parent:!0}),s=o.node,d=me.basename(e);if(!d||d==="."||d==="..")throw new y.ErrnoError(28);var p=y.mayCreate(s,d);if(p)throw new y.ErrnoError(p);if(!s.node_ops.mknod)throw new y.ErrnoError(63);return s.node_ops.mknod(s,d,t,n)},create:(e,t)=>(t=t!==void 0?t:438,t&=4095,t|=32768,y.mknod(e,t,0)),mkdir:(e,t)=>(t=t!==void 0?t:511,t&=1023,t|=16384,y.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var n=e.split("/"),o="",s=0;s<n.length;++s)if(n[s]){o+="/"+n[s];try{y.mkdir(o,t)}catch(d){if(d.errno!=20)throw d}}},mkdev:(e,t,n)=>(typeof n>"u"&&(n=t,t=438),t|=8192,y.mknod(e,t,n)),symlink:(e,t)=>{if(!Et.resolve(e))throw new y.ErrnoError(44);var n=y.lookupPath(t,{parent:!0}),o=n.node;if(!o)throw new y.ErrnoError(44);var s=me.basename(t),d=y.mayCreate(o,s);if(d)throw new y.ErrnoError(d);if(!o.node_ops.symlink)throw new y.ErrnoError(63);return o.node_ops.symlink(o,s,e)},rename:(e,t)=>{var n=me.dirname(e),o=me.dirname(t),s=me.basename(e),d=me.basename(t),p,m,S;if(p=y.lookupPath(e,{parent:!0}),m=p.node,p=y.lookupPath(t,{parent:!0}),S=p.node,!m||!S)throw new y.ErrnoError(44);if(m.mount!==S.mount)throw new y.ErrnoError(75);var x=y.lookupNode(m,s),R=Et.relative(e,o);if(R.charAt(0)!==".")throw new y.ErrnoError(28);if(R=Et.relative(t,n),R.charAt(0)!==".")throw new y.ErrnoError(55);var W;try{W=y.lookupNode(S,d)}catch{}if(x!==W){var O=y.isDir(x.mode),G=y.mayDelete(m,s,O);if(G)throw new y.ErrnoError(G);if(G=W?y.mayDelete(S,d,O):y.mayCreate(S,d),G)throw new y.ErrnoError(G);if(!m.node_ops.rename)throw new y.ErrnoError(63);if(y.isMountpoint(x)||W&&y.isMountpoint(W))throw new y.ErrnoError(10);if(S!==m&&(G=y.nodePermissions(m,"w"),G))throw new y.ErrnoError(G);y.hashRemoveNode(x);try{m.node_ops.rename(x,S,d)}catch(ie){throw ie}finally{y.hashAddNode(x)}}},rmdir:e=>{var t=y.lookupPath(e,{parent:!0}),n=t.node,o=me.basename(e),s=y.lookupNode(n,o),d=y.mayDelete(n,o,!0);if(d)throw new y.ErrnoError(d);if(!n.node_ops.rmdir)throw new y.ErrnoError(63);if(y.isMountpoint(s))throw new y.ErrnoError(10);n.node_ops.rmdir(n,o),y.destroyNode(s)},readdir:e=>{var t=y.lookupPath(e,{follow:!0}),n=t.node;if(!n.node_ops.readdir)throw new y.ErrnoError(54);return n.node_ops.readdir(n)},unlink:e=>{var t=y.lookupPath(e,{parent:!0}),n=t.node;if(!n)throw new y.ErrnoError(44);var o=me.basename(e),s=y.lookupNode(n,o),d=y.mayDelete(n,o,!1);if(d)throw new y.ErrnoError(d);if(!n.node_ops.unlink)throw new y.ErrnoError(63);if(y.isMountpoint(s))throw new y.ErrnoError(10);n.node_ops.unlink(n,o),y.destroyNode(s)},readlink:e=>{var t=y.lookupPath(e),n=t.node;if(!n)throw new y.ErrnoError(44);if(!n.node_ops.readlink)throw new y.ErrnoError(28);return Et.resolve(y.getPath(n.parent),n.node_ops.readlink(n))},stat:(e,t)=>{var n=y.lookupPath(e,{follow:!t}),o=n.node;if(!o)throw new y.ErrnoError(44);if(!o.node_ops.getattr)throw new y.ErrnoError(63);return o.node_ops.getattr(o)},lstat:e=>y.stat(e,!0),chmod:(e,t,n)=>{var o;if(typeof e=="string"){var s=y.lookupPath(e,{follow:!n});o=s.node}else o=e;if(!o.node_ops.setattr)throw new y.ErrnoError(63);o.node_ops.setattr(o,{mode:t&4095|o.mode&-4096,timestamp:Date.now()})},lchmod:(e,t)=>{y.chmod(e,t,!0)},fchmod:(e,t)=>{var n=y.getStreamChecked(e);y.chmod(n.node,t)},chown:(e,t,n,o)=>{var s;if(typeof e=="string"){var d=y.lookupPath(e,{follow:!o});s=d.node}else s=e;if(!s.node_ops.setattr)throw new y.ErrnoError(63);s.node_ops.setattr(s,{timestamp:Date.now()})},lchown:(e,t,n)=>{y.chown(e,t,n,!0)},fchown:(e,t,n)=>{var o=y.getStreamChecked(e);y.chown(o.node,t,n)},truncate:(e,t)=>{if(t<0)throw new y.ErrnoError(28);var n;if(typeof e=="string"){var o=y.lookupPath(e,{follow:!0});n=o.node}else n=e;if(!n.node_ops.setattr)throw new y.ErrnoError(63);if(y.isDir(n.mode))throw new y.ErrnoError(31);if(!y.isFile(n.mode))throw new y.ErrnoError(28);var s=y.nodePermissions(n,"w");if(s)throw new y.ErrnoError(s);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var n=y.getStreamChecked(e);if(!(n.flags&2097155))throw new y.ErrnoError(28);y.truncate(n.node,t)},utime:(e,t,n)=>{var o=y.lookupPath(e,{follow:!0}),s=o.node;s.node_ops.setattr(s,{timestamp:Math.max(t,n)})},open:(e,t,n)=>{if(e==="")throw new y.ErrnoError(44);t=typeof t=="string"?bp(t):t,n=typeof n>"u"?438:n,t&64?n=n&4095|32768:n=0;var o;if(typeof e=="object")o=e;else{e=me.normalize(e);try{var s=y.lookupPath(e,{follow:!(t&131072)});o=s.node}catch{}}var d=!1;if(t&64)if(o){if(t&128)throw new y.ErrnoError(20)}else o=y.mknod(e,n,0),d=!0;if(!o)throw new y.ErrnoError(44);if(y.isChrdev(o.mode)&&(t&=-513),t&65536&&!y.isDir(o.mode))throw new y.ErrnoError(54);if(!d){var p=y.mayOpen(o,t);if(p)throw new y.ErrnoError(p)}t&512&&!d&&y.truncate(o,0),t&=-131713;var m=y.createStream({node:o,path:y.getPath(o),flags:t,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1});return m.stream_ops.open&&m.stream_ops.open(m),i.logReadFiles&&!(t&1)&&(y.readFiles||(y.readFiles={}),e in y.readFiles||(y.readFiles[e]=1)),m},close:e=>{if(y.isClosed(e))throw new y.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{y.closeStream(e.fd)}e.fd=null},isClosed:e=>e.fd===null,llseek:(e,t,n)=>{if(y.isClosed(e))throw new y.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new y.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new y.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:(e,t,n,o,s)=>{if(o<0||s<0)throw new y.ErrnoError(28);if(y.isClosed(e))throw new y.ErrnoError(8);if((e.flags&2097155)===1)throw new y.ErrnoError(8);if(y.isDir(e.node.mode))throw new y.ErrnoError(31);if(!e.stream_ops.read)throw new y.ErrnoError(28);var d=typeof s<"u";if(!d)s=e.position;else if(!e.seekable)throw new y.ErrnoError(70);var p=e.stream_ops.read(e,t,n,o,s);return d||(e.position+=p),p},write:(e,t,n,o,s,d)=>{if(o<0||s<0)throw new y.ErrnoError(28);if(y.isClosed(e))throw new y.ErrnoError(8);if(!(e.flags&2097155))throw new y.ErrnoError(8);if(y.isDir(e.node.mode))throw new y.ErrnoError(31);if(!e.stream_ops.write)throw new y.ErrnoError(28);e.seekable&&e.flags&1024&&y.llseek(e,0,2);var p=typeof s<"u";if(!p)s=e.position;else if(!e.seekable)throw new y.ErrnoError(70);var m=e.stream_ops.write(e,t,n,o,s,d);return p||(e.position+=m),m},allocate:(e,t,n)=>{if(y.isClosed(e))throw new y.ErrnoError(8);if(t<0||n<=0)throw new y.ErrnoError(28);if(!(e.flags&2097155))throw new y.ErrnoError(8);if(!y.isFile(e.node.mode)&&!y.isDir(e.node.mode))throw new y.ErrnoError(43);if(!e.stream_ops.allocate)throw new y.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:(e,t,n,o,s)=>{if(o&2&&!(s&2)&&(e.flags&2097155)!==2)throw new y.ErrnoError(2);if((e.flags&2097155)===1)throw new y.ErrnoError(2);if(!e.stream_ops.mmap)throw new y.ErrnoError(43);return e.stream_ops.mmap(e,t,n,o,s)},msync:(e,t,n,o,s)=>e.stream_ops.msync?e.stream_ops.msync(e,t,n,o,s):0,munmap:e=>0,ioctl:(e,t,n)=>{if(!e.stream_ops.ioctl)throw new y.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var n,o=y.open(e,t.flags),s=y.stat(e),d=s.size,p=new Uint8Array(d);return y.read(o,p,0,d,0),t.encoding==="utf8"?n=gt(p,0):t.encoding==="binary"&&(n=p),y.close(o),n},writeFile:(e,t,n={})=>{n.flags=n.flags||577;var o=y.open(e,n.flags,n.mode);if(typeof t=="string"){var s=new Uint8Array(ur(t)+1),d=po(t,s,0,s.length);y.write(o,s,0,d,void 0,n.canOwn)}else if(ArrayBuffer.isView(t))y.write(o,t,0,t.byteLength,void 0,n.canOwn);else throw new Error("Unsupported data type");y.close(o)},cwd:()=>y.currentPath,chdir:e=>{var t=y.lookupPath(e,{follow:!0});if(t.node===null)throw new y.ErrnoError(44);if(!y.isDir(t.node.mode))throw new y.ErrnoError(54);var n=y.nodePermissions(t.node,"x");if(n)throw new y.ErrnoError(n);y.currentPath=t.path},createDefaultDirectories:()=>{y.mkdir("/tmp"),y.mkdir("/home"),y.mkdir("/home/web_user")},createDefaultDevices:()=>{y.mkdir("/dev"),y.registerDevice(y.makedev(1,3),{read:()=>0,write:(o,s,d,p,m)=>p}),y.mkdev("/dev/null",y.makedev(1,3)),cr.register(y.makedev(5,0),cr.default_tty_ops),cr.register(y.makedev(6,0),cr.default_tty1_ops),y.mkdev("/dev/tty",y.makedev(5,0)),y.mkdev("/dev/tty1",y.makedev(6,0));var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=Be(e).byteLength),e[--t]);y.createDevice("/dev","random",n),y.createDevice("/dev","urandom",n),y.mkdir("/dev/shm"),y.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{y.mkdir("/proc");var e=y.mkdir("/proc/self");y.mkdir("/proc/self/fd"),y.mount({mount:()=>{var t=y.createNode(e,"fd",16895,73);return t.node_ops={lookup:(n,o)=>{var s=+o,d=y.getStreamChecked(s),p={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>d.path}};return p.parent=p,p}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{i.stdin?y.createDevice("/dev","stdin",i.stdin):y.symlink("/dev/tty","/dev/stdin"),i.stdout?y.createDevice("/dev","stdout",null,i.stdout):y.symlink("/dev/tty","/dev/stdout"),i.stderr?y.createDevice("/dev","stderr",null,i.stderr):y.symlink("/dev/tty1","/dev/stderr"),y.open("/dev/stdin",0),y.open("/dev/stdout",1),y.open("/dev/stderr",1)},ensureErrnoError:()=>{y.ErrnoError||(y.ErrnoError=function(e,t){this.name="ErrnoError",this.node=t,this.setErrno=function(n){this.errno=n},this.setErrno(e),this.message="FS error"},y.ErrnoError.prototype=new Error,y.ErrnoError.prototype.constructor=y.ErrnoError,[44].forEach(e=>{y.genericErrors[e]=new y.ErrnoError(e),y.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:()=>{y.ensureErrnoError(),y.nameTable=new Array(4096),y.mount(Ae,{},"/"),y.createDefaultDirectories(),y.createDefaultDevices(),y.createSpecialDirectories(),y.filesystems={MEMFS:Ae}},init:(e,t,n)=>{y.init.initialized=!0,y.ensureErrnoError(),i.stdin=e||i.stdin,i.stdout=t||i.stdout,i.stderr=n||i.stderr,y.createStandardStreams()},quit:()=>{y.init.initialized=!1;for(var e=0;e<y.streams.length;e++){var t=y.streams[e];t&&y.close(t)}},findObject:(e,t)=>{var n=y.analyzePath(e,t);return n.exists?n.object:null},analyzePath:(e,t)=>{try{var n=y.lookupPath(e,{follow:!t});e=n.path}catch{}var o={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=y.lookupPath(e,{parent:!0});o.parentExists=!0,o.parentPath=n.path,o.parentObject=n.node,o.name=me.basename(e),n=y.lookupPath(e,{follow:!t}),o.exists=!0,o.path=n.path,o.object=n.node,o.name=n.node.name,o.isRoot=n.path==="/"}catch(s){o.error=s.errno}return o},createPath:(e,t,n,o)=>{e=typeof e=="string"?e:y.getPath(e);for(var s=t.split("/").reverse();s.length;){var d=s.pop();if(d){var p=me.join2(e,d);try{y.mkdir(p)}catch{}e=p}}return p},createFile:(e,t,n,o,s)=>{var d=me.join2(typeof e=="string"?e:y.getPath(e),t),p=go(o,s);return y.create(d,p)},createDataFile:(e,t,n,o,s,d)=>{var p=t;e&&(e=typeof e=="string"?e:y.getPath(e),p=t?me.join2(e,t):e);var m=go(o,s),S=y.create(p,m);if(n){if(typeof n=="string"){for(var x=new Array(n.length),R=0,W=n.length;R<W;++R)x[R]=n.charCodeAt(R);n=x}y.chmod(S,m|146);var O=y.open(S,577);y.write(O,n,0,n.length,0,d),y.close(O),y.chmod(S,m)}return S},createDevice:(e,t,n,o)=>{var s=me.join2(typeof e=="string"?e:y.getPath(e),t),d=go(!!n,!!o);y.createDevice.major||(y.createDevice.major=64);var p=y.makedev(y.createDevice.major++,0);return y.registerDevice(p,{open:m=>{m.seekable=!1},close:m=>{o&&o.buffer&&o.buffer.length&&o(10)},read:(m,S,x,R,W)=>{for(var O=0,G=0;G<R;G++){var ie;try{ie=n()}catch{throw new y.ErrnoError(29)}if(ie===void 0&&O===0)throw new y.ErrnoError(6);if(ie==null)break;O++,S[x+G]=ie}return O&&(m.node.timestamp=Date.now()),O},write:(m,S,x,R,W)=>{for(var O=0;O<R;O++)try{o(S[x+O])}catch{throw new y.ErrnoError(29)}return R&&(m.node.timestamp=Date.now()),O}}),y.mkdev(s,d,p)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(H)try{e.contents=An(H(e.url),!0),e.usedBytes=e.contents.length}catch{throw new y.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(e,t,n,o,s)=>{function d(){this.lengthKnown=!1,this.chunks=[]}if(d.prototype.get=function(O){if(!(O>this.length-1||O<0)){var G=O%this.chunkSize,ie=O/this.chunkSize|0;return this.getter(ie)[G]}},d.prototype.setDataGetter=function(O){this.getter=O},d.prototype.cacheLength=function(){var O=new XMLHttpRequest;if(O.open("HEAD",n,!1),O.send(null),!(O.status>=200&&O.status<300||O.status===304))throw new Error("Couldn't load "+n+". Status: "+O.status);var G=Number(O.getResponseHeader("Content-length")),ie,ue=(ie=O.getResponseHeader("Accept-Ranges"))&&ie==="bytes",ce=(ie=O.getResponseHeader("Content-Encoding"))&&ie==="gzip",he=1024*1024;ue||(he=G);var V=(be,Te)=>{if(be>Te)throw new Error("invalid range ("+be+", "+Te+") or no bytes requested!");if(Te>G-1)throw new Error("only "+G+" bytes available! programmer error!");var ae=new XMLHttpRequest;if(ae.open("GET",n,!1),G!==he&&ae.setRequestHeader("Range","bytes="+be+"-"+Te),ae.responseType="arraybuffer",ae.overrideMimeType&&ae.overrideMimeType("text/plain; charset=x-user-defined"),ae.send(null),!(ae.status>=200&&ae.status<300||ae.status===304))throw new Error("Couldn't load "+n+". Status: "+ae.status);return ae.response!==void 0?new Uint8Array(ae.response||[]):An(ae.responseText||"",!0)},Z=this;Z.setDataGetter(be=>{var Te=be*he,ae=(be+1)*he-1;if(ae=Math.min(ae,G-1),typeof Z.chunks[be]>"u"&&(Z.chunks[be]=V(Te,ae)),typeof Z.chunks[be]>"u")throw new Error("doXHR failed!");return Z.chunks[be]}),(ce||!G)&&(he=G=1,G=this.getter(0).length,he=G,X("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=G,this._chunkSize=he,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var p,m}else var m={isDevice:!1,url:n};var S=y.createFile(e,t,m,o,s);m.contents?S.contents=m.contents:m.url&&(S.contents=null,S.url=m.url),Object.defineProperties(S,{usedBytes:{get:function(){return this.contents.length}}});var x={},R=Object.keys(S.stream_ops);R.forEach(O=>{var G=S.stream_ops[O];x[O]=function(){return y.forceLoadFile(S),G.apply(null,arguments)}});function W(O,G,ie,ue,ce){var he=O.node.contents;if(ce>=he.length)return 0;var V=Math.min(he.length-ce,ue);if(he.slice)for(var Z=0;Z<V;Z++)G[ie+Z]=he[ce+Z];else for(var Z=0;Z<V;Z++)G[ie+Z]=he.get(ce+Z);return V}return x.read=(O,G,ie,ue,ce)=>(y.forceLoadFile(S),W(O,G,ie,ue,ce)),x.mmap=(O,G,ie,ue,ce)=>{y.forceLoadFile(S);var he=Sl(G);if(!he)throw new y.ErrnoError(48);return W(O,we,he,G,ie),{ptr:he,allocated:!0}},S.stream_ops=x,S}},Je=(e,t)=>e?gt(de,e,t):"",Ee={DEFAULT_POLLMASK:5,calculateAt:function(e,t,n){if(me.isAbs(t))return t;var o;if(e===-100)o=y.cwd();else{var s=Ee.getStreamFromFD(e);o=s.path}if(t.length==0){if(!n)throw new y.ErrnoError(44);return o}return me.join2(o,t)},doStat:function(e,t,n){try{var o=e(t)}catch(m){if(m&&m.node&&me.normalize(t)!==me.normalize(y.getPath(m.node)))return-54;throw m}F[n>>2]=o.dev,F[n+4>>2]=o.mode,Y[n+8>>2]=o.nlink,F[n+12>>2]=o.uid,F[n+16>>2]=o.gid,F[n+20>>2]=o.rdev,ee=[o.size>>>0,(j=o.size,+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],F[n+24>>2]=ee[0],F[n+28>>2]=ee[1],F[n+32>>2]=4096,F[n+36>>2]=o.blocks;var s=o.atime.getTime(),d=o.mtime.getTime(),p=o.ctime.getTime();return ee=[Math.floor(s/1e3)>>>0,(j=Math.floor(s/1e3),+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],F[n+40>>2]=ee[0],F[n+44>>2]=ee[1],Y[n+48>>2]=s%1e3*1e3,ee=[Math.floor(d/1e3)>>>0,(j=Math.floor(d/1e3),+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],F[n+56>>2]=ee[0],F[n+60>>2]=ee[1],Y[n+64>>2]=d%1e3*1e3,ee=[Math.floor(p/1e3)>>>0,(j=Math.floor(p/1e3),+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],F[n+72>>2]=ee[0],F[n+76>>2]=ee[1],Y[n+80>>2]=p%1e3*1e3,ee=[o.ino>>>0,(j=o.ino,+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],F[n+88>>2]=ee[0],F[n+92>>2]=ee[1],0},doMsync:function(e,t,n,o,s){if(!y.isFile(t.node.mode))throw new y.ErrnoError(43);if(o&2)return 0;var d=de.slice(e,e+n);y.msync(t,d,s,n,o)},varargs:void 0,get(){Ee.varargs+=4;var e=F[Ee.varargs-4>>2];return e},getStr(e){var t=Je(e);return t},getStreamFromFD:function(e){var t=y.getStreamChecked(e);return t}};function gp(e,t){try{return e=Ee.getStr(e),y.chmod(e,t),0}catch(n){if(typeof y>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function yp(e,t){try{return y.fchmod(e,t),0}catch(n){if(typeof y>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var _p=e=>(F[eu()>>2]=e,e);function vp(e,t,n){Ee.varargs=n;try{var o=Ee.getStreamFromFD(e);switch(t){case 0:{var s=Ee.get();if(s<0)return-28;var d;return d=y.createStream(o,s),d.fd}case 1:case 2:return 0;case 3:return o.flags;case 4:{var s=Ee.get();return o.flags|=s,0}case 5:{var s=Ee.get(),p=0;return xe[s+p>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return _p(28),-1;default:return-28}}catch(m){if(typeof y>"u"||m.name!=="ErrnoError")throw m;return-m.errno}}function wp(e,t){try{var n=Ee.getStreamFromFD(e);return Ee.doStat(y.stat,n.path,t)}catch(o){if(typeof y>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function Er(e,t){return t+2097152>>>0<4194305-!!e?(e>>>0)+t*4294967296:NaN}function Ep(e,t,n){var o=Er(t,n);try{return isNaN(o)?61:(y.ftruncate(e,o),0)}catch(s){if(typeof y>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}var st=(e,t,n)=>po(e,de,t,n);function Sp(e,t){try{if(t===0)return-28;var n=y.cwd(),o=ur(n)+1;return t<o?-68:(st(n,e,t),o)}catch(s){if(typeof y>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function Cp(e,t,n){try{var o=Ee.getStreamFromFD(e);o.getdents||(o.getdents=y.readdir(o.path));for(var s=280,d=0,p=y.llseek(o,0,1),m=Math.floor(p/s);m<o.getdents.length&&d+s<=n;){var S,x,R=o.getdents[m];if(R===".")S=o.node.id,x=4;else if(R===".."){var W=y.lookupPath(o.path,{parent:!0});S=W.node.id,x=4}else{var O=y.lookupNode(o.node,R);S=O.id,x=y.isChrdev(O.mode)?2:y.isDir(O.mode)?4:y.isLink(O.mode)?10:8}ee=[S>>>0,(j=S,+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],F[t+d>>2]=ee[0],F[t+d+4>>2]=ee[1],ee=[(m+1)*s>>>0,(j=(m+1)*s,+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],F[t+d+8>>2]=ee[0],F[t+d+12>>2]=ee[1],xe[t+d+16>>1]=280,we[t+d+18>>0]=x,st(R,t+d+19,256),d+=s,m+=1}return y.llseek(o,m*s,0),d}catch(G){if(typeof y>"u"||G.name!=="ErrnoError")throw G;return-G.errno}}function Tp(e,t,n){Ee.varargs=n;try{var o=Ee.getStreamFromFD(e);switch(t){case 21509:return o.tty?0:-59;case 21505:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tcgets){var s=o.tty.ops.ioctl_tcgets(o),d=Ee.get();F[d>>2]=s.c_iflag||0,F[d+4>>2]=s.c_oflag||0,F[d+8>>2]=s.c_cflag||0,F[d+12>>2]=s.c_lflag||0;for(var p=0;p<32;p++)we[d+p+17>>0]=s.c_cc[p]||0;return 0}return 0}case 21510:case 21511:case 21512:return o.tty?0:-59;case 21506:case 21507:case 21508:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tcsets){for(var d=Ee.get(),m=F[d>>2],S=F[d+4>>2],x=F[d+8>>2],R=F[d+12>>2],W=[],p=0;p<32;p++)W.push(we[d+p+17>>0]);return o.tty.ops.ioctl_tcsets(o.tty,t,{c_iflag:m,c_oflag:S,c_cflag:x,c_lflag:R,c_cc:W})}return 0}case 21519:{if(!o.tty)return-59;var d=Ee.get();return F[d>>2]=0,0}case 21520:return o.tty?-28:-59;case 21531:{var d=Ee.get();return y.ioctl(o,t,d)}case 21523:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tiocgwinsz){var O=o.tty.ops.ioctl_tiocgwinsz(o.tty),d=Ee.get();xe[d>>1]=O[0],xe[d+2>>1]=O[1]}return 0}case 21524:return o.tty?0:-59;case 21515:return o.tty?0:-59;default:return-28}}catch(G){if(typeof y>"u"||G.name!=="ErrnoError")throw G;return-G.errno}}function xp(e,t){try{return e=Ee.getStr(e),Ee.doStat(y.lstat,e,t)}catch(n){if(typeof y>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function kp(e,t,n){try{return t=Ee.getStr(t),t=Ee.calculateAt(e,t),t=me.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),y.mkdir(t,n,0),0}catch(o){if(typeof y>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function Ap(e,t,n,o){try{t=Ee.getStr(t);var s=o&256,d=o&4096;return o=o&-6401,t=Ee.calculateAt(e,t,d),Ee.doStat(s?y.lstat:y.stat,t,n)}catch(p){if(typeof y>"u"||p.name!=="ErrnoError")throw p;return-p.errno}}function Rp(e,t,n,o){Ee.varargs=o;try{t=Ee.getStr(t),t=Ee.calculateAt(e,t);var s=o?Ee.get():0;return y.open(t,n,s).fd}catch(d){if(typeof y>"u"||d.name!=="ErrnoError")throw d;return-d.errno}}function Lp(e,t,n,o){try{if(t=Ee.getStr(t),t=Ee.calculateAt(e,t),o<=0)return-28;var s=y.readlink(t),d=Math.min(o,ur(s)),p=we[n+d];return st(s,n,o+1),we[n+d]=p,d}catch(m){if(typeof y>"u"||m.name!=="ErrnoError")throw m;return-m.errno}}function Fp(e,t,n,o){try{return t=Ee.getStr(t),o=Ee.getStr(o),t=Ee.calculateAt(e,t),o=Ee.calculateAt(n,o),y.rename(t,o),0}catch(s){if(typeof y>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function Pp(e,t){try{return e=Ee.getStr(e),Ee.doStat(y.stat,e,t)}catch(n){if(typeof y>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Ip(e,t){try{return e=Ee.getStr(e),t=Ee.getStr(t),y.symlink(e,t),0}catch(n){if(typeof y>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Dp(e,t,n){try{return t=Ee.getStr(t),t=Ee.calculateAt(e,t),n===0?y.unlink(t):n===512?y.rmdir(t):Qe("Invalid flags passed to unlinkat"),0}catch(o){if(typeof y>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function Mp(e,t,n,o,s){}function Rn(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}function jp(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Cl=e}var Cl=void 0;function rt(e){for(var t="",n=e;de[n];)t+=Cl[de[n++]];return t}var Sr={},fr={},Ln={},Cr=void 0;function Fe(e){throw new Cr(e)}var Tl=void 0;function Fn(e){throw new Tl(e)}function Ft(e,t,n){e.forEach(function(m){Ln[m]=t});function o(m){var S=n(m);S.length!==e.length&&Fn("Mismatched type converter count");for(var x=0;x<e.length;++x)Bt(e[x],S[x])}var s=new Array(t.length),d=[],p=0;t.forEach((m,S)=>{fr.hasOwnProperty(m)?s[S]=fr[m]:(d.push(m),Sr.hasOwnProperty(m)||(Sr[m]=[]),Sr[m].push(()=>{s[S]=fr[m],++p,p===d.length&&o(s)}))}),d.length===0&&o(s)}function Op(e,t,n={}){var o=t.name;if(e||Fe(`type "${o}" must have a positive integer typeid pointer`),fr.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;Fe(`Cannot register type '${o}' twice`)}if(fr[e]=t,delete Ln[e],Sr.hasOwnProperty(e)){var s=Sr[e];delete Sr[e],s.forEach(d=>d())}}function Bt(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Op(e,t,n)}function Np(e,t,n,o,s){var d=Rn(n);t=rt(t),Bt(e,{name:t,fromWireType:function(p){return!!p},toWireType:function(p,m){return m?o:s},argPackAdvance:8,readValueFromPointer:function(p){var m;if(n===1)m=we;else if(n===2)m=xe;else if(n===4)m=F;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(m[p>>d])},destructorFunction:null})}function Bp(e){if(!(this instanceof Qt)||!(e instanceof Qt))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,o=e.$$.ptrType.registeredClass,s=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;o.baseClass;)s=o.upcast(s),o=o.baseClass;return t===o&&n===s}function Up(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function yo(e){function t(n){return n.$$.ptrType.registeredClass.name}Fe(t(e)+" instance already deleted")}var _o=!1;function xl(e){}function Wp(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function kl(e){e.count.value-=1;var t=e.count.value===0;t&&Wp(e)}function Al(e,t,n){if(t===n)return e;if(n.baseClass===void 0)return null;var o=Al(e,t,n.baseClass);return o===null?null:n.downcast(o)}var Rl={};function zp(){return Object.keys(zr).length}function $p(){var e=[];for(var t in zr)zr.hasOwnProperty(t)&&e.push(zr[t]);return e}var Ur=[];function vo(){for(;Ur.length;){var e=Ur.pop();e.$$.deleteScheduled=!1,e.delete()}}var Wr=void 0;function Gp(e){Wr=e,Ur.length&&Wr&&Wr(vo)}function Vp(){i.getInheritedInstanceCount=zp,i.getLiveInheritedInstances=$p,i.flushPendingDeletes=vo,i.setDelayFunction=Gp}var zr={};function Yp(e,t){for(t===void 0&&Fe("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function Kp(e,t){return t=Yp(e,t),zr[t]}function Pn(e,t){(!t.ptrType||!t.ptr)&&Fn("makeClassHandle requires ptr and ptrType");var n=!!t.smartPtrType,o=!!t.smartPtr;return n!==o&&Fn("Both smartPtrType and smartPtr must be specified"),t.count={value:1},$r(Object.create(e,{$$:{value:t}}))}function Xp(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Kp(this.registeredClass,t);if(n!==void 0){if(n.$$.count.value===0)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var o=n.clone();return this.destructor(e),o}function s(){return this.isSmartPointer?Pn(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Pn(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var d=this.registeredClass.getActualType(t),p=Rl[d];if(!p)return s.call(this);var m;this.isConst?m=p.constPointerType:m=p.pointerType;var S=Al(t,this.registeredClass,m.registeredClass);return S===null?s.call(this):this.isSmartPointer?Pn(m.registeredClass.instancePrototype,{ptrType:m,ptr:S,smartPtrType:this,smartPtr:e}):Pn(m.registeredClass.instancePrototype,{ptrType:m,ptr:S})}var $r=function(e){return typeof FinalizationRegistry>"u"?($r=t=>t,e):(_o=new FinalizationRegistry(t=>{kl(t.$$)}),$r=t=>{var n=t.$$,o=!!n.smartPtr;if(o){var s={$$:n};_o.register(t,s,t)}return t},xl=t=>_o.unregister(t),$r(e))};function Hp(){if(this.$$.ptr||yo(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=$r(Object.create(Object.getPrototypeOf(this),{$$:{value:Up(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function qp(){this.$$.ptr||yo(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Fe("Object already scheduled for deletion"),xl(this),kl(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Jp(){return!this.$$.ptr}function Qp(){return this.$$.ptr||yo(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Fe("Object already scheduled for deletion"),Ur.push(this),Ur.length===1&&Wr&&Wr(vo),this.$$.deleteScheduled=!0,this}function Zp(){Qt.prototype.isAliasOf=Bp,Qt.prototype.clone=Hp,Qt.prototype.delete=qp,Qt.prototype.isDeleted=Jp,Qt.prototype.deleteLater=Qp}function Qt(){}var em=48,tm=57;function In(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=em&&t<=tm?`_${e}`:e}function Dn(e,t){return e=In(e),{[e]:function(){return t.apply(this,arguments)}}[e]}function wo(e,t,n){if(e[t].overloadTable===void 0){var o=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||Fe(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[o.argCount]=o}}function Eo(e,t,n){i.hasOwnProperty(e)?((n===void 0||i[e].overloadTable!==void 0&&i[e].overloadTable[n]!==void 0)&&Fe(`Cannot register public name '${e}' twice`),wo(i,e,e),i.hasOwnProperty(n)&&Fe(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),i[e].overloadTable[n]=t):(i[e]=t,n!==void 0&&(i[e].numArguments=n))}function rm(e,t,n,o,s,d,p,m){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=o,this.baseClass=s,this.getActualType=d,this.upcast=p,this.downcast=m,this.pureVirtualFunctions=[]}function Mn(e,t,n){for(;t!==n;)t.upcast||Fe(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e}function nm(e,t){if(t===null)return this.isReference&&Fe(`null is not a valid ${this.name}`),0;t.$$||Fe(`Cannot pass "${xo(t)}" as a ${this.name}`),t.$$.ptr||Fe(`Cannot pass deleted object as a pointer of type ${this.name}`);var n=t.$$.ptrType.registeredClass,o=Mn(t.$$.ptr,n,this.registeredClass);return o}function im(e,t){var n;if(t===null)return this.isReference&&Fe(`null is not a valid ${this.name}`),this.isSmartPointer?(n=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,n),n):0;t.$$||Fe(`Cannot pass "${xo(t)}" as a ${this.name}`),t.$$.ptr||Fe(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&Fe(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var o=t.$$.ptrType.registeredClass;if(n=Mn(t.$$.ptr,o,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&Fe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:Fe(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var s=t.clone();n=this.rawShare(n,Ye.toHandle(function(){s.delete()})),e!==null&&e.push(this.rawDestructor,n)}break;default:Fe("Unsupporting sharing policy")}return n}function om(e,t){if(t===null)return this.isReference&&Fe(`null is not a valid ${this.name}`),0;t.$$||Fe(`Cannot pass "${xo(t)}" as a ${this.name}`),t.$$.ptr||Fe(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&Fe(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass,o=Mn(t.$$.ptr,n,this.registeredClass);return o}function jn(e){return this.fromWireType(F[e>>2])}function am(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function sm(e){this.rawDestructor&&this.rawDestructor(e)}function lm(e){e!==null&&e.delete()}function um(){Ut.prototype.getPointee=am,Ut.prototype.destructor=sm,Ut.prototype.argPackAdvance=8,Ut.prototype.readValueFromPointer=jn,Ut.prototype.deleteObject=lm,Ut.prototype.fromWireType=Xp}function Ut(e,t,n,o,s,d,p,m,S,x,R){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=o,this.isSmartPointer=s,this.pointeeType=d,this.sharingPolicy=p,this.rawGetPointee=m,this.rawConstructor=S,this.rawShare=x,this.rawDestructor=R,!s&&t.baseClass===void 0?o?(this.toWireType=nm,this.destructorFunction=null):(this.toWireType=om,this.destructorFunction=null):this.toWireType=im}function Ll(e,t,n){i.hasOwnProperty(e)||Fn("Replacing nonexistant public symbol"),i[e].overloadTable!==void 0&&n!==void 0?i[e].overloadTable[n]=t:(i[e]=t,i[e].argCount=n)}var cm=(e,t,n)=>{var o=i["dynCall_"+e];return n&&n.length?o.apply(null,[t].concat(n)):o.call(null,t)},On=[],Zt=e=>{var t=On[e];return t||(e>=On.length&&(On.length=e+1),On[e]=t=ve.get(e)),t},fm=(e,t,n)=>{if(e.includes("j"))return cm(e,t,n);var o=Zt(t).apply(null,n);return o},dm=(e,t)=>{var n=[];return function(){return n.length=0,Object.assign(n,arguments),fm(e,t,n)}};function yt(e,t){e=rt(e);function n(){return e.includes("j")?dm(e,t):Zt(t)}var o=n();return typeof o!="function"&&Fe(`unknown function pointer with signature ${e}: ${t}`),o}function hm(e,t){var n=Dn(t,function(o){this.name=t,this.message=o;var s=new Error(o).stack;s!==void 0&&(this.stack=this.toString()+`
`+s.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},n}var Fl=void 0;function Pl(e){var t=tu(e),n=rt(t);return zt(t),n}function dr(e,t){var n=[],o={};function s(d){if(!o[d]&&!fr[d]){if(Ln[d]){Ln[d].forEach(s);return}n.push(d),o[d]=!0}}throw t.forEach(s),new Fl(`${e}: `+n.map(Pl).join([", "]))}function pm(e,t,n,o,s,d,p,m,S,x,R,W,O){R=rt(R),d=yt(s,d),m&&(m=yt(p,m)),x&&(x=yt(S,x)),O=yt(W,O);var G=In(R);Eo(G,function(){dr(`Cannot construct ${R} due to unbound types`,[o])}),Ft([e,t,n],o?[o]:[],function(ie){ie=ie[0];var ue,ce;o?(ue=ie.registeredClass,ce=ue.instancePrototype):ce=Qt.prototype;var he=Dn(G,function(){if(Object.getPrototypeOf(this)!==V)throw new Cr("Use 'new' to construct "+R);if(Z.constructor_body===void 0)throw new Cr(R+" has no accessible constructor");var lt=Z.constructor_body[arguments.length];if(lt===void 0)throw new Cr(`Tried to invoke ctor of ${R} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(Z.constructor_body).toString()}) parameters instead!`);return lt.apply(this,arguments)}),V=Object.create(ce,{constructor:{value:he}});he.prototype=V;var Z=new rm(R,he,V,O,ue,d,m,x);Z.baseClass&&(Z.baseClass.__derivedClasses===void 0&&(Z.baseClass.__derivedClasses=[]),Z.baseClass.__derivedClasses.push(Z));var be=new Ut(R,Z,!0,!1,!1),Te=new Ut(R+"*",Z,!1,!1,!1),ae=new Ut(R+" const*",Z,!1,!0,!1);return Rl[e]={pointerType:Te,constPointerType:ae},Ll(G,he),[be,Te,ae]})}function So(e){for(;e.length;){var t=e.pop(),n=e.pop();n(t)}}function Il(e,t){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var n=Dn(e.name||"unknownFunctionName",function(){});n.prototype=e.prototype;var o=new n,s=e.apply(o,t);return s instanceof Object?s:o}function Nn(e,t,n,o,s,d){var p=t.length;p<2&&Fe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var m=t[1]!==null&&n!==null,S=!1,x=1;x<t.length;++x)if(t[x]!==null&&t[x].destructorFunction===void 0){S=!0;break}for(var R=t[0].name!=="void",W="",O="",x=0;x<p-2;++x)W+=(x!==0?", ":"")+"arg"+x,O+=(x!==0?", ":"")+"arg"+x+"Wired";var G=`
        return function ${In(e)}(${W}) {
        if (arguments.length !== ${p-2}) {
          throwBindingError('function ${e} called with ${arguments.length} arguments, expected ${p-2} args!');
        }`;S&&(G+=`var destructors = [];
`);var ie=S?"destructors":"null",ue=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],ce=[Fe,o,s,So,t[0],t[1]];m&&(G+="var thisWired = classParam.toWireType("+ie+`, this);
`);for(var x=0;x<p-2;++x)G+="var arg"+x+"Wired = argType"+x+".toWireType("+ie+", arg"+x+"); // "+t[x+2].name+`
`,ue.push("argType"+x),ce.push(t[x+2]);if(m&&(O="thisWired"+(O.length>0?", ":"")+O),G+=(R||d?"var rv = ":"")+"invoker(fn"+(O.length>0?", ":"")+O+`);
`,S)G+=`runDestructors(destructors);
`;else for(var x=m?1:2;x<t.length;++x){var he=x===1?"thisWired":"arg"+(x-2)+"Wired";t[x].destructorFunction!==null&&(G+=he+"_dtor("+he+"); // "+t[x].name+`
`,ue.push(he+"_dtor"),ce.push(t[x].destructorFunction))}return R&&(G+=`var ret = retType.fromWireType(rv);
return ret;
`),G+=`}
`,ue.push(G),Il(Function,ue).apply(null,ce)}function Bn(e,t){for(var n=[],o=0;o<e;o++)n.push(Y[t+o*4>>2]);return n}function mm(e,t,n,o,s,d,p,m){var S=Bn(n,o);t=rt(t),d=yt(s,d),Ft([],[e],function(x){x=x[0];var R=`${x.name}.${t}`;function W(){dr(`Cannot call ${R} due to unbound types`,S)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var O=x.registeredClass.constructor;return O[t]===void 0?(W.argCount=n-1,O[t]=W):(wo(O,t,R),O[t].overloadTable[n-1]=W),Ft([],S,function(G){var ie=[G[0],null].concat(G.slice(1)),ue=Nn(R,ie,null,d,p,m);if(O[t].overloadTable===void 0?(ue.argCount=n-1,O[t]=ue):O[t].overloadTable[n-1]=ue,x.registeredClass.__derivedClasses)for(const ce of x.registeredClass.__derivedClasses)ce.constructor.hasOwnProperty(t)||(ce.constructor[t]=ue);return[]}),[]})}function bm(e,t,n,o,s,d){var p=Bn(t,n);s=yt(o,s),Ft([],[e],function(m){m=m[0];var S=`constructor ${m.name}`;if(m.registeredClass.constructor_body===void 0&&(m.registeredClass.constructor_body=[]),m.registeredClass.constructor_body[t-1]!==void 0)throw new Cr(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${m.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return m.registeredClass.constructor_body[t-1]=()=>{dr(`Cannot construct ${m.name} due to unbound types`,p)},Ft([],p,function(x){return x.splice(1,0,null),m.registeredClass.constructor_body[t-1]=Nn(S,x,null,s,d),[]}),[]})}function gm(e,t,n,o,s,d,p,m,S){var x=Bn(n,o);t=rt(t),d=yt(s,d),Ft([],[e],function(R){R=R[0];var W=`${R.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),m&&R.registeredClass.pureVirtualFunctions.push(t);function O(){dr(`Cannot call ${W} due to unbound types`,x)}var G=R.registeredClass.instancePrototype,ie=G[t];return ie===void 0||ie.overloadTable===void 0&&ie.className!==R.name&&ie.argCount===n-2?(O.argCount=n-2,O.className=R.name,G[t]=O):(wo(G,t,W),G[t].overloadTable[n-2]=O),Ft([],x,function(ue){var ce=Nn(W,ue,R,d,p,S);return G[t].overloadTable===void 0?(ce.argCount=n-2,G[t]=ce):G[t].overloadTable[n-2]=ce,[]}),[]})}function Dl(e,t,n){return e instanceof Object||Fe(`${n} with invalid "this": ${e}`),e instanceof t.registeredClass.constructor||Fe(`${n} incompatible with "this" of type ${e.constructor.name}`),e.$$.ptr||Fe(`cannot call emscripten binding method ${n} on deleted object`),Mn(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)}function ym(e,t,n,o,s,d,p,m,S,x){t=rt(t),s=yt(o,s),Ft([],[e],function(R){R=R[0];var W=`${R.name}.${t}`,O={get(){dr(`Cannot access ${W} due to unbound types`,[n,p])},enumerable:!0,configurable:!0};return S?O.set=()=>{dr(`Cannot access ${W} due to unbound types`,[n,p])}:O.set=G=>{Fe(W+" is a read-only property")},Object.defineProperty(R.registeredClass.instancePrototype,t,O),Ft([],S?[n,p]:[n],function(G){var ie=G[0],ue={get(){var he=Dl(this,R,W+" getter");return ie.fromWireType(s(d,he))},enumerable:!0};if(S){S=yt(m,S);var ce=G[1];ue.set=function(he){var V=Dl(this,R,W+" setter"),Z=[];S(x,V,ce.toWireType(Z,he)),So(Z)}}return Object.defineProperty(R.registeredClass.instancePrototype,t,ue),[]}),[]})}function _m(){Object.assign(Co.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function Co(){this.allocated=[void 0],this.freelist=[]}var At=new Co;function To(e){e>=At.reserved&&--At.get(e).refcount===0&&At.free(e)}function vm(){for(var e=0,t=At.reserved;t<At.allocated.length;++t)At.allocated[t]!==void 0&&++e;return e}function wm(){At.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),At.reserved=At.allocated.length,i.count_emval_handles=vm}var Ye={toValue:e=>(e||Fe("Cannot use deleted val. handle = "+e),At.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return At.allocate({refcount:1,value:e})}}};function Em(e,t){t=rt(t),Bt(e,{name:t,fromWireType:function(n){var o=Ye.toValue(n);return To(n),o},toWireType:function(n,o){return Ye.toHandle(o)},argPackAdvance:8,readValueFromPointer:jn,destructorFunction:null})}function Sm(e,t,n){switch(t){case 0:return function(o){var s=n?we:de;return this.fromWireType(s[o])};case 1:return function(o){var s=n?xe:ye;return this.fromWireType(s[o>>1])};case 2:return function(o){var s=n?F:Y;return this.fromWireType(s[o>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Cm(e,t,n,o){var s=Rn(n);t=rt(t);function d(){}d.values={},Bt(e,{name:t,constructor:d,fromWireType:function(p){return this.constructor.values[p]},toWireType:function(p,m){return m.value},argPackAdvance:8,readValueFromPointer:Sm(t,s,o),destructorFunction:null}),Eo(t,d)}function Un(e,t){var n=fr[e];return n===void 0&&Fe(t+" has unknown type "+Pl(e)),n}function Tm(e,t,n){var o=Un(e,"enum");t=rt(t);var s=o.constructor,d=Object.create(o.constructor.prototype,{value:{value:n},constructor:{value:Dn(`${o.name}_${t}`,function(){})}});s.values[n]=d,s[t]=d}function xo(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function xm(e,t){switch(t){case 2:return function(n){return this.fromWireType(De[n>>2])};case 3:return function(n){return this.fromWireType(Pe[n>>3])};default:throw new TypeError("Unknown float type: "+e)}}function km(e,t,n){var o=Rn(n);t=rt(t),Bt(e,{name:t,fromWireType:function(s){return s},toWireType:function(s,d){return d},argPackAdvance:8,readValueFromPointer:xm(t,o),destructorFunction:null})}function Am(e,t,n,o,s,d,p){var m=Bn(t,n);e=rt(e),s=yt(o,s),Eo(e,function(){dr(`Cannot call ${e} due to unbound types`,m)},t-1),Ft([],m,function(S){var x=[S[0],null].concat(S.slice(1));return Ll(e,Nn(e,x,null,s,d,p),t-1),[]})}function Rm(e,t,n){switch(t){case 0:return n?function(o){return we[o]}:function(o){return de[o]};case 1:return n?function(o){return xe[o>>1]}:function(o){return ye[o>>1]};case 2:return n?function(o){return F[o>>2]}:function(o){return Y[o>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Lm(e,t,n,o,s){t=rt(t);var d=Rn(n),p=R=>R;if(o===0){var m=32-8*n;p=R=>R<<m>>>m}var S=t.includes("unsigned"),x;S?x=function(R,W){return W>>>0}:x=function(R,W){return W},Bt(e,{name:t,fromWireType:p,toWireType:x,argPackAdvance:8,readValueFromPointer:Rm(t,d,o!==0),destructorFunction:null})}function Fm(e,t,n){var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],s=o[t];function d(p){p=p>>2;var m=Y,S=m[p],x=m[p+1];return new s(m.buffer,x,S)}n=rt(n),Bt(e,{name:n,fromWireType:d,argPackAdvance:8,readValueFromPointer:d},{ignoreDuplicateRegistrations:!0})}function Pm(e,t,n,o,s,d,p,m,S,x,R,W){n=rt(n),d=yt(s,d),m=yt(p,m),x=yt(S,x),W=yt(R,W),Ft([e],[t],function(O){O=O[0];var G=new Ut(n,O.registeredClass,!1,!1,!0,O,o,d,m,x,W);return[G]})}function Im(e,t){t=rt(t);var n=t==="std::string";Bt(e,{name:t,fromWireType:function(o){var s=Y[o>>2],d=o+4,p;if(n)for(var m=d,S=0;S<=s;++S){var x=d+S;if(S==s||de[x]==0){var R=x-m,W=Je(m,R);p===void 0?p=W:(p+=String.fromCharCode(0),p+=W),m=x+1}}else{for(var O=new Array(s),S=0;S<s;++S)O[S]=String.fromCharCode(de[d+S]);p=O.join("")}return zt(o),p},toWireType:function(o,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var d,p=typeof s=="string";p||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||Fe("Cannot pass non-string to std::string"),n&&p?d=ur(s):d=s.length;var m=Wt(4+d+1),S=m+4;if(Y[m>>2]=d,n&&p)st(s,S,d+1);else if(p)for(var x=0;x<d;++x){var R=s.charCodeAt(x);R>255&&(zt(S),Fe("String has UTF-16 code units that do not fit in 8 bits")),de[S+x]=R}else for(var x=0;x<d;++x)de[S+x]=s[x];return o!==null&&o.push(zt,m),m},argPackAdvance:8,readValueFromPointer:jn,destructorFunction:function(o){zt(o)}})}var Ml=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Dm=(e,t)=>{for(var n=e,o=n>>1,s=o+t/2;!(o>=s)&&ye[o];)++o;if(n=o<<1,n-e>32&&Ml)return Ml.decode(de.subarray(e,n));for(var d="",p=0;!(p>=t/2);++p){var m=xe[e+p*2>>1];if(m==0)break;d+=String.fromCharCode(m)}return d},Mm=(e,t,n)=>{if(n===void 0&&(n=2147483647),n<2)return 0;n-=2;for(var o=t,s=n<e.length*2?n/2:e.length,d=0;d<s;++d){var p=e.charCodeAt(d);xe[t>>1]=p,t+=2}return xe[t>>1]=0,t-o},jm=e=>e.length*2,Om=(e,t)=>{for(var n=0,o="";!(n>=t/4);){var s=F[e+n*4>>2];if(s==0)break;if(++n,s>=65536){var d=s-65536;o+=String.fromCharCode(55296|d>>10,56320|d&1023)}else o+=String.fromCharCode(s)}return o},Nm=(e,t,n)=>{if(n===void 0&&(n=2147483647),n<4)return 0;for(var o=t,s=o+n-4,d=0;d<e.length;++d){var p=e.charCodeAt(d);if(p>=55296&&p<=57343){var m=e.charCodeAt(++d);p=65536+((p&1023)<<10)|m&1023}if(F[t>>2]=p,t+=4,t+4>s)break}return F[t>>2]=0,t-o},Bm=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);o>=55296&&o<=57343&&++n,t+=4}return t},Um=function(e,t,n){n=rt(n);var o,s,d,p,m;t===2?(o=Dm,s=Mm,p=jm,d=()=>ye,m=1):t===4&&(o=Om,s=Nm,p=Bm,d=()=>Y,m=2),Bt(e,{name:n,fromWireType:function(S){for(var x=Y[S>>2],R=d(),W,O=S+4,G=0;G<=x;++G){var ie=S+4+G*t;if(G==x||R[ie>>m]==0){var ue=ie-O,ce=o(O,ue);W===void 0?W=ce:(W+=String.fromCharCode(0),W+=ce),O=ie+t}}return zt(S),W},toWireType:function(S,x){typeof x!="string"&&Fe(`Cannot pass non-string to C++ string type ${n}`);var R=p(x),W=Wt(4+R+t);return Y[W>>2]=R>>m,s(x,W+4,R+t),S!==null&&S.push(zt,W),W},argPackAdvance:8,readValueFromPointer:jn,destructorFunction:function(S){zt(S)}})};function Wm(e,t){t=rt(t),Bt(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(n,o){}})}function zm(e){if(it.xhrs.has(e)){var t=it.xhrs.get(e);it.xhrs.free(e),t.readyState>0&&t.readyState<4&&t.abort()}}var $m=!0,Gm=()=>$m;function Vm(e,t,n){e=Ye.toValue(e),t=Un(t,"emval::as");var o=[],s=Ye.toHandle(o);return Y[n>>2]=s,t.toWireType(o,e)}function jl(e,t){for(var n=new Array(e),o=0;o<e;++o)n[o]=Un(Y[t+o*4>>2],"parameter "+o);return n}function Ym(e,t,n,o){e=Ye.toValue(e);for(var s=jl(t,n),d=new Array(t),p=0;p<t;++p){var m=s[p];d[p]=m.readValueFromPointer(o),o+=m.argPackAdvance}var S=e.apply(void 0,d);return Ye.toHandle(S)}function Km(e){var t=[];return Y[e>>2]=Ye.toHandle(t),t}var Xm={};function Wn(e){var t=Xm[e];return t===void 0?rt(e):t}var zn=[];function Hm(e,t,n,o,s){return e=zn[e],t=Ye.toValue(t),n=Wn(n),e(t,n,Km(o),s)}function qm(e,t,n,o){e=zn[e],t=Ye.toValue(t),n=Wn(n),e(t,n,null,o)}function Jm(e){var t=zn.length;return zn.push(e),t}var Ol=[];function Qm(e,t){var n=jl(e,t),o=n[0],s=o.name+"_$"+n.slice(1).map(function(ie){return ie.name}).join("_")+"$",d=Ol[s];if(d!==void 0)return d;for(var p=["retType"],m=[o],S="",x=0;x<e-1;++x)S+=(x!==0?", ":"")+"arg"+x,p.push("argType"+x),m.push(n[1+x]);for(var R=In("methodCaller_"+s),W="return function "+R+`(handle, name, destructors, args) {
`,O=0,x=0;x<e-1;++x)W+="    var arg"+x+" = argType"+x+".readValueFromPointer(args"+(O?"+"+O:"")+`);
`,O+=n[x+1].argPackAdvance;W+="    var rv = handle[name]("+S+`);
`;for(var x=0;x<e-1;++x)n[x+1].deleteObject&&(W+="    argType"+x+".deleteObject(arg"+x+`);
`);o.isVoid||(W+=`    return retType.toWireType(destructors, rv);
`),W+=`};
`,p.push(W);var G=Il(Function,p).apply(null,m);return d=Jm(G),Ol[s]=d,d}function Zm(e){return e=Wn(e),Ye.toHandle(i[e])}function e0(e,t){return e=Ye.toValue(e),t=Ye.toValue(t),Ye.toHandle(e[t])}function t0(e){e>4&&(At.get(e).refcount+=1)}function r0(e){return e=Ye.toValue(e),typeof e=="number"}function n0(e){return Ye.toHandle(Wn(e))}function i0(e){var t=Ye.toValue(e);So(t),To(e)}function o0(e,t,n){e=Ye.toValue(e),t=Ye.toValue(t),n=Ye.toValue(n),e[t]=n}function a0(e,t){e=Un(e,"_emval_take_value");var n=e.readValueFromPointer(t);return Ye.toHandle(n)}function s0(e,t,n){var o=Er(e,t),s=new Date(o*1e3);F[n>>2]=s.getUTCSeconds(),F[n+4>>2]=s.getUTCMinutes(),F[n+8>>2]=s.getUTCHours(),F[n+12>>2]=s.getUTCDate(),F[n+16>>2]=s.getUTCMonth(),F[n+20>>2]=s.getUTCFullYear()-1900,F[n+24>>2]=s.getUTCDay();var d=Date.UTC(s.getUTCFullYear(),0,1,0,0,0,0),p=(s.getTime()-d)/(1e3*60*60*24)|0;F[n+28>>2]=p}var Gr=e=>e%4===0&&(e%100!==0||e%400===0),l0=[0,31,60,91,121,152,182,213,244,274,305,335],u0=[0,31,59,90,120,151,181,212,243,273,304,334],Nl=e=>{var t=Gr(e.getFullYear()),n=t?l0:u0,o=n[e.getMonth()]+e.getDate()-1;return o};function c0(e,t,n){var o=Er(e,t),s=new Date(o*1e3);F[n>>2]=s.getSeconds(),F[n+4>>2]=s.getMinutes(),F[n+8>>2]=s.getHours(),F[n+12>>2]=s.getDate(),F[n+16>>2]=s.getMonth(),F[n+20>>2]=s.getFullYear()-1900,F[n+24>>2]=s.getDay();var d=Nl(s)|0;F[n+28>>2]=d,F[n+36>>2]=-(s.getTimezoneOffset()*60);var p=new Date(s.getFullYear(),0,1),m=new Date(s.getFullYear(),6,1).getTimezoneOffset(),S=p.getTimezoneOffset(),x=(m!=S&&s.getTimezoneOffset()==Math.min(S,m))|0;F[n+32>>2]=x}var f0=function(e){var t=(()=>{var n=new Date(F[e+20>>2]+1900,F[e+16>>2],F[e+12>>2],F[e+8>>2],F[e+4>>2],F[e>>2],0),o=F[e+32>>2],s=n.getTimezoneOffset(),d=new Date(n.getFullYear(),0,1),p=new Date(n.getFullYear(),6,1).getTimezoneOffset(),m=d.getTimezoneOffset(),S=Math.min(m,p);if(o<0)F[e+32>>2]=+(p!=m&&S==s);else if(o>0!=(S==s)){var x=Math.max(m,p),R=o>0?S:x;n.setTime(n.getTime()+(R-s)*6e4)}F[e+24>>2]=n.getDay();var W=Nl(n)|0;return F[e+28>>2]=W,F[e>>2]=n.getSeconds(),F[e+4>>2]=n.getMinutes(),F[e+8>>2]=n.getHours(),F[e+12>>2]=n.getDate(),F[e+16>>2]=n.getMonth(),F[e+20>>2]=n.getYear(),n.getTime()/1e3})();return iu((j=t,+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)),t>>>0};function d0(e,t,n,o,s,d,p,m){var S=Er(s,d);try{if(isNaN(S))return 61;var x=Ee.getStreamFromFD(o),R=y.mmap(x,e,S,t,n),W=R.ptr;return F[p>>2]=R.allocated,Y[m>>2]=W,0}catch(O){if(typeof y>"u"||O.name!=="ErrnoError")throw O;return-O.errno}}function h0(e,t,n,o,s,d,p){var m=Er(d,p);try{if(isNaN(m))return 61;var S=Ee.getStreamFromFD(s);n&2&&Ee.doMsync(e,S,t,o,m),y.munmap(S)}catch(x){if(typeof y>"u"||x.name!=="ErrnoError")throw x;return-x.errno}}var Tr=e=>{var t=ur(e)+1,n=Wt(t);return n&&st(e,n,t),n},p0=(e,t,n)=>{var o=new Date().getFullYear(),s=new Date(o,0,1),d=new Date(o,6,1),p=s.getTimezoneOffset(),m=d.getTimezoneOffset(),S=Math.max(p,m);Y[e>>2]=S*60,F[t>>2]=+(p!=m);function x(ie){var ue=ie.toTimeString().match(/\(([A-Za-z ]+)\)$/);return ue?ue[1]:"GMT"}var R=x(s),W=x(d),O=Tr(R),G=Tr(W);m<p?(Y[n>>2]=O,Y[n+4>>2]=G):(Y[n>>2]=G,Y[n+4>>2]=O)},m0=()=>{Qe("")};function ko(e,t){if(z.mainLoop.timingMode=e,z.mainLoop.timingValue=t,!z.mainLoop.func)return 1;if(z.mainLoop.running||(z.mainLoop.running=!0),e==0)z.mainLoop.scheduler=function(){var d=Math.max(0,z.mainLoop.tickStartTime+t-$n())|0;setTimeout(z.mainLoop.runner,d)},z.mainLoop.method="timeout";else if(e==1)z.mainLoop.scheduler=function(){z.requestAnimationFrame(z.mainLoop.runner)},z.mainLoop.method="rAF";else if(e==2){if(typeof setImmediate>"u"){var n=[],o="setimmediate",s=d=>{(d.data===o||d.data.target===o)&&(d.stopPropagation(),n.shift()())};addEventListener("message",s,!0),setImmediate=function(d){n.push(d),postMessage(o,"*")}}z.mainLoop.scheduler=function(){setImmediate(z.mainLoop.runner)},z.mainLoop.method="immediate"}return 0}var $n;$n=()=>performance.now();function b0(e,t,n,o,s){pe(!z.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),z.mainLoop.func=e,z.mainLoop.arg=o;var d=z.mainLoop.currentlyRunningMainloop;function p(){return!(d<z.mainLoop.currentlyRunningMainloop)}if(z.mainLoop.running=!1,z.mainLoop.runner=function(){if(!Le){if(z.mainLoop.queue.length>0){var m=Date.now(),S=z.mainLoop.queue.shift();if(S.func(S.arg),z.mainLoop.remainingBlockers){var x=z.mainLoop.remainingBlockers,R=x%1==0?x-1:Math.floor(x);S.counted?z.mainLoop.remainingBlockers=R:(R=R+.5,z.mainLoop.remainingBlockers=(8*x+R)/9)}if(X('main loop blocker "'+S.name+'" took '+(Date.now()-m)+" ms"),z.mainLoop.updateStatus(),!p())return;setTimeout(z.mainLoop.runner,0);return}if(p()){if(z.mainLoop.currentFrameNumber=z.mainLoop.currentFrameNumber+1|0,z.mainLoop.timingMode==1&&z.mainLoop.timingValue>1&&z.mainLoop.currentFrameNumber%z.mainLoop.timingValue!=0){z.mainLoop.scheduler();return}else z.mainLoop.timingMode==0&&(z.mainLoop.tickStartTime=$n());z.mainLoop.runIter(e),p()&&(typeof SDL=="object"&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),z.mainLoop.scheduler())}}},s||(t&&t>0?ko(0,1e3/t):ko(1,1),z.mainLoop.scheduler()),n)throw"unwind"}var Bl=e=>{if(e instanceof M||e=="unwind")return We;_(1,e)},g0=e=>{We=e,oe()||(i.onExit&&i.onExit(e),Le=!0),_(e,new M(e))},y0=(e,t)=>{We=e,g0(e)},Ul=y0,_0=()=>{if(!oe())try{Ul(We)}catch(e){Bl(e)}},Gn=e=>{if(!Le)try{e(),_0()}catch(t){Bl(t)}},Wl=(e,t)=>setTimeout(()=>{Gn(e)},t),z={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){z.mainLoop.scheduler=null,z.mainLoop.currentlyRunningMainloop++},resume:function(){z.mainLoop.currentlyRunningMainloop++;var e=z.mainLoop.timingMode,t=z.mainLoop.timingValue,n=z.mainLoop.func;z.mainLoop.func=null,b0(n,0,!1,z.mainLoop.arg,!0),ko(e,t),z.mainLoop.scheduler()},updateStatus:function(){if(i.setStatus){var e=i.statusMessage||"Please wait...",t=z.mainLoop.remainingBlockers,n=z.mainLoop.expectedBlockers;t?t<n?i.setStatus(e+" ("+(n-t)+"/"+n+")"):i.setStatus(e):i.setStatus("")}},runIter:function(e){if(!Le){if(i.preMainLoop){var t=i.preMainLoop();if(t===!1)return}Gn(e),i.postMainLoop&&i.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(z.initted)return;z.initted=!0;var e={};e.canHandle=function(s){return!i.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(s)},e.handle=function(s,d,p,m){var S=new Blob([s],{type:z.getMimetype(d)});S.size!==s.length&&(S=new Blob([new Uint8Array(s).buffer],{type:z.getMimetype(d)}));var x=URL.createObjectURL(S),R=new Image;R.onload=()=>{pe(R.complete,"Image "+d+" could not be decoded");var W=document.createElement("canvas");W.width=R.width,W.height=R.height;var O=W.getContext("2d");O.drawImage(R,0,0),URL.revokeObjectURL(x),p&&p(s)},R.onerror=W=>{X("Image "+x+" could not be decoded"),m&&m()},R.src=x},bo.push(e);var t={};t.canHandle=function(s){return!i.noAudioDecoding&&s.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},t.handle=function(s,d,p,m){var S=!1;function x(G){S||(S=!0,p&&p(s))}var R=new Blob([s],{type:z.getMimetype(d)}),W=URL.createObjectURL(R),O=new Audio;O.addEventListener("canplaythrough",()=>x(),!1),O.onerror=function(G){if(S)return;Se("warning: browser could not fully decode audio "+d+", trying slower base64 approach");function ie(ue){for(var ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",he="=",V="",Z=0,be=0,Te=0;Te<ue.length;Te++)for(Z=Z<<8|ue[Te],be+=8;be>=6;){var ae=Z>>be-6&63;be-=6,V+=ce[ae]}return be==2?(V+=ce[(Z&3)<<4],V+=he+he):be==4&&(V+=ce[(Z&15)<<2],V+=he),V}O.src="data:audio/x-"+d.substr(-3)+";base64,"+ie(s),x()},O.src=W,Wl(()=>{x()},1e4)},bo.push(t);function n(){z.pointerLock=document.pointerLockElement===i.canvas||document.mozPointerLockElement===i.canvas||document.webkitPointerLockElement===i.canvas||document.msPointerLockElement===i.canvas}var o=i.canvas;o&&(o.requestPointerLock=o.requestPointerLock||o.mozRequestPointerLock||o.webkitRequestPointerLock||o.msRequestPointerLock||(()=>{}),o.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||(()=>{}),o.exitPointerLock=o.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",n,!1),document.addEventListener("mozpointerlockchange",n,!1),document.addEventListener("webkitpointerlockchange",n,!1),document.addEventListener("mspointerlockchange",n,!1),i.elementPointerLock&&o.addEventListener("click",s=>{!z.pointerLock&&i.canvas.requestPointerLock&&(i.canvas.requestPointerLock(),s.preventDefault())},!1))},createContext:function(e,t,n,o){if(t&&i.ctx&&e==i.canvas)return i.ctx;var s,d;if(t){var p={antialias:!1,alpha:!1,majorVersion:typeof WebGL2RenderingContext<"u"?2:1};if(o)for(var m in o)p[m]=o[m];typeof Q<"u"&&(d=Q.createContext(e,p),d&&(s=Q.getContext(d).GLctx))}else s=e.getContext("2d");return s?(n&&(t||pe(typeof K>"u","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),i.ctx=s,t&&Q.makeContextCurrent(d),i.useWebGL=t,z.moduleContextCreatedCallbacks.forEach(S=>S()),z.init()),s):null},destroyContext:function(e,t,n){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(e,t){z.lockPointer=e,z.resizeCanvas=t,typeof z.lockPointer>"u"&&(z.lockPointer=!0),typeof z.resizeCanvas>"u"&&(z.resizeCanvas=!1);var n=i.canvas;function o(){z.isFullscreen=!1;var d=n.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===d?(n.exitFullscreen=z.exitFullscreen,z.lockPointer&&n.requestPointerLock(),z.isFullscreen=!0,z.resizeCanvas?z.setFullscreenCanvasSize():z.updateCanvasDimensions(n)):(d.parentNode.insertBefore(n,d),d.parentNode.removeChild(d),z.resizeCanvas?z.setWindowedCanvasSize():z.updateCanvasDimensions(n)),i.onFullScreen&&i.onFullScreen(z.isFullscreen),i.onFullscreen&&i.onFullscreen(z.isFullscreen)}z.fullscreenHandlersInstalled||(z.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",o,!1),document.addEventListener("mozfullscreenchange",o,!1),document.addEventListener("webkitfullscreenchange",o,!1),document.addEventListener("MSFullscreenChange",o,!1));var s=document.createElement("div");n.parentNode.insertBefore(s,n),s.appendChild(n),s.requestFullscreen=s.requestFullscreen||s.mozRequestFullScreen||s.msRequestFullscreen||(s.webkitRequestFullscreen?()=>s.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):null)||(s.webkitRequestFullScreen?()=>s.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):null),s.requestFullscreen()},exitFullscreen:function(){if(!z.isFullscreen)return!1;var e=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||(()=>{});return e.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(e){var t=Date.now();if(z.nextRAF===0)z.nextRAF=t+1e3/60;else for(;t+2>=z.nextRAF;)z.nextRAF+=1e3/60;var n=Math.max(z.nextRAF-t,0);setTimeout(e,n)},requestAnimationFrame:function(e){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(e);return}var t=z.fakeRequestAnimationFrame;t(e)},safeSetTimeout:function(e,t){return Wl(e,t)},safeRequestAnimationFrame:function(e){return z.requestAnimationFrame(()=>{Gn(e)})},getMimetype:function(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia:function(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:function(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY:function(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta:function(e){var t=0;switch(e.type){case"DOMMouseScroll":t=e.detail/3;break;case"mousewheel":t=e.wheelDelta/120;break;case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(e){if(z.pointerLock)e.type!="mousemove"&&"mozMovementX"in e?z.mouseMovementX=z.mouseMovementY=0:(z.mouseMovementX=z.getMovementX(e),z.mouseMovementY=z.getMovementY(e)),typeof SDL<"u"?(z.mouseX=SDL.mouseX+z.mouseMovementX,z.mouseY=SDL.mouseY+z.mouseMovementY):(z.mouseX+=z.mouseMovementX,z.mouseY+=z.mouseMovementY);else{var t=i.canvas.getBoundingClientRect(),n=i.canvas.width,o=i.canvas.height,s=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,d=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset;if(e.type==="touchstart"||e.type==="touchend"||e.type==="touchmove"){var p=e.touch;if(p===void 0)return;var m=p.pageX-(s+t.left),S=p.pageY-(d+t.top);m=m*(n/t.width),S=S*(o/t.height);var x={x:m,y:S};if(e.type==="touchstart")z.lastTouches[p.identifier]=x,z.touches[p.identifier]=x;else if(e.type==="touchend"||e.type==="touchmove"){var R=z.touches[p.identifier];R||(R=x),z.lastTouches[p.identifier]=R,z.touches[p.identifier]=x}return}var W=e.pageX-(s+t.left),O=e.pageY-(d+t.top);W=W*(n/t.width),O=O*(o/t.height),z.mouseMovementX=W-z.mouseX,z.mouseMovementY=O-z.mouseY,z.mouseX=W,z.mouseY=O}},resizeListeners:[],updateResizeListeners:function(){var e=i.canvas;z.resizeListeners.forEach(t=>t(e.width,e.height))},setCanvasSize:function(e,t,n){var o=i.canvas;z.updateCanvasDimensions(o,e,t),n||z.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof SDL<"u"){var e=Y[SDL.screen>>2];e=e|8388608,F[SDL.screen>>2]=e}z.updateCanvasDimensions(i.canvas),z.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof SDL<"u"){var e=Y[SDL.screen>>2];e=e&-8388609,F[SDL.screen>>2]=e}z.updateCanvasDimensions(i.canvas),z.updateResizeListeners()},updateCanvasDimensions:function(e,t,n){t&&n?(e.widthNative=t,e.heightNative=n):(t=e.widthNative,n=e.heightNative);var o=t,s=n;if(i.forcedAspectRatio&&i.forcedAspectRatio>0&&(o/s<i.forcedAspectRatio?o=Math.round(s*i.forcedAspectRatio):s=Math.round(o/i.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&typeof screen<"u"){var d=Math.min(screen.width/o,screen.height/s);o=Math.round(o*d),s=Math.round(s*d)}z.resizeCanvas?(e.width!=o&&(e.width=o),e.height!=s&&(e.height=s),typeof e.style<"u"&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=t&&(e.width=t),e.height!=n&&(e.height=n),typeof e.style<"u"&&(o!=t||s!=n?(e.style.setProperty("width",o+"px","important"),e.style.setProperty("height",s+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}},k={QUEUE_INTERVAL:25,QUEUE_LOOKAHEAD:.1,DEVICE_NAME:"Emscripten OpenAL",CAPTURE_DEVICE_NAME:"Emscripten OpenAL capture",ALC_EXTENSIONS:{ALC_SOFT_pause_device:!0,ALC_SOFT_HRTF:!0},AL_EXTENSIONS:{AL_EXT_float32:!0,AL_SOFT_loop_points:!0,AL_SOFT_source_length:!0,AL_EXT_source_distance_model:!0,AL_SOFT_source_spatialize:!0},_alcErr:0,alcErr:0,deviceRefCounts:{},alcStringCache:{},paused:!1,stringCache:{},contexts:{},currentCtx:null,buffers:{0:{id:0,refCount:0,audioBuf:null,frequency:0,bytesPerSample:2,channels:1,length:0}},paramArray:[],_nextId:1,newId:function(){return k.freeIds.length>0?k.freeIds.pop():k._nextId++},freeIds:[],scheduleContextAudio:function(e){if(!(z.mainLoop.timingMode===1&&document.visibilityState!="visible"))for(var t in e.sources)k.scheduleSourceAudio(e.sources[t])},scheduleSourceAudio:function(e,t){if(!(z.mainLoop.timingMode===1&&document.visibilityState!="visible")&&e.state===4114){for(var n=k.updateSourceTime(e),o=e.bufStartTime,s=e.bufOffset,d=e.bufsProcessed,p=0;p<e.audioQueue.length;p++){var m=e.audioQueue[p];o=m._startTime+m._duration,s=0,d+=m._skipCount+1}t||(t=k.QUEUE_LOOKAHEAD);for(var S=n+t,x=0;o<S;){if(d>=e.bufQueue.length)if(e.looping)d%=e.bufQueue.length;else break;var R=e.bufQueue[d%e.bufQueue.length];if(R.length===0){if(x++,x===e.bufQueue.length)break}else{var m=e.context.audioCtx.createBufferSource();m.buffer=R.audioBuf,m.playbackRate.value=e.playbackRate,(R.audioBuf._loopStart||R.audioBuf._loopEnd)&&(m.loopStart=R.audioBuf._loopStart,m.loopEnd=R.audioBuf._loopEnd);var W=0;e.type===4136&&e.looping?(W=Number.POSITIVE_INFINITY,m.loop=!0,R.audioBuf._loopStart&&(m.loopStart=R.audioBuf._loopStart),R.audioBuf._loopEnd&&(m.loopEnd=R.audioBuf._loopEnd)):W=(R.audioBuf.duration-s)/e.playbackRate,m._startOffset=s,m._duration=W,m._skipCount=x,x=0,m.connect(e.gain),typeof m.start<"u"?(o=Math.max(o,e.context.audioCtx.currentTime),m.start(o,s)):typeof m.noteOn<"u"&&(o=Math.max(o,e.context.audioCtx.currentTime),m.noteOn(o)),m._startTime=o,e.audioQueue.push(m),o+=W}s=0,d++}}},updateSourceTime:function(e){var t=e.context.audioCtx.currentTime;if(e.state!==4114)return t;isFinite(e.bufStartTime)||(e.bufStartTime=t-e.bufOffset/e.playbackRate,e.bufOffset=0);for(var n=0;e.audioQueue.length;){var o=e.audioQueue[0];if(e.bufsProcessed+=o._skipCount,n=o._startTime+o._duration,t<n)break;e.audioQueue.shift(),e.bufStartTime=n,e.bufOffset=0,e.bufsProcessed++}if(e.bufsProcessed>=e.bufQueue.length&&!e.looping)k.setSourceState(e,4116);else if(e.type===4136&&e.looping){var s=e.bufQueue[0];if(s.length===0)e.bufOffset=0;else{var d=(t-e.bufStartTime)*e.playbackRate,p=s.audioBuf._loopStart||0,m=s.audioBuf._loopEnd||s.audioBuf.duration;m<=p&&(m=s.audioBuf.duration),d<m?e.bufOffset=d:e.bufOffset=p+(d-p)%(m-p)}}else if(e.audioQueue[0])e.bufOffset=(t-e.audioQueue[0]._startTime)*e.playbackRate;else{if(e.type!==4136&&e.looping){var S=k.sourceDuration(e)/e.playbackRate;S>0&&(e.bufStartTime+=Math.floor((t-e.bufStartTime)/S)*S)}for(var x=0;x<e.bufQueue.length;x++){if(e.bufsProcessed>=e.bufQueue.length)if(e.looping)e.bufsProcessed%=e.bufQueue.length;else{k.setSourceState(e,4116);break}var s=e.bufQueue[e.bufsProcessed];if(s.length>0){if(n=e.bufStartTime+s.audioBuf.duration/e.playbackRate,t<n){e.bufOffset=(t-e.bufStartTime)*e.playbackRate;break}e.bufStartTime=n}e.bufOffset=0,e.bufsProcessed++}}return t},cancelPendingSourceAudio:function(e){k.updateSourceTime(e);for(var t=1;t<e.audioQueue.length;t++){var n=e.audioQueue[t];n.stop()}e.audioQueue.length>1&&(e.audioQueue.length=1)},stopSourceAudio:function(e){for(var t=0;t<e.audioQueue.length;t++)e.audioQueue[t].stop();e.audioQueue.length=0},setSourceState:function(e,t){t===4114?((e.state===4114||e.state==4116)&&(e.bufsProcessed=0,e.bufOffset=0),k.stopSourceAudio(e),e.state=4114,e.bufStartTime=Number.NEGATIVE_INFINITY,k.scheduleSourceAudio(e)):t===4115?e.state===4114&&(k.updateSourceTime(e),k.stopSourceAudio(e),e.state=4115):t===4116?e.state!==4113&&(e.state=4116,e.bufsProcessed=e.bufQueue.length,e.bufStartTime=Number.NEGATIVE_INFINITY,e.bufOffset=0,k.stopSourceAudio(e)):t===4113&&e.state!==4113&&(e.state=4113,e.bufsProcessed=0,e.bufStartTime=Number.NEGATIVE_INFINITY,e.bufOffset=0,k.stopSourceAudio(e))},initSourcePanner:function(e){if(e.type!==4144){for(var t=k.buffers[0],n=0;n<e.bufQueue.length;n++)if(e.bufQueue[n].id!==0){t=e.bufQueue[n];break}if(e.spatialize===1||e.spatialize===2&&t.channels===1){if(e.panner)return;e.panner=e.context.audioCtx.createPanner(),k.updateSourceGlobal(e),k.updateSourceSpace(e),e.panner.connect(e.context.gain),e.gain.disconnect(),e.gain.connect(e.panner)}else{if(!e.panner)return;e.panner.disconnect(),e.gain.disconnect(),e.gain.connect(e.context.gain),e.panner=null}}},updateContextGlobal:function(e){for(var t in e.sources)k.updateSourceGlobal(e.sources[t])},updateSourceGlobal:function(e){var t=e.panner;if(t){t.refDistance=e.refDistance,t.maxDistance=e.maxDistance,t.rolloffFactor=e.rolloffFactor,t.panningModel=e.context.hrtf?"HRTF":"equalpower";var n=e.context.sourceDistanceModel?e.distanceModel:e.context.distanceModel;switch(n){case 0:t.distanceModel="inverse",t.refDistance=340282e33;break;case 53249:case 53250:t.distanceModel="inverse";break;case 53251:case 53252:t.distanceModel="linear";break;case 53253:case 53254:t.distanceModel="exponential";break}}},updateListenerSpace:function(e){var t=e.audioCtx.listener;t.positionX?(t.positionX.value=e.listener.position[0],t.positionY.value=e.listener.position[1],t.positionZ.value=e.listener.position[2]):t.setPosition(e.listener.position[0],e.listener.position[1],e.listener.position[2]),t.forwardX?(t.forwardX.value=e.listener.direction[0],t.forwardY.value=e.listener.direction[1],t.forwardZ.value=e.listener.direction[2],t.upX.value=e.listener.up[0],t.upY.value=e.listener.up[1],t.upZ.value=e.listener.up[2]):t.setOrientation(e.listener.direction[0],e.listener.direction[1],e.listener.direction[2],e.listener.up[0],e.listener.up[1],e.listener.up[2]);for(var n in e.sources)k.updateSourceSpace(e.sources[n])},updateSourceSpace:function(e){if(e.panner){var t=e.panner,n=e.position[0],o=e.position[1],s=e.position[2],d=e.direction[0],p=e.direction[1],m=e.direction[2],S=e.context.listener,x=S.position[0],R=S.position[1],W=S.position[2];if(e.relative){var O=-S.direction[0],G=-S.direction[1],ie=-S.direction[2],ue=S.up[0],ce=S.up[1],he=S.up[2],V=(lu,uu,cu)=>{var fu=Math.sqrt(lu*lu+uu*uu+cu*cu);return fu<Number.EPSILON?0:1/fu},Z=V(O,G,ie);O*=Z,G*=Z,ie*=Z,Z=V(ue,ce,he),ue*=Z,ce*=Z,he*=Z;var be=ce*ie-he*G,Te=he*O-ue*ie,ae=ue*G-ce*O;Z=V(be,Te,ae),be*=Z,Te*=Z,ae*=Z,ue=G*ae-ie*Te,ce=ie*be-O*ae,he=O*Te-G*be;var lt=d,Tt=p,Rt=m;d=lt*be+Tt*ue+Rt*O,p=lt*Te+Tt*ce+Rt*G,m=lt*ae+Tt*he+Rt*ie,lt=n,Tt=o,Rt=s,n=lt*be+Tt*ue+Rt*O,o=lt*Te+Tt*ce+Rt*G,s=lt*ae+Tt*he+Rt*ie,n+=x,o+=R,s+=W}t.positionX?(n!=t.positionX.value&&(t.positionX.value=n),o!=t.positionY.value&&(t.positionY.value=o),s!=t.positionZ.value&&(t.positionZ.value=s)):t.setPosition(n,o,s),t.orientationX?(d!=t.orientationX.value&&(t.orientationX.value=d),p!=t.orientationY.value&&(t.orientationY.value=p),m!=t.orientationZ.value&&(t.orientationZ.value=m)):t.setOrientation(d,p,m);var Ke=e.dopplerShift,Lt=e.velocity[0],ut=e.velocity[1],Ar=e.velocity[2],hr=S.velocity[0],Ue=S.velocity[1],_t=S.velocity[2];if(n===x&&o===R&&s===W||Lt===hr&&ut===Ue&&Ar===_t)e.dopplerShift=1;else{var pt=e.context.speedOfSound,Jn=e.context.dopplerFactor,Qn=x-n,Zn=R-o,ei=W-s,su=Math.sqrt(Qn*Qn+Zn*Zn+ei*ei),Do=(Qn*hr+Zn*Ue+ei*_t)/su,Mo=(Qn*Lt+Zn*ut+ei*Ar)/su;Do=Math.min(Do,pt/Jn),Mo=Math.min(Mo,pt/Jn),e.dopplerShift=(pt-Jn*Do)/(pt-Jn*Mo)}e.dopplerShift!==Ke&&k.updateSourceRate(e)}},updateSourceRate:function(e){if(e.state===4114){k.cancelPendingSourceAudio(e);var t=e.audioQueue[0];if(!t)return;var n;e.type===4136&&e.looping?n=Number.POSITIVE_INFINITY:n=(t.buffer.duration-t._startOffset)/e.playbackRate,t._duration=n,t.playbackRate.value=e.playbackRate,k.scheduleSourceAudio(e)}},sourceDuration:function(e){for(var t=0,n=0;n<e.bufQueue.length;n++){var o=e.bufQueue[n].audioBuf;t+=o?o.duration:0}return t},sourceTell:function(e){k.updateSourceTime(e);for(var t=0,n=0;n<e.bufsProcessed;n++)e.bufQueue[n].audioBuf&&(t+=e.bufQueue[n].audioBuf.duration);return t+=e.bufOffset,t},sourceSeek:function(e,t){var n=e.state==4114;if(n&&k.setSourceState(e,4113),e.bufQueue[e.bufsProcessed].audioBuf!==null){for(e.bufsProcessed=0;t>e.bufQueue[e.bufsProcessed].audioBuf.duration;)t-=e.bufQueue[e.bufsProcessed].audiobuf.duration,e.bufsProcessed++;e.bufOffset=t}n&&k.setSourceState(e,4114)},getGlobalParam:function(e,t){if(!k.currentCtx)return null;switch(t){case 49152:return k.currentCtx.dopplerFactor;case 49155:return k.currentCtx.speedOfSound;case 53248:return k.currentCtx.distanceModel;default:return k.currentCtx.err=40962,null}},setGlobalParam:function(e,t,n){if(k.currentCtx)switch(t){case 49152:if(!Number.isFinite(n)||n<0){k.currentCtx.err=40963;return}k.currentCtx.dopplerFactor=n,k.updateListenerSpace(k.currentCtx);break;case 49155:if(!Number.isFinite(n)||n<=0){k.currentCtx.err=40963;return}k.currentCtx.speedOfSound=n,k.updateListenerSpace(k.currentCtx);break;case 53248:switch(n){case 0:case 53249:case 53250:case 53251:case 53252:case 53253:case 53254:k.currentCtx.distanceModel=n,k.updateContextGlobal(k.currentCtx);break;default:k.currentCtx.err=40963;return}break;default:k.currentCtx.err=40962;return}},getListenerParam:function(e,t){if(!k.currentCtx)return null;switch(t){case 4100:return k.currentCtx.listener.position;case 4102:return k.currentCtx.listener.velocity;case 4111:return k.currentCtx.listener.direction.concat(k.currentCtx.listener.up);case 4106:return k.currentCtx.gain.gain.value;default:return k.currentCtx.err=40962,null}},setListenerParam:function(e,t,n){if(k.currentCtx){if(n===null){k.currentCtx.err=40962;return}var o=k.currentCtx.listener;switch(t){case 4100:if(!Number.isFinite(n[0])||!Number.isFinite(n[1])||!Number.isFinite(n[2])){k.currentCtx.err=40963;return}o.position[0]=n[0],o.position[1]=n[1],o.position[2]=n[2],k.updateListenerSpace(k.currentCtx);break;case 4102:if(!Number.isFinite(n[0])||!Number.isFinite(n[1])||!Number.isFinite(n[2])){k.currentCtx.err=40963;return}o.velocity[0]=n[0],o.velocity[1]=n[1],o.velocity[2]=n[2],k.updateListenerSpace(k.currentCtx);break;case 4106:if(!Number.isFinite(n)||n<0){k.currentCtx.err=40963;return}k.currentCtx.gain.gain.value=n;break;case 4111:if(!Number.isFinite(n[0])||!Number.isFinite(n[1])||!Number.isFinite(n[2])||!Number.isFinite(n[3])||!Number.isFinite(n[4])||!Number.isFinite(n[5])){k.currentCtx.err=40963;return}o.direction[0]=n[0],o.direction[1]=n[1],o.direction[2]=n[2],o.up[0]=n[3],o.up[1]=n[4],o.up[2]=n[5],k.updateListenerSpace(k.currentCtx);break;default:k.currentCtx.err=40962;return}}},getBufferParam:function(e,t,n){if(k.currentCtx){var o=k.buffers[t];if(!o||t===0){k.currentCtx.err=40961;return}switch(n){case 8193:return o.frequency;case 8194:return o.bytesPerSample*8;case 8195:return o.channels;case 8196:return o.length*o.bytesPerSample*o.channels;case 8213:return o.length===0?[0,0]:[(o.audioBuf._loopStart||0)*o.frequency,(o.audioBuf._loopEnd||o.length)*o.frequency];default:return k.currentCtx.err=40962,null}}},setBufferParam:function(e,t,n,o){if(k.currentCtx){var s=k.buffers[t];if(!s||t===0){k.currentCtx.err=40961;return}if(o===null){k.currentCtx.err=40962;return}switch(n){case 8196:if(o!==0){k.currentCtx.err=40963;return}break;case 8213:if(o[0]<0||o[0]>s.length||o[1]<0||o[1]>s.Length||o[0]>=o[1]){k.currentCtx.err=40963;return}if(s.refCount>0){k.currentCtx.err=40964;return}s.audioBuf&&(s.audioBuf._loopStart=o[0]/s.frequency,s.audioBuf._loopEnd=o[1]/s.frequency);break;default:k.currentCtx.err=40962;return}}},getSourceParam:function(e,t,n){if(!k.currentCtx)return null;var o=k.currentCtx.sources[t];if(!o)return k.currentCtx.err=40961,null;switch(n){case 514:return o.relative;case 4097:return o.coneInnerAngle;case 4098:return o.coneOuterAngle;case 4099:return o.pitch;case 4100:return o.position;case 4101:return o.direction;case 4102:return o.velocity;case 4103:return o.looping;case 4105:return o.type===4136?o.bufQueue[0].id:0;case 4106:return o.gain.gain.value;case 4109:return o.minGain;case 4110:return o.maxGain;case 4112:return o.state;case 4117:return o.bufQueue.length===1&&o.bufQueue[0].id===0?0:o.bufQueue.length;case 4118:return o.bufQueue.length===1&&o.bufQueue[0].id===0||o.looping?0:o.bufsProcessed;case 4128:return o.refDistance;case 4129:return o.rolloffFactor;case 4130:return o.coneOuterGain;case 4131:return o.maxDistance;case 4132:return k.sourceTell(o);case 4133:var s=k.sourceTell(o);return s>0&&(s*=o.bufQueue[0].frequency),s;case 4134:var s=k.sourceTell(o);return s>0&&(s*=o.bufQueue[0].frequency*o.bufQueue[0].bytesPerSample),s;case 4135:return o.type;case 4628:return o.spatialize;case 8201:for(var d=0,p=0,m=0;m<o.bufQueue.length;m++)d+=o.bufQueue[m].length,o.bufQueue[m].id!==0&&(p=o.bufQueue[m].bytesPerSample*o.bufQueue[m].channels);return d*p;case 8202:for(var d=0,m=0;m<o.bufQueue.length;m++)d+=o.bufQueue[m].length;return d;case 8203:return k.sourceDuration(o);case 53248:return o.distanceModel;default:return k.currentCtx.err=40962,null}},setSourceParam:function(e,t,n,o){if(k.currentCtx){var s=k.currentCtx.sources[t];if(!s){k.currentCtx.err=40961;return}if(o===null){k.currentCtx.err=40962;return}switch(n){case 514:if(o===1)s.relative=!0,k.updateSourceSpace(s);else if(o===0)s.relative=!1,k.updateSourceSpace(s);else{k.currentCtx.err=40963;return}break;case 4097:if(!Number.isFinite(o)){k.currentCtx.err=40963;return}s.coneInnerAngle=o,s.panner&&(s.panner.coneInnerAngle=o%360);break;case 4098:if(!Number.isFinite(o)){k.currentCtx.err=40963;return}s.coneOuterAngle=o,s.panner&&(s.panner.coneOuterAngle=o%360);break;case 4099:if(!Number.isFinite(o)||o<=0){k.currentCtx.err=40963;return}if(s.pitch===o)break;s.pitch=o,k.updateSourceRate(s);break;case 4100:if(!Number.isFinite(o[0])||!Number.isFinite(o[1])||!Number.isFinite(o[2])){k.currentCtx.err=40963;return}s.position[0]=o[0],s.position[1]=o[1],s.position[2]=o[2],k.updateSourceSpace(s);break;case 4101:if(!Number.isFinite(o[0])||!Number.isFinite(o[1])||!Number.isFinite(o[2])){k.currentCtx.err=40963;return}s.direction[0]=o[0],s.direction[1]=o[1],s.direction[2]=o[2],k.updateSourceSpace(s);break;case 4102:if(!Number.isFinite(o[0])||!Number.isFinite(o[1])||!Number.isFinite(o[2])){k.currentCtx.err=40963;return}s.velocity[0]=o[0],s.velocity[1]=o[1],s.velocity[2]=o[2],k.updateSourceSpace(s);break;case 4103:if(o===1){if(s.looping=!0,k.updateSourceTime(s),s.type===4136&&s.audioQueue.length>0){var d=s.audioQueue[0];d.loop=!0,d._duration=Number.POSITIVE_INFINITY}}else if(o===0){s.looping=!1;var p=k.updateSourceTime(s);if(s.type===4136&&s.audioQueue.length>0){var d=s.audioQueue[0];d.loop=!1,d._duration=s.bufQueue[0].audioBuf.duration/s.playbackRate,d._startTime=p-s.bufOffset/s.playbackRate}}else{k.currentCtx.err=40963;return}break;case 4105:if(s.state===4114||s.state===4115){k.currentCtx.err=40964;return}if(o===0){for(var m in s.bufQueue)s.bufQueue[m].refCount--;s.bufQueue.length=1,s.bufQueue[0]=k.buffers[0],s.bufsProcessed=0,s.type=4144}else{var S=k.buffers[o];if(!S){k.currentCtx.err=40963;return}for(var m in s.bufQueue)s.bufQueue[m].refCount--;s.bufQueue.length=0,S.refCount++,s.bufQueue=[S],s.bufsProcessed=0,s.type=4136}k.initSourcePanner(s),k.scheduleSourceAudio(s);break;case 4106:if(!Number.isFinite(o)||o<0){k.currentCtx.err=40963;return}s.gain.gain.value=o;break;case 4109:if(!Number.isFinite(o)||o<0||o>Math.min(s.maxGain,1)){k.currentCtx.err=40963;return}s.minGain=o;break;case 4110:if(!Number.isFinite(o)||o<Math.max(0,s.minGain)||o>1){k.currentCtx.err=40963;return}s.maxGain=o;break;case 4128:if(!Number.isFinite(o)||o<0){k.currentCtx.err=40963;return}s.refDistance=o,s.panner&&(s.panner.refDistance=o);break;case 4129:if(!Number.isFinite(o)||o<0){k.currentCtx.err=40963;return}s.rolloffFactor=o,s.panner&&(s.panner.rolloffFactor=o);break;case 4130:if(!Number.isFinite(o)||o<0||o>1){k.currentCtx.err=40963;return}s.coneOuterGain=o,s.panner&&(s.panner.coneOuterGain=o);break;case 4131:if(!Number.isFinite(o)||o<0){k.currentCtx.err=40963;return}s.maxDistance=o,s.panner&&(s.panner.maxDistance=o);break;case 4132:if(o<0||o>k.sourceDuration(s)){k.currentCtx.err=40963;return}k.sourceSeek(s,o);break;case 4133:var W=k.sourceDuration(s);if(W>0){var x;for(var R in s.bufQueue)if(R){x=s.bufQueue[R].frequency;break}o/=x}if(o<0||o>W){k.currentCtx.err=40963;return}k.sourceSeek(s,o);break;case 4134:var W=k.sourceDuration(s);if(W>0){var O;for(var R in s.bufQueue)if(R){var S=s.bufQueue[R];O=S.frequency*S.bytesPerSample*S.channels;break}o/=O}if(o<0||o>W){k.currentCtx.err=40963;return}k.sourceSeek(s,o);break;case 4628:if(o!==0&&o!==1&&o!==2){k.currentCtx.err=40963;return}s.spatialize=o,k.initSourcePanner(s);break;case 8201:case 8202:case 8203:k.currentCtx.err=40964;break;case 53248:switch(o){case 0:case 53249:case 53250:case 53251:case 53252:case 53253:case 53254:s.distanceModel=o,k.currentCtx.sourceDistanceModel&&k.updateContextGlobal(k.currentCtx);break;default:k.currentCtx.err=40963;return}break;default:k.currentCtx.err=40962;return}}},captures:{},sharedCaptureAudioCtx:null,requireValidCaptureDevice:function(e,t){if(e===0)return k.alcErr=40961,null;var n=k.captures[e];if(!n)return k.alcErr=40961,null;var o=n.mediaStreamError;return o?(k.alcErr=40961,null):n}};function v0(e,t,n,o,s){if(k.currentCtx){var d=k.buffers[e];if(!d){k.currentCtx.err=40963;return}if(s<=0){k.currentCtx.err=40963;return}var p=null;try{switch(t){case 4352:if(o>0){p=k.currentCtx.audioCtx.createBuffer(1,o,s);for(var m=p.getChannelData(0),S=0;S<o;++S)m[S]=de[n++]*.0078125-1}d.bytesPerSample=1,d.channels=1,d.length=o;break;case 4353:if(o>0){p=k.currentCtx.audioCtx.createBuffer(1,o>>1,s);var m=p.getChannelData(0);n>>=1;for(var S=0;S<o>>1;++S)m[S]=xe[n++]*30517578125e-15}d.bytesPerSample=2,d.channels=1,d.length=o>>1;break;case 4354:if(o>0){p=k.currentCtx.audioCtx.createBuffer(2,o>>1,s);for(var m=p.getChannelData(0),x=p.getChannelData(1),S=0;S<o>>1;++S)m[S]=de[n++]*.0078125-1,x[S]=de[n++]*.0078125-1}d.bytesPerSample=1,d.channels=2,d.length=o>>1;break;case 4355:if(o>0){p=k.currentCtx.audioCtx.createBuffer(2,o>>2,s);var m=p.getChannelData(0),x=p.getChannelData(1);n>>=1;for(var S=0;S<o>>2;++S)m[S]=xe[n++]*30517578125e-15,x[S]=xe[n++]*30517578125e-15}d.bytesPerSample=2,d.channels=2,d.length=o>>2;break;case 65552:if(o>0){p=k.currentCtx.audioCtx.createBuffer(1,o>>2,s);var m=p.getChannelData(0);n>>=2;for(var S=0;S<o>>2;++S)m[S]=De[n++]}d.bytesPerSample=4,d.channels=1,d.length=o>>2;break;case 65553:if(o>0){p=k.currentCtx.audioCtx.createBuffer(2,o>>3,s);var m=p.getChannelData(0),x=p.getChannelData(1);n>>=2;for(var S=0;S<o>>3;++S)m[S]=De[n++],x[S]=De[n++]}d.bytesPerSample=4,d.channels=2,d.length=o>>3;break;default:k.currentCtx.err=40963;return}d.frequency=s,d.audioBuf=p}catch{k.currentCtx.err=40963;return}}}function w0(e,t){if(k.currentCtx){for(var n=0;n<e;++n){var o=F[t+n*4>>2];if(o!==0){if(!k.buffers[o]){k.currentCtx.err=40961;return}if(k.buffers[o].refCount){k.currentCtx.err=40964;return}}}for(var n=0;n<e;++n){var o=F[t+n*4>>2];o!==0&&(k.deviceRefCounts[k.buffers[o].deviceId]--,delete k.buffers[o],k.freeIds.push(o))}}}function zl(e,t,n){switch(t){case 514:case 4097:case 4098:case 4103:case 4105:case 4128:case 4129:case 4131:case 4132:case 4133:case 4134:case 4628:case 8201:case 8202:case 53248:k.setSourceParam("alSourcei",e,t,n);break;default:k.setSourceParam("alSourcei",e,t,null);break}}function E0(e,t){if(k.currentCtx){for(var n=0;n<e;++n){var o=F[t+n*4>>2];if(!k.currentCtx.sources[o]){k.currentCtx.err=40961;return}}for(var n=0;n<e;++n){var o=F[t+n*4>>2];k.setSourceState(k.currentCtx.sources[o],4116),zl(o,4105,0),delete k.currentCtx.sources[o],k.freeIds.push(o)}}}function S0(e,t){if(k.currentCtx)for(var n=0;n<e;++n){var o={deviceId:k.currentCtx.deviceId,id:k.newId(),refCount:0,audioBuf:null,frequency:0,bytesPerSample:2,channels:1,length:0};k.deviceRefCounts[o.deviceId]++,k.buffers[o.id]=o,F[t+n*4>>2]=o.id}}function C0(e,t){if(k.currentCtx)for(var n=0;n<e;++n){var o=k.currentCtx.audioCtx.createGain();o.connect(k.currentCtx.gain);var s={context:k.currentCtx,id:k.newId(),type:4144,state:4113,bufQueue:[k.buffers[0]],audioQueue:[],looping:!1,pitch:1,dopplerShift:1,gain:o,minGain:0,maxGain:1,panner:null,bufsProcessed:0,bufStartTime:Number.NEGATIVE_INFINITY,bufOffset:0,relative:!1,refDistance:1,maxDistance:340282e33,rolloffFactor:1,position:[0,0,0],velocity:[0,0,0],direction:[0,0,0],coneOuterGain:0,coneInnerAngle:360,coneOuterAngle:360,distanceModel:53250,spatialize:2,get playbackRate(){return this.pitch*this.dopplerShift}};k.currentCtx.sources[s.id]=s,F[t+n*4>>2]=s.id}}function T0(){if(!k.currentCtx)return 40964;var e=k.currentCtx.err;return k.currentCtx.err=0,e}function x0(e,t,n){var o=k.getSourceParam("alGetSourcei",e,t);if(o!==null){if(!n){k.currentCtx.err=40963;return}switch(t){case 514:case 4097:case 4098:case 4103:case 4105:case 4112:case 4117:case 4118:case 4128:case 4129:case 4131:case 4132:case 4133:case 4134:case 4135:case 4628:case 8201:case 8202:case 53248:F[n>>2]=o;break;default:k.currentCtx.err=40962;return}}}function k0(e){if(k.stringCache[e])return k.stringCache[e];var t;switch(e){case 0:t="No Error";break;case 40961:t="Invalid Name";break;case 40962:t="Invalid Enum";break;case 40963:t="Invalid Value";break;case 40964:t="Invalid Operation";break;case 40965:t="Out of Memory";break;case 45057:t="Emscripten";break;case 45058:t="1.1";break;case 45059:t="WebAudio";break;case 45060:t="";for(var n in k.AL_EXTENSIONS)t=t.concat(n),t=t.concat(" ");t=t.trim();break;default:return k.currentCtx&&(k.currentCtx.err=40962),0}return t=Tr(t),k.stringCache[e]=t,t}function A0(e){if(k.currentCtx){var t=k.currentCtx.sources[e];if(!t){k.currentCtx.err=40961;return}k.setSourceState(t,4115)}}function R0(e){if(k.currentCtx){var t=k.currentCtx.sources[e];if(!t){k.currentCtx.err=40961;return}k.setSourceState(t,4114)}}function L0(e){if(k.currentCtx){var t=k.currentCtx.sources[e];if(!t){k.currentCtx.err=40961;return}k.setSourceState(t,4116)}}function F0(e,t,n){switch(t){case 4097:case 4098:case 4099:case 4106:case 4109:case 4110:case 4128:case 4129:case 4130:case 4131:case 4132:case 4133:case 4134:case 8203:k.setSourceParam("alSourcef",e,t,n);break;default:k.setSourceParam("alSourcef",e,t,null);break}}function P0(e){return!(e in k.deviceRefCounts)||k.deviceRefCounts[e]>0?0:(delete k.deviceRefCounts[e],k.freeIds.push(e),1)}var I0=(e,t,n)=>{e.addEventListener(t,n,{once:!0})},$l=(e,t)=>{t||(t=[document,document.getElementById("canvas")]),["keydown","mousedown","touchstart"].forEach(n=>{t.forEach(o=>{o&&I0(o,n,()=>{e.state==="suspended"&&e.resume()})})})};function D0(e,t){if(!(e in k.deviceRefCounts))return k.alcErr=40961,0;var n=null,o=[],s=null;if(t>>=2,t)for(var d=0,p=0;d=F[t++],o.push(d),d!==0;)switch(p=F[t++],o.push(p),d){case 4103:n||(n={}),n.sampleRate=p;break;case 4112:case 4113:break;case 6546:switch(p){case 0:s=!1;break;case 1:s=!0;break;case 2:break;default:return k.alcErr=40964,0}break;case 6550:if(p!==0)return k.alcErr=40964,0;break;default:return k.alcErr=40964,0}var m=window.AudioContext||window.webkitAudioContext,S=null;try{n?S=new m(n):S=new m}catch(G){return G.name==="NotSupportedError"?k.alcErr=40964:k.alcErr=40961,0}$l(S),typeof S.createGain>"u"&&(S.createGain=S.createGainNode);var x=S.createGain();x.connect(S.destination);var R={deviceId:e,id:k.newId(),attrs:o,audioCtx:S,listener:{position:[0,0,0],velocity:[0,0,0],direction:[0,0,0],up:[0,0,0]},sources:[],interval:setInterval(function(){k.scheduleContextAudio(R)},k.QUEUE_INTERVAL),gain:x,distanceModel:53250,speedOfSound:343.3,dopplerFactor:1,sourceDistanceModel:!1,hrtf:s||!1,_err:0,get err(){return this._err},set err(G){(this._err===0||G===0)&&(this._err=G)}};if(k.deviceRefCounts[e]++,k.contexts[R.id]=R,s!==null)for(var W in k.contexts){var O=k.contexts[W];O.deviceId===e&&(O.hrtf=s,k.updateContextGlobal(O))}return R.id}function M0(e){var t=k.contexts[e];if(k.currentCtx===t){k.alcErr=40962;return}k.contexts[e].interval&&clearInterval(k.contexts[e].interval),k.deviceRefCounts[t.deviceId]--,delete k.contexts[e],k.freeIds.push(e)}function j0(e){var t=k.alcErr;return k.alcErr=0,t}function O0(e,t){if(k.alcStringCache[t])return k.alcStringCache[t];var n;switch(t){case 0:n="No Error";break;case 40961:n="Invalid Device";break;case 40962:n="Invalid Context";break;case 40963:n="Invalid Enum";break;case 40964:n="Invalid Value";break;case 40965:n="Out of Memory";break;case 4100:if(typeof AudioContext<"u"||typeof webkitAudioContext<"u")n=k.DEVICE_NAME;else return 0;break;case 4101:typeof AudioContext<"u"||typeof webkitAudioContext<"u"?n=k.DEVICE_NAME.concat("\0"):n="\0";break;case 785:n=k.CAPTURE_DEVICE_NAME;break;case 784:if(e===0)n=k.CAPTURE_DEVICE_NAME.concat("\0");else{var o=k.requireValidCaptureDevice(e,"alcGetString");if(!o)return 0;n=o.deviceName}break;case 4102:if(!e)return k.alcErr=40961,0;n="";for(var s in k.ALC_EXTENSIONS)n=n.concat(s),n=n.concat(" ");n=n.trim();break;default:return k.alcErr=40963,0}return n=Tr(n),k.alcStringCache[t]=n,n}function N0(e){return e===0?k.currentCtx=null:k.currentCtx=k.contexts[e],1}function B0(e){if(e){var t=Je(e);if(t!==k.DEVICE_NAME)return 0}if(typeof AudioContext<"u"||typeof webkitAudioContext<"u"){var n=k.newId();return k.deviceRefCounts[n]=0,n}return 0}function U0(){return Date.now()}var Gl=()=>2147483648,W0=()=>Gl();function z0(){return!D}var $0=(e,t,n)=>de.copyWithin(e,t,t+n),G0=e=>{var t=J.buffer,n=e-t.byteLength+65535>>>16;try{return J.grow(n),Ce(),1}catch{}},V0=e=>{var t=de.length;e>>>=0;var n=Gl();if(e>n)return!1;for(var o=(S,x)=>S+(x-S%x)%x,s=1;s<=4;s*=2){var d=t*(1+.2/s);d=Math.min(d,e+100663296);var p=Math.min(n,o(Math.max(e,d),65536)),m=G0(p);if(m)return!0}return!1},it={openDatabase:function(e,t,n,o){try{var s=indexedDB.open(e,t)}catch(d){return o(d)}s.onupgradeneeded=d=>{var p=d.target.result;p.objectStoreNames.contains("FILES")&&p.deleteObjectStore("FILES"),p.createObjectStore("FILES")},s.onsuccess=d=>n(d.target.result),s.onerror=d=>o(d)},init:function(){it.xhrs=new Co;var e=n=>{it.dbInstance=n,nt()},t=()=>{it.dbInstance=!1,nt()};bt(),it.openDatabase("emscripten_filesystem",1,e,t)}};function Ao(e,t,n,o,s){var d=Y[e+8>>2];if(!d){n(e,0,"no url specified!");return}var p=Je(d),m=e+112,S=Je(m+0);S||(S="GET");var x=Y[m+56>>2],R=Y[m+68>>2],W=Y[m+72>>2],O=Y[m+76>>2],G=Y[m+80>>2],ie=Y[m+84>>2],ue=Y[m+88>>2],ce=Y[m+52>>2],he=!!(ce&1),V=!!(ce&2),Z=!!(ce&64),be=R?Je(R):void 0,Te=W?Je(W):void 0,ae=new XMLHttpRequest;if(ae.withCredentials=!!de[m+60>>0],ae.open(S,p,!Z,be,Te),Z||(ae.timeout=x),ae.url_=p,ae.responseType="arraybuffer",G){var lt=Je(G);ae.overrideMimeType(lt)}if(O)for(;;){var Tt=Y[O>>2];if(!Tt)break;var Rt=Y[O+4>>2];if(!Rt)break;O+=8;var Ke=Je(Tt),Lt=Je(Rt);ae.setRequestHeader(Ke,Lt)}var ut=it.xhrs.allocate(ae);Y[e>>2]=ut;var Ar=ie&&ue?de.slice(ie,ie+ue):null;function hr(){var Ue=0,_t=0;ae.response&&he&&Y[e+12>>2]===0&&(_t=ae.response.byteLength),_t>0&&(Ue=Wt(_t),de.set(new Uint8Array(ae.response),Ue)),Y[e+12>>2]=Ue,Ct(e+16,_t),Ct(e+24,0);var pt=ae.response?ae.response.byteLength:0;pt&&Ct(e+32,pt),ye[e+40>>1]=ae.readyState,ye[e+42>>1]=ae.status,ae.statusText&&st(ae.statusText,e+44,64)}ae.onload=Ue=>{it.xhrs.has(ut)&&(hr(),ae.status>=200&&ae.status<300?t&&t(e,ae,Ue):n&&n(e,ae,Ue))},ae.onerror=Ue=>{it.xhrs.has(ut)&&(hr(),n&&n(e,ae,Ue))},ae.ontimeout=Ue=>{it.xhrs.has(ut)&&n&&n(e,ae,Ue)},ae.onprogress=Ue=>{if(it.xhrs.has(ut)){var _t=he&&V&&ae.response?ae.response.byteLength:0,pt=0;_t>0&&he&&V&&(pt=Wt(_t),de.set(new Uint8Array(ae.response),pt)),Y[e+12>>2]=pt,Ct(e+16,_t),Ct(e+24,Ue.loaded-_t),Ct(e+32,Ue.total),ye[e+40>>1]=ae.readyState,ae.readyState>=3&&ae.status===0&&Ue.loaded>0&&(ae.status=200),ye[e+42>>1]=ae.status,ae.statusText&&st(ae.statusText,e+44,64),o&&o(e,ae,Ue),pt&&zt(pt)}},ae.onreadystatechange=Ue=>{it.xhrs.has(ut)&&(ye[e+40>>1]=ae.readyState,ae.readyState>=2&&(ye[e+42>>1]=ae.status),s&&s(e,ae,Ue))};try{ae.send(Ar)}catch(Ue){n&&n(e,ae,Ue)}}function Ct(e,t){Y[e>>2]=t,Y[e+4>>2]=(t-Y[e>>2])/4294967296}function Vl(e,t,n,o,s){if(!e){s(t,0,"IndexedDB not available!");return}var d=t+112,p=Y[d+64>>2];p||(p=Y[t+8>>2]);var m=Je(p);try{var S=e.transaction(["FILES"],"readwrite"),x=S.objectStore("FILES"),R=x.put(n,m);R.onsuccess=W=>{ye[t+40>>1]=4,ye[t+42>>1]=200,st("OK",t+44,64),o(t,0,m)},R.onerror=W=>{ye[t+40>>1]=4,ye[t+42>>1]=413,st("Payload Too Large",t+44,64),s(t,0,W)}}catch(W){s(t,0,W)}}function Y0(e,t,n,o){if(!e){o(t,0,"IndexedDB not available!");return}var s=t+112,d=Y[s+64>>2];d||(d=Y[t+8>>2]);var p=Je(d);try{var m=e.transaction(["FILES"],"readonly"),S=m.objectStore("FILES"),x=S.get(p);x.onsuccess=R=>{if(R.target.result){var W=R.target.result,O=W.byteLength||W.length,G=Wt(O);de.set(new Uint8Array(W),G),Y[t+12>>2]=G,Ct(t+16,O),Ct(t+24,0),Ct(t+32,O),ye[t+40>>1]=4,ye[t+42>>1]=200,st("OK",t+44,64),n(t,0,W)}else ye[t+40>>1]=4,ye[t+42>>1]=404,st("Not Found",t+44,64),o(t,0,"no data")},x.onerror=R=>{ye[t+40>>1]=4,ye[t+42>>1]=404,st("Not Found",t+44,64),o(t,0,R)}}catch(R){o(t,0,R)}}function K0(e,t,n,o){if(!e){o(t,0,"IndexedDB not available!");return}var s=t+112,d=Y[s+64>>2];d||(d=Y[t+8>>2]);var p=Je(d);try{var m=e.transaction(["FILES"],"readwrite"),S=m.objectStore("FILES"),x=S.delete(p);x.onsuccess=R=>{var W=R.target.result;Y[t+12>>2]=0,Ct(t+16,0),Ct(t+24,0),Ct(t+32,0),ye[t+40>>1]=4,ye[t+42>>1]=200,st("OK",t+44,64),n(t,0,W)},x.onerror=R=>{ye[t+40>>1]=4,ye[t+42>>1]=404,st("Not Found",t+44,64),o(t,0,R)}}catch(R){o(t,0,R)}}function X0(e,t,n,o,s){var d=e+112,p=Y[d+36>>2],m=Y[d+40>>2],S=Y[d+44>>2],x=Y[d+48>>2],R=Y[d+52>>2],W=!!(R&64);function O(Ke){W?Ke():Gn(Ke)}var G=(Ke,Lt,ut)=>{O(()=>{p?Zt(p)(Ke):t&&t(Ke)})},ie=(Ke,Lt,ut)=>{O(()=>{S?Zt(S)(Ke):o&&o(Ke)})},ue=(Ke,Lt,ut)=>{O(()=>{m?Zt(m)(Ke):n&&n(Ke)})},ce=(Ke,Lt,ut)=>{O(()=>{x?Zt(x)(Ke):s&&s(Ke)})},he=(Ke,Lt,ut)=>{Ao(Ke,G,ue,ie,ce)},V=(Ke,Lt,ut)=>{var Ar=(Ue,_t,pt)=>{O(()=>{p?Zt(p)(Ue):t&&t(Ue)})},hr=(Ue,_t,pt)=>{O(()=>{p?Zt(p)(Ue):t&&t(Ue)})};Vl(it.dbInstance,Ke,Lt.response,Ar,hr)},Z=(Ke,Lt,ut)=>{Ao(Ke,V,ue,ie,ce)},be=Je(d+0),Te=!!(R&16),ae=!!(R&4),lt=!!(R&32);if(be==="EM_IDB_STORE"){var Tt=Y[d+84>>2],Rt=Y[d+88>>2];Vl(it.dbInstance,e,de.slice(Tt,Tt+Rt),G,ue)}else if(be==="EM_IDB_DELETE")K0(it.dbInstance,e,G,ue);else if(!Te)Y0(it.dbInstance,e,G,lt?ue:ae?Z:he);else if(!lt)Ao(e,ae?V:G,ue,ie,ce);else return 0;return e}var Ro={},H0=()=>w||"./this.program",Vr=()=>{if(!Vr.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:H0()};for(var n in Ro)Ro[n]===void 0?delete t[n]:t[n]=Ro[n];var o=[];for(var n in t)o.push(`${n}=${t[n]}`);Vr.strings=o}return Vr.strings},q0=(e,t)=>{for(var n=0;n<e.length;++n)we[t++>>0]=e.charCodeAt(n);we[t>>0]=0},J0=(e,t)=>{var n=0;return Vr().forEach(function(o,s){var d=t+n;Y[e+s*4>>2]=d,q0(o,d),n+=o.length+1}),0},Q0=(e,t)=>{var n=Vr();Y[e>>2]=n.length;var o=0;return n.forEach(function(s){o+=s.length+1}),Y[t>>2]=o,0};function Z0(e){try{var t=Ee.getStreamFromFD(e);return y.close(t),0}catch(n){if(typeof y>"u"||n.name!=="ErrnoError")throw n;return n.errno}}function eb(e,t){try{var n=0,o=0,s=0,d=Ee.getStreamFromFD(e),p=d.tty?2:y.isDir(d.mode)?3:y.isLink(d.mode)?7:4;return we[t>>0]=p,xe[t+2>>1]=s,ee=[n>>>0,(j=n,+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],F[t+8>>2]=ee[0],F[t+12>>2]=ee[1],ee=[o>>>0,(j=o,+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],F[t+16>>2]=ee[0],F[t+20>>2]=ee[1],0}catch(m){if(typeof y>"u"||m.name!=="ErrnoError")throw m;return m.errno}}var tb=(e,t,n,o)=>{for(var s=0,d=0;d<n;d++){var p=Y[t>>2],m=Y[t+4>>2];t+=8;var S=y.read(e,we,p,m,o);if(S<0)return-1;if(s+=S,S<m)break;typeof o<"u"&&(o+=S)}return s};function rb(e,t,n,o){try{var s=Ee.getStreamFromFD(e),d=tb(s,t,n);return Y[o>>2]=d,0}catch(p){if(typeof y>"u"||p.name!=="ErrnoError")throw p;return p.errno}}function nb(e,t,n,o,s){var d=Er(t,n);try{if(isNaN(d))return 61;var p=Ee.getStreamFromFD(e);return y.llseek(p,d,o),ee=[p.position>>>0,(j=p.position,+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],F[s>>2]=ee[0],F[s+4>>2]=ee[1],p.getdents&&d===0&&o===0&&(p.getdents=null),0}catch(m){if(typeof y>"u"||m.name!=="ErrnoError")throw m;return m.errno}}function ib(e){try{var t=Ee.getStreamFromFD(e);return t.stream_ops&&t.stream_ops.fsync?t.stream_ops.fsync(t):0}catch(n){if(typeof y>"u"||n.name!=="ErrnoError")throw n;return n.errno}}var ob=(e,t,n,o)=>{for(var s=0,d=0;d<n;d++){var p=Y[t>>2],m=Y[t+4>>2];t+=8;var S=y.write(e,we,p,m,o);if(S<0)return-1;s+=S,typeof o<"u"&&(o+=S)}return s};function ab(e,t,n,o){try{var s=Ee.getStreamFromFD(e),d=ob(s,t,n);return Y[o>>2]=d,0}catch(p){if(typeof y>"u"||p.name!=="ErrnoError")throw p;return p.errno}}var Vn=e=>{for(var t=e.split("."),n=0;n<4;n++){var o=Number(t[n]);if(isNaN(o))return null;t[n]=o}return(t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0},Yr=e=>parseInt(e),Lo=e=>{var t,n,o,s,d=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,p=[];if(!d.test(e))return null;if(e==="::")return[0,0,0,0,0,0,0,0];for(e.startsWith("::")?e=e.replace("::","Z:"):e=e.replace("::",":Z:"),e.indexOf(".")>0?(e=e.replace(new RegExp("[.]","g"),":"),t=e.split(":"),t[t.length-4]=Yr(t[t.length-4])+Yr(t[t.length-3])*256,t[t.length-3]=Yr(t[t.length-2])+Yr(t[t.length-1])*256,t=t.slice(0,t.length-2)):t=e.split(":"),o=0,s=0,n=0;n<t.length;n++)if(typeof t[n]=="string")if(t[n]==="Z"){for(s=0;s<8-t.length+1;s++)p[n+s]=0;o=s-1}else p[n+o]=Hn(parseInt(t[n],16));else p[n+o]=t[n];return[p[1]<<16|p[0],p[3]<<16|p[2],p[5]<<16|p[4],p[7]<<16|p[6]]},er={address_map:{id:1,addrs:{},names:{}},lookup_name:e=>{var t=Vn(e);if(t!==null||(t=Lo(e),t!==null))return e;var n;if(er.address_map.addrs[e])n=er.address_map.addrs[e];else{var o=er.address_map.id++;pe(o<65535,"exceeded max address mappings of 65535"),n="172.29."+(o&255)+"."+(o&65280),er.address_map.names[n]=e,er.address_map.addrs[e]=n}return n},lookup_addr:e=>er.address_map.names[e]?er.address_map.names[e]:null},Yl=e=>(e&255)+"."+(e>>8&255)+"."+(e>>16&255)+"."+(e>>24&255),sb=e=>{var t="",n=0,o=0,s=0,d=0,p=0,m=0,S=[e[0]&65535,e[0]>>16,e[1]&65535,e[1]>>16,e[2]&65535,e[2]>>16,e[3]&65535,e[3]>>16],x=!0,R="";for(m=0;m<5;m++)if(S[m]!==0){x=!1;break}if(x){if(R=Yl(S[6]|S[7]<<16),S[5]===-1)return t="::ffff:",t+=R,t;if(S[5]===0)return t="::",R==="0.0.0.0"&&(R=""),R==="0.0.0.1"&&(R="1"),t+=R,t}for(n=0;n<8;n++)S[n]===0&&(n-s>1&&(p=0),s=n,p++),p>o&&(o=p,d=n-o+1);for(n=0;n<8;n++){if(o>1&&S[n]===0&&n>=d&&n<d+o){n===d&&(t+=":",d===0&&(t+=":"));continue}t+=Number(nu(S[n]&65535)).toString(16),t+=n<7?":":""}return t},lb=(e,t,n,o,s)=>{switch(t){case 2:n=Vn(n),mo(e,16),s&&(F[s>>2]=16),xe[e>>1]=t,F[e+4>>2]=n,xe[e+2>>1]=Hn(o);break;case 10:n=Lo(n),mo(e,28),s&&(F[s>>2]=28),F[e>>2]=t,F[e+8>>2]=n[0],F[e+12>>2]=n[1],F[e+16>>2]=n[2],F[e+20>>2]=n[3],xe[e+2>>1]=Hn(o);break;default:return 5}return 0},ub=(e,t,n,o)=>{var s=0,d=0,p=0,m=0,S=0,x=0,R;function W(O,G,ie,ue,ce,he){var V,Z,be,Te;return Z=O===10?28:16,ce=O===10?sb(ce):Yl(ce),V=Wt(Z),Te=lb(V,O,ce,he),pe(!Te),be=Wt(32),F[be+4>>2]=O,F[be+8>>2]=G,F[be+12>>2]=ie,Y[be+24>>2]=ue,Y[be+20>>2]=V,O===10?F[be+16>>2]=28:F[be+16>>2]=16,F[be+28>>2]=0,be}if(n&&(p=F[n>>2],m=F[n+4>>2],S=F[n+8>>2],x=F[n+12>>2]),S&&!x&&(x=S===2?17:6),!S&&x&&(S=x===17?2:1),x===0&&(x=6),S===0&&(S=1),!e&&!t)return-2;if(p&-1088||n!==0&&F[n>>2]&2&&!e)return-1;if(p&32)return-2;if(S!==0&&S!==1&&S!==2)return-7;if(m!==0&&m!==2&&m!==10)return-6;if(t&&(t=Je(t),d=parseInt(t,10),isNaN(d)))return p&1024?-2:-8;if(!e)return m===0&&(m=2),p&1||(m===2?s=Xn(2130706433):s=[0,0,0,1]),R=W(m,S,x,null,s,d),Y[o>>2]=R,0;if(e=Je(e),s=Vn(e),s!==null)if(m===0||m===2)m=2;else if(m===10&&p&8)s=[0,0,Xn(65535),s],m=10;else return-2;else if(s=Lo(e),s!==null)if(m===0||m===10)m=10;else return-2;return s!=null?(R=W(m,S,x,e,s,d),Y[o>>2]=R,0):p&4?-2:(e=er.lookup_name(e),s=Vn(e),m===0?m=2:m===10&&(s=[0,0,Xn(65535),s]),R=W(m,S,x,null,s,d),Y[o>>2]=R,0)},cb=(e,t)=>(Be(de.subarray(e,e+t)),0),Q={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function(e){Q.lastError||(Q.lastError=e)},getNewId:function(e){for(var t=Q.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,o){for(var s="",d=0;d<t;++d){var p=o?F[o+d*4>>2]:-1;s+=Je(F[n+d*4>>2],p<0?void 0:p)}return s},createContext:function(e,t){if(!e.getContextSafariWebGL2Fixed){let s=function(d,p){var m=e.getContextSafariWebGL2Fixed(d,p);return d=="webgl"==m instanceof WebGLRenderingContext?m:null};e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=s}var n=t.majorVersion>1?e.getContext("webgl2",t):e.getContext("webgl",t);if(!n)return 0;var o=Q.registerContext(n,t);return o},registerContext:function(e,t){var n=Q.getNewId(Q.contexts),o={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=o),Q.contexts[n]=o,n},makeContextCurrent:function(e){return Q.currentContext=Q.contexts[e],i.ctx=K=Q.currentContext&&Q.currentContext.GLctx,!(e&&!K)},getContext:function(e){return Q.contexts[e]},deleteContext:function(e){Q.currentContext===Q.contexts[e]&&(Q.currentContext=null),typeof JSEvents=="object"&&JSEvents.removeAllHandlersOnTarget(Q.contexts[e].GLctx.canvas),Q.contexts[e]&&Q.contexts[e].GLctx.canvas&&(Q.contexts[e].GLctx.canvas.GLctxObject=void 0),Q.contexts[e]=null}};function fb(e){K.activeTexture(e)}function db(e,t){K.attachShader(Q.programs[e],Q.shaders[t])}function hb(e,t){e==35051?K.currentPixelPackBufferBinding=t:e==35052&&(K.currentPixelUnpackBufferBinding=t),K.bindBuffer(e,Q.buffers[t])}function pb(e,t,n,o,s){K.bindBufferRange(e,t,Q.buffers[n],o,s)}function mb(e,t){K.bindFramebuffer(e,Q.framebuffers[t])}function bb(e,t){K.bindRenderbuffer(e,Q.renderbuffers[t])}function gb(e,t){K.bindTexture(e,Q.textures[t])}function yb(e){K.bindVertexArray(Q.vaos[e])}function _b(e){K.blendEquation(e)}function vb(e,t){K.blendFunc(e,t)}function wb(e,t,n,o){K.blendFuncSeparate(e,t,n,o)}function Eb(e,t,n,o,s,d,p,m,S,x){K.blitFramebuffer(e,t,n,o,s,d,p,m,S,x)}function Sb(e,t,n,o){Q.currentContext.version>=2?n&&t?K.bufferData(e,de,o,n,t):K.bufferData(e,t,o):K.bufferData(e,n?de.subarray(n,n+t):t,o)}function Cb(e,t,n,o){if(Q.currentContext.version>=2){n&&K.bufferSubData(e,t,de,o,n);return}K.bufferSubData(e,t,de.subarray(o,o+n))}function Tb(e,t,n){K.clearBufferfv(e,t,De,n>>2)}function xb(e,t,n,o){K.colorMask(!!e,!!t,!!n,!!o)}function Ab(e){K.compileShader(Q.shaders[e])}function Rb(e,t,n,o,s,d,p,m){if(Q.currentContext.version>=2){K.currentPixelUnpackBufferBinding||!p?K.compressedTexImage2D(e,t,n,o,s,d,p,m):K.compressedTexImage2D(e,t,n,o,s,d,de,m,p);return}K.compressedTexImage2D(e,t,n,o,s,d,m?de.subarray(m,m+p):null)}function Lb(e,t,n,o,s,d,p,m,S){K.currentPixelUnpackBufferBinding?K.compressedTexImage3D(e,t,n,o,s,d,p,m,S):K.compressedTexImage3D(e,t,n,o,s,d,p,de,S,m)}function Fb(){var e=Q.getNewId(Q.programs),t=K.createProgram();return t.name=e,t.maxUniformLength=t.maxAttributeLength=t.maxUniformBlockNameLength=0,t.uniformIdCounter=1,Q.programs[e]=t,e}function Pb(e){var t=Q.getNewId(Q.shaders);return Q.shaders[t]=K.createShader(e),t}function Ib(e,t){for(var n=0;n<e;n++){var o=F[t+n*4>>2],s=Q.buffers[o];s&&(K.deleteBuffer(s),s.name=0,Q.buffers[o]=null,o==K.currentPixelPackBufferBinding&&(K.currentPixelPackBufferBinding=0),o==K.currentPixelUnpackBufferBinding&&(K.currentPixelUnpackBufferBinding=0))}}function Mb(e,t){for(var n=0;n<e;++n){var o=F[t+n*4>>2],s=Q.framebuffers[o];s&&(K.deleteFramebuffer(s),s.name=0,Q.framebuffers[o]=null)}}function jb(e){if(e){var t=Q.programs[e];if(!t){Q.recordError(1281);return}K.deleteProgram(t),t.name=0,Q.programs[e]=null}}function Ob(e,t){for(var n=0;n<e;n++){var o=F[t+n*4>>2],s=Q.renderbuffers[o];s&&(K.deleteRenderbuffer(s),s.name=0,Q.renderbuffers[o]=null)}}function Nb(e){if(e){var t=Q.shaders[e];if(!t){Q.recordError(1281);return}K.deleteShader(t),Q.shaders[e]=null}}function Bb(e,t){for(var n=0;n<e;n++){var o=F[t+n*4>>2],s=Q.textures[o];s&&(K.deleteTexture(s),s.name=0,Q.textures[o]=null)}}function Ub(e,t){for(var n=0;n<e;n++){var o=F[t+n*4>>2];K.deleteVertexArray(Q.vaos[o]),Q.vaos[o]=null}}function Wb(e){K.depthFunc(e)}function zb(e){K.depthMask(!!e)}function $b(e){K.disable(e)}function Gb(e,t,n){K.drawArrays(e,t,n)}function Vb(e,t,n,o){K.drawArraysInstanced(e,t,n,o)}var Fo=[];function Yb(e,t){for(var n=Fo[e],o=0;o<e;o++)n[o]=F[t+o*4>>2];K.drawBuffers(n)}function Kb(e,t,n,o){K.drawElements(e,t,n,o)}function Xb(e,t,n,o,s){K.drawElementsInstanced(e,t,n,o,s)}function Hb(e){K.enable(e)}function qb(e){K.enableVertexAttribArray(e)}function Jb(e,t,n,o){K.framebufferRenderbuffer(e,t,n,Q.renderbuffers[o])}function Qb(e,t,n,o,s){K.framebufferTexture2D(e,t,n,Q.textures[o],s)}function Kr(e,t,n,o){for(var s=0;s<e;s++){var d=K[n](),p=d&&Q.getNewId(o);d?(d.name=p,o[p]=d):Q.recordError(1282),F[t+s*4>>2]=p}}function Zb(e,t){Kr(e,t,"createBuffer",Q.buffers)}function eg(e,t){Kr(e,t,"createFramebuffer",Q.framebuffers)}function tg(e,t){Kr(e,t,"createRenderbuffer",Q.renderbuffers)}function rg(e,t){Kr(e,t,"createTexture",Q.textures)}function ng(e,t){Kr(e,t,"createVertexArray",Q.vaos)}function ig(e){K.generateMipmap(e)}function og(){var e=K.getError()||Q.lastError;return Q.lastError=0,e}function ag(e,t,n){if(!t){Q.recordError(1281);return}var o=void 0;switch(e){case 36346:o=1;break;case 36344:n!=0&&n!=1&&Q.recordError(1280);return;case 34814:case 36345:o=0;break;case 34466:var s=K.getParameter(34467);o=s?s.length:0;break;case 33309:if(Q.currentContext.version<2){Q.recordError(1282);return}var d=K.getSupportedExtensions()||[];o=2*d.length;break;case 33307:case 33308:if(Q.currentContext.version<2){Q.recordError(1280);return}o=e==33307?3:0;break}if(o===void 0){var p=K.getParameter(e);switch(typeof p){case"number":o=p;break;case"boolean":o=p?1:0;break;case"string":Q.recordError(1280);return;case"object":if(p===null)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:{o=0;break}default:{Q.recordError(1280);return}}else if(p instanceof Float32Array||p instanceof Uint32Array||p instanceof Int32Array||p instanceof Array){for(var m=0;m<p.length;++m)switch(n){case 0:F[t+m*4>>2]=p[m];break;case 2:De[t+m*4>>2]=p[m];break;case 4:we[t+m>>0]=p[m]?1:0;break}return}else try{o=p.name|0}catch(S){Q.recordError(1280),Se("GL_INVALID_ENUM in glGet"+n+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+S+")");return}break;default:Q.recordError(1280),Se("GL_INVALID_ENUM in glGet"+n+"v: Native code calling glGet"+n+"v("+e+") and it returns "+p+" of type "+typeof p+"!");return}}switch(n){case 1:Ct(t,o);break;case 0:F[t>>2]=o;break;case 2:De[t>>2]=o;break;case 4:we[t>>0]=o?1:0;break}}function sg(e,t){ag(e,t,0)}function lg(e,t,n,o){var s=K.getProgramInfoLog(Q.programs[e]);s===null&&(s="(unknown error)");var d=t>0&&o?st(s,o,t):0;n&&(F[n>>2]=d)}function ug(e,t,n){if(!n){Q.recordError(1281);return}if(e>=Q.counter){Q.recordError(1281);return}if(e=Q.programs[e],t==35716){var o=K.getProgramInfoLog(e);o===null&&(o="(unknown error)"),F[n>>2]=o.length+1}else if(t==35719){if(!e.maxUniformLength)for(var s=0;s<K.getProgramParameter(e,35718);++s)e.maxUniformLength=Math.max(e.maxUniformLength,K.getActiveUniform(e,s).name.length+1);F[n>>2]=e.maxUniformLength}else if(t==35722){if(!e.maxAttributeLength)for(var s=0;s<K.getProgramParameter(e,35721);++s)e.maxAttributeLength=Math.max(e.maxAttributeLength,K.getActiveAttrib(e,s).name.length+1);F[n>>2]=e.maxAttributeLength}else if(t==35381){if(!e.maxUniformBlockNameLength)for(var s=0;s<K.getProgramParameter(e,35382);++s)e.maxUniformBlockNameLength=Math.max(e.maxUniformBlockNameLength,K.getActiveUniformBlockName(e,s).length+1);F[n>>2]=e.maxUniformBlockNameLength}else F[n>>2]=K.getProgramParameter(e,t)}function cg(e,t,n,o){var s=K.getShaderInfoLog(Q.shaders[e]);s===null&&(s="(unknown error)");var d=t>0&&o?st(s,o,t):0;n&&(F[n>>2]=d)}function fg(e,t,n){if(!n){Q.recordError(1281);return}if(t==35716){var o=K.getShaderInfoLog(Q.shaders[e]);o===null&&(o="(unknown error)");var s=o?o.length+1:0;F[n>>2]=s}else if(t==35720){var d=K.getShaderSource(Q.shaders[e]),p=d?d.length+1:0;F[n>>2]=p}else F[n>>2]=K.getShaderParameter(Q.shaders[e],t)}function Kl(e){return e.slice(-1)=="]"&&e.lastIndexOf("[")}function dg(e){var t=e.uniformLocsById,n=e.uniformSizeAndIdsByName,o,s;if(!t)for(e.uniformLocsById=t={},e.uniformArrayNamesById={},o=0;o<K.getProgramParameter(e,35718);++o){var d=K.getActiveUniform(e,o),p=d.name,m=d.size,S=Kl(p),x=S>0?p.slice(0,S):p,R=e.uniformIdCounter;for(e.uniformIdCounter+=m,n[x]=[m,R],s=0;s<m;++s)t[R]=s,e.uniformArrayNamesById[R++]=x}}function hg(e,t){if(t=Je(t),e=Q.programs[e]){dg(e);var n=e.uniformLocsById,o=0,s=t,d=Kl(t);d>0&&(o=Yr(t.slice(d+1))>>>0,s=t.slice(0,d));var p=e.uniformSizeAndIdsByName[s];if(p&&o<p[0]&&(o+=p[1],n[o]=n[o]||K.getUniformLocation(e,t)))return o}else Q.recordError(1281);return-1}function pg(e,t,n){for(var o=Fo[t],s=0;s<t;s++)o[s]=F[n+s*4>>2];K.invalidateFramebuffer(e,o)}function mg(e){e=Q.programs[e],K.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}}function bg(e,t){e==3317&&(Q.unpackAlignment=t),K.pixelStorei(e,t)}function gg(e,t,n,o){function s(m,S){return m+S-1&-S}var d=e*n,p=s(d,o);return t*p}function yg(e){var t={5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4};return t[e-6402]||1}function xr(e){return e-=5120,e==0?we:e==1?de:e==2?xe:e==4?F:e==6?De:e==5||e==28922||e==28520||e==30779||e==30782?Y:ye}function kr(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}function Po(e,t,n,o,s,d){var p=xr(e),m=kr(p),S=1<<m,x=yg(t)*S,R=gg(n,o,x,Q.unpackAlignment);return p.subarray(s>>m,s+R>>m)}function _g(e,t,n,o,s,d,p){if(Q.currentContext.version>=2){if(K.currentPixelPackBufferBinding)K.readPixels(e,t,n,o,s,d,p);else{var m=xr(d);K.readPixels(e,t,n,o,s,d,m,p>>kr(m))}return}var S=Po(d,s,n,o,p);if(!S){Q.recordError(1280);return}K.readPixels(e,t,n,o,s,d,S)}function vg(e,t,n,o){K.renderbufferStorage(e,t,n,o)}function wg(e,t,n,o,s){K.renderbufferStorageMultisample(e,t,n,o,s)}function Eg(e,t,n,o){var s=Q.getSource(e,t,n,o);K.shaderSource(Q.shaders[e],s)}function Sg(e,t,n,o,s,d,p,m,S){if(Q.currentContext.version>=2){if(K.currentPixelUnpackBufferBinding)K.texImage2D(e,t,n,o,s,d,p,m,S);else if(S){var x=xr(m);K.texImage2D(e,t,n,o,s,d,p,m,x,S>>kr(x))}else K.texImage2D(e,t,n,o,s,d,p,m,null);return}K.texImage2D(e,t,n,o,s,d,p,m,S?Po(m,p,o,s,S):null)}function Cg(e,t,n,o,s,d,p,m,S,x){if(K.currentPixelUnpackBufferBinding)K.texImage3D(e,t,n,o,s,d,p,m,S,x);else if(x){var R=xr(S);K.texImage3D(e,t,n,o,s,d,p,m,S,R,x>>kr(R))}else K.texImage3D(e,t,n,o,s,d,p,m,S,null)}function Tg(e,t,n){K.texParameteri(e,t,n)}function xg(e,t,n,o,s){K.texStorage2D(e,t,n,o,s)}function kg(e,t,n,o,s,d,p,m,S){if(Q.currentContext.version>=2){if(K.currentPixelUnpackBufferBinding)K.texSubImage2D(e,t,n,o,s,d,p,m,S);else if(S){var x=xr(m);K.texSubImage2D(e,t,n,o,s,d,p,m,x,S>>kr(x))}else K.texSubImage2D(e,t,n,o,s,d,p,m,null);return}var R=null;S&&(R=Po(m,p,s,d,S)),K.texSubImage2D(e,t,n,o,s,d,p,m,R)}function Ag(e,t,n,o,s,d,p,m,S,x,R){if(K.currentPixelUnpackBufferBinding)K.texSubImage3D(e,t,n,o,s,d,p,m,S,x,R);else if(R){var W=xr(x);K.texSubImage3D(e,t,n,o,s,d,p,m,S,x,W,R>>kr(W))}else K.texSubImage3D(e,t,n,o,s,d,p,m,S,x,null)}function Xl(e){var t=K.currentProgram;if(t){var n=t.uniformLocsById[e];return typeof n=="number"&&(t.uniformLocsById[e]=n=K.getUniformLocation(t,t.uniformArrayNamesById[e]+(n>0?"["+n+"]":""))),n}else Q.recordError(1282)}function Rg(e,t){K.uniform1i(Xl(e),t)}function Lg(e,t){K.uniform1ui(Xl(e),t)}function Fg(e){e=Q.programs[e],K.useProgram(e),K.currentProgram=e}function Pg(e,t,n,o,s){K.vertexAttribIPointer(e,t,n,o,s)}function Ig(e,t,n,o,s,d){K.vertexAttribPointer(e,t,n,!!o,s,d)}function Dg(e,t,n,o){K.viewport(e,t,n,o)}var Mg=(e,t)=>{for(var n=0,o=0;o<=t;n+=e[o++]);return n},Hl=[31,29,31,30,31,30,31,31,30,31,30,31],ql=[31,28,31,30,31,30,31,31,30,31,30,31],jg=(e,t)=>{for(var n=new Date(e.getTime());t>0;){var o=Gr(n.getFullYear()),s=n.getMonth(),d=(o?Hl:ql)[s];if(t>d-n.getDate())t-=d-n.getDate()+1,n.setDate(1),s<11?n.setMonth(s+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1));else return n.setDate(n.getDate()+t),n}return n},Og=(e,t)=>{we.set(e,t)},Jl=(e,t,n,o)=>{var s=F[o+40>>2],d={tm_sec:F[o>>2],tm_min:F[o+4>>2],tm_hour:F[o+8>>2],tm_mday:F[o+12>>2],tm_mon:F[o+16>>2],tm_year:F[o+20>>2],tm_wday:F[o+24>>2],tm_yday:F[o+28>>2],tm_isdst:F[o+32>>2],tm_gmtoff:F[o+36>>2],tm_zone:s?Je(s):""},p=Je(n),m={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var S in m)p=p.replace(new RegExp(S,"g"),m[S]);var x=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],R=["January","February","March","April","May","June","July","August","September","October","November","December"];function W(V,Z,be){for(var Te=typeof V=="number"?V.toString():V||"";Te.length<Z;)Te=be[0]+Te;return Te}function O(V,Z){return W(V,Z,"0")}function G(V,Z){function be(ae){return ae<0?-1:ae>0?1:0}var Te;return(Te=be(V.getFullYear()-Z.getFullYear()))===0&&(Te=be(V.getMonth()-Z.getMonth()))===0&&(Te=be(V.getDate()-Z.getDate())),Te}function ie(V){switch(V.getDay()){case 0:return new Date(V.getFullYear()-1,11,29);case 1:return V;case 2:return new Date(V.getFullYear(),0,3);case 3:return new Date(V.getFullYear(),0,2);case 4:return new Date(V.getFullYear(),0,1);case 5:return new Date(V.getFullYear()-1,11,31);case 6:return new Date(V.getFullYear()-1,11,30)}}function ue(V){var Z=jg(new Date(V.tm_year+1900,0,1),V.tm_yday),be=new Date(Z.getFullYear(),0,4),Te=new Date(Z.getFullYear()+1,0,4),ae=ie(be),lt=ie(Te);return G(ae,Z)<=0?G(lt,Z)<=0?Z.getFullYear()+1:Z.getFullYear():Z.getFullYear()-1}var ce={"%a":V=>x[V.tm_wday].substring(0,3),"%A":V=>x[V.tm_wday],"%b":V=>R[V.tm_mon].substring(0,3),"%B":V=>R[V.tm_mon],"%C":V=>{var Z=V.tm_year+1900;return O(Z/100|0,2)},"%d":V=>O(V.tm_mday,2),"%e":V=>W(V.tm_mday,2," "),"%g":V=>ue(V).toString().substring(2),"%G":V=>ue(V),"%H":V=>O(V.tm_hour,2),"%I":V=>{var Z=V.tm_hour;return Z==0?Z=12:Z>12&&(Z-=12),O(Z,2)},"%j":V=>O(V.tm_mday+Mg(Gr(V.tm_year+1900)?Hl:ql,V.tm_mon-1),3),"%m":V=>O(V.tm_mon+1,2),"%M":V=>O(V.tm_min,2),"%n":()=>`
`,"%p":V=>V.tm_hour>=0&&V.tm_hour<12?"AM":"PM","%S":V=>O(V.tm_sec,2),"%t":()=>"	","%u":V=>V.tm_wday||7,"%U":V=>{var Z=V.tm_yday+7-V.tm_wday;return O(Math.floor(Z/7),2)},"%V":V=>{var Z=Math.floor((V.tm_yday+7-(V.tm_wday+6)%7)/7);if((V.tm_wday+371-V.tm_yday-2)%7<=2&&Z++,Z){if(Z==53){var be=(V.tm_wday+371-V.tm_yday)%7;be!=4&&(be!=3||!Gr(V.tm_year))&&(Z=1)}}else{Z=52;var Te=(V.tm_wday+7-V.tm_yday-1)%7;(Te==4||Te==5&&Gr(V.tm_year%400-1))&&Z++}return O(Z,2)},"%w":V=>V.tm_wday,"%W":V=>{var Z=V.tm_yday+7-(V.tm_wday+6)%7;return O(Math.floor(Z/7),2)},"%y":V=>(V.tm_year+1900).toString().substring(2),"%Y":V=>V.tm_year+1900,"%z":V=>{var Z=V.tm_gmtoff,be=Z>=0;return Z=Math.abs(Z)/60,Z=Z/60*100+Z%60,(be?"+":"-")+("0000"+Z).slice(-4)},"%Z":V=>V.tm_zone,"%%":()=>"%"};p=p.replace(/%%/g,"\0\0");for(var S in ce)p.includes(S)&&(p=p.replace(new RegExp(S,"g"),ce[S](d)));p=p.replace(/\0\0/g,"%");var he=An(p,!1);return he.length>t?0:(Og(he,e),he.length-1)},Ng=(e,t,n,o,s)=>Jl(e,t,n,o),Ql=function(e,t,n,o){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=y.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=o},Yn=365,Kn=146;Object.defineProperties(Ql.prototype,{read:{get:function(){return(this.mode&Yn)===Yn},set:function(e){e?this.mode|=Yn:this.mode&=~Yn}},write:{get:function(){return(this.mode&Kn)===Kn},set:function(e){e?this.mode|=Kn:this.mode&=~Kn}},isFolder:{get:function(){return y.isDir(this.mode)}},isDevice:{get:function(){return y.isChrdev(this.mode)}}}),y.FSNode=Ql,y.createPreloadedFile=mp,y.staticInit(),i.FS_createPath=y.createPath,i.FS_createDataFile=y.createDataFile,i.FS_createPreloadedFile=y.createPreloadedFile,i.FS_unlink=y.unlink,i.FS_createLazyFile=y.createLazyFile,i.FS_createDevice=y.createDevice,jp(),Cr=i.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},Tl=i.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Zp(),Vp(),um(),Fl=i.UnboundTypeError=hm(Error,"UnboundTypeError"),_m(),wm(),i.requestFullscreen=function(e,t){z.requestFullscreen(e,t)},i.requestAnimationFrame=function(e){z.requestAnimationFrame(e)},i.setCanvasSize=function(e,t,n){z.setCanvasSize(e,t,n)},i.pauseMainLoop=function(){z.mainLoop.pause()},i.resumeMainLoop=function(){z.mainLoop.resume()},i.getUserMedia=function(){z.getUserMedia()},i.createContext=function(e,t,n,o){return z.createContext(e,t,n,o)},it.init();for(var K,Io=0;Io<32;++Io)Fo.push(new Array(Io));var Zl={__cxa_throw:He,__syscall_chmod:gp,__syscall_fchmod:yp,__syscall_fcntl64:vp,__syscall_fstat64:wp,__syscall_ftruncate64:Ep,__syscall_getcwd:Sp,__syscall_getdents64:Cp,__syscall_ioctl:Tp,__syscall_lstat64:xp,__syscall_mkdirat:kp,__syscall_newfstatat:Ap,__syscall_openat:Rp,__syscall_readlinkat:Lp,__syscall_renameat:Fp,__syscall_stat64:Pp,__syscall_symlink:Ip,__syscall_unlinkat:Dp,_embind_register_bigint:Mp,_embind_register_bool:Np,_embind_register_class:pm,_embind_register_class_class_function:mm,_embind_register_class_constructor:bm,_embind_register_class_function:gm,_embind_register_class_property:ym,_embind_register_emval:Em,_embind_register_enum:Cm,_embind_register_enum_value:Tm,_embind_register_float:km,_embind_register_function:Am,_embind_register_integer:Lm,_embind_register_memory_view:Fm,_embind_register_smart_ptr:Pm,_embind_register_std_string:Im,_embind_register_std_wstring:Um,_embind_register_void:Wm,_emscripten_fetch_free:zm,_emscripten_get_now_is_monotonic:Gm,_emval_as:Vm,_emval_call:Ym,_emval_call_method:Hm,_emval_call_void_method:qm,_emval_decref:To,_emval_get_method_caller:Qm,_emval_get_module_property:Zm,_emval_get_property:e0,_emval_incref:t0,_emval_is_number:r0,_emval_new_cstring:n0,_emval_run_destructors:i0,_emval_set_property:o0,_emval_take_value:a0,_gmtime_js:s0,_localtime_js:c0,_mktime_js:f0,_mmap_js:d0,_munmap_js:h0,_tzset_js:p0,abort:m0,alBufferData:v0,alDeleteBuffers:w0,alDeleteSources:E0,alGenBuffers:S0,alGenSources:C0,alGetError:T0,alGetSourcei:x0,alGetString:k0,alSourcePause:A0,alSourcePlay:R0,alSourceStop:L0,alSourcef:F0,alSourcei:zl,alcCloseDevice:P0,alcCreateContext:D0,alcDestroyContext:M0,alcGetError:j0,alcGetString:O0,alcMakeContextCurrent:N0,alcOpenDevice:B0,bnb_get_random_value:b,bnb_randombytes_init_if_needed:A,create_video:C,delete_video:T,emscripten_date_now:U0,emscripten_get_heap_max:W0,emscripten_get_now:$n,emscripten_is_main_browser_thread:z0,emscripten_memcpy_big:$0,emscripten_resize_heap:V0,emscripten_start_fetch:X0,environ_get:J0,environ_sizes_get:Q0,exit:Ul,fd_close:Z0,fd_fdstat_get:eb,fd_read:rb,fd_seek:nb,fd_sync:ib,fd_write:ab,get_current_hostname:Ve,get_user_id_web:f,getaddrinfo:ub,getentropy:cb,glActiveTexture:fb,glAttachShader:db,glBindBuffer:hb,glBindBufferRange:pb,glBindFramebuffer:mb,glBindRenderbuffer:bb,glBindTexture:gb,glBindVertexArray:yb,glBlendEquation:_b,glBlendFunc:vb,glBlendFuncSeparate:wb,glBlitFramebuffer:Eb,glBufferData:Sb,glBufferSubData:Cb,glClearBufferfv:Tb,glColorMask:xb,glCompileShader:Ab,glCompressedTexImage2D:Rb,glCompressedTexImage3D:Lb,glCreateProgram:Fb,glCreateShader:Pb,glDeleteBuffers:Ib,glDeleteFramebuffers:Mb,glDeleteProgram:jb,glDeleteRenderbuffers:Ob,glDeleteShader:Nb,glDeleteTextures:Bb,glDeleteVertexArrays:Ub,glDepthFunc:Wb,glDepthMask:zb,glDisable:$b,glDrawArrays:Gb,glDrawArraysInstanced:Vb,glDrawBuffers:Yb,glDrawElements:Kb,glDrawElementsInstanced:Xb,glEnable:Hb,glEnableVertexAttribArray:qb,glFramebufferRenderbuffer:Jb,glFramebufferTexture2D:Qb,glGenBuffers:Zb,glGenFramebuffers:eg,glGenRenderbuffers:tg,glGenTextures:rg,glGenVertexArrays:ng,glGenerateMipmap:ig,glGetError:og,glGetIntegerv:sg,glGetProgramInfoLog:lg,glGetProgramiv:ug,glGetShaderInfoLog:cg,glGetShaderiv:fg,glGetUniformLocation:hg,glInvalidateFramebuffer:pg,glLinkProgram:mg,glPixelStorei:bg,glReadPixels:_g,glRenderbufferStorage:vg,glRenderbufferStorageMultisample:wg,glShaderSource:Eg,glTexImage2D:Sg,glTexImage3D:Cg,glTexParameteri:Tg,glTexStorage2D:xg,glTexSubImage2D:kg,glTexSubImage3D:Ag,glUniform1i:Rg,glUniform1ui:Lg,glUseProgram:Fg,glVertexAttribIPointer:Pg,glVertexAttribPointer:Ig,glViewport:Dg,is_electron:ke,strftime:Jl,strftime_l:Ng,xnnLoadWasmModuleJS:l};U();var Wt=i._malloc=function(){return(Wt=i._malloc=i.asm.malloc).apply(null,arguments)},eu=function(){return(eu=i.asm.__errno_location).apply(null,arguments)},zt=i._free=function(){return(zt=i._free=i.asm.free).apply(null,arguments)},tu=function(){return(tu=i.asm.__getTypeName).apply(null,arguments)};i.__embind_initialize_bindings=function(){return(i.__embind_initialize_bindings=i.asm._embind_initialize_bindings).apply(null,arguments)};var Xn=function(){return(Xn=i.asm.htonl).apply(null,arguments)},Hn=function(){return(Hn=i.asm.htons).apply(null,arguments)},ru=function(){return(ru=i.asm.emscripten_builtin_memalign).apply(null,arguments)},nu=function(){return(nu=i.asm.ntohs).apply(null,arguments)},iu=function(){return(iu=i.asm.setTempRet0).apply(null,arguments)},ou=function(){return(ou=i.asm.__cxa_is_pointer_type).apply(null,arguments)};i.dynCall_jii=function(){return(i.dynCall_jii=i.asm.dynCall_jii).apply(null,arguments)},i.dynCall_jiii=function(){return(i.dynCall_jiii=i.asm.dynCall_jiii).apply(null,arguments)},i.dynCall_viiij=function(){return(i.dynCall_viiij=i.asm.dynCall_viiij).apply(null,arguments)},i.dynCall_viijjiii=function(){return(i.dynCall_viijjiii=i.asm.dynCall_viijjiii).apply(null,arguments)},i.dynCall_iiiiji=function(){return(i.dynCall_iiiiji=i.asm.dynCall_iiiiji).apply(null,arguments)},i.dynCall_iiiijii=function(){return(i.dynCall_iiiijii=i.asm.dynCall_iiiijii).apply(null,arguments)},i.dynCall_iijjj=function(){return(i.dynCall_iijjj=i.asm.dynCall_iijjj).apply(null,arguments)},i.dynCall_viij=function(){return(i.dynCall_viij=i.asm.dynCall_viij).apply(null,arguments)},i.dynCall_ji=function(){return(i.dynCall_ji=i.asm.dynCall_ji).apply(null,arguments)},i.dynCall_iiffj=function(){return(i.dynCall_iiffj=i.asm.dynCall_iiffj).apply(null,arguments)},i.dynCall_vijjiii=function(){return(i.dynCall_vijjiii=i.asm.dynCall_vijjiii).apply(null,arguments)},i.dynCall_viiiji=function(){return(i.dynCall_viiiji=i.asm.dynCall_viiiji).apply(null,arguments)},i.dynCall_viiijii=function(){return(i.dynCall_viiijii=i.asm.dynCall_viiijii).apply(null,arguments)},i.dynCall_vij=function(){return(i.dynCall_vij=i.asm.dynCall_vij).apply(null,arguments)},i.dynCall_iiiiiij=function(){return(i.dynCall_iiiiiij=i.asm.dynCall_iiiiiij).apply(null,arguments)},i.dynCall_viijji=function(){return(i.dynCall_viijji=i.asm.dynCall_viijji).apply(null,arguments)},i.dynCall_viiiij=function(){return(i.dynCall_viiiij=i.asm.dynCall_viiiij).apply(null,arguments)},i.dynCall_viiiiji=function(){return(i.dynCall_viiiiji=i.asm.dynCall_viiiiji).apply(null,arguments)},i.dynCall_iiiji=function(){return(i.dynCall_iiiji=i.asm.dynCall_iiiji).apply(null,arguments)},i.dynCall_jijjiii=function(){return(i.dynCall_jijjiii=i.asm.dynCall_jijjiii).apply(null,arguments)},i.dynCall_jijiii=function(){return(i.dynCall_jijiii=i.asm.dynCall_jijiii).apply(null,arguments)},i.dynCall_jijiiii=function(){return(i.dynCall_jijiiii=i.asm.dynCall_jijiiii).apply(null,arguments)},i.dynCall_jijii=function(){return(i.dynCall_jijii=i.asm.dynCall_jijii).apply(null,arguments)},i.dynCall_jijiiiiii=function(){return(i.dynCall_jijiiiiii=i.asm.dynCall_jijiiiiii).apply(null,arguments)},i.dynCall_jijj=function(){return(i.dynCall_jijj=i.asm.dynCall_jijj).apply(null,arguments)},i.dynCall_viji=function(){return(i.dynCall_viji=i.asm.dynCall_viji).apply(null,arguments)},i.dynCall_iijijjji=function(){return(i.dynCall_iijijjji=i.asm.dynCall_iijijjji).apply(null,arguments)},i.dynCall_iiji=function(){return(i.dynCall_iiji=i.asm.dynCall_iiji).apply(null,arguments)},i.dynCall_iiiij=function(){return(i.dynCall_iiiij=i.asm.dynCall_iiiij).apply(null,arguments)},i.dynCall_jijij=function(){return(i.dynCall_jijij=i.asm.dynCall_jijij).apply(null,arguments)},i.dynCall_iijijji=function(){return(i.dynCall_iijijji=i.asm.dynCall_iijijji).apply(null,arguments)},i.dynCall_jiiii=function(){return(i.dynCall_jiiii=i.asm.dynCall_jiiii).apply(null,arguments)},i.dynCall_jij=function(){return(i.dynCall_jij=i.asm.dynCall_jij).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)},i.dynCall_viiijj=function(){return(i.dynCall_viiijj=i.asm.dynCall_viiijj).apply(null,arguments)},i.dynCall_iiij=function(){return(i.dynCall_iiij=i.asm.dynCall_iiij).apply(null,arguments)},i.dynCall_iijii=function(){return(i.dynCall_iijii=i.asm.dynCall_iijii).apply(null,arguments)},i.dynCall_iiijiji=function(){return(i.dynCall_iiijiji=i.asm.dynCall_iiijiji).apply(null,arguments)},i.dynCall_iiijiii=function(){return(i.dynCall_iiijiii=i.asm.dynCall_iiijiii).apply(null,arguments)},i.dynCall_viijii=function(){return(i.dynCall_viijii=i.asm.dynCall_viijii).apply(null,arguments)},i.dynCall_iiiiij=function(){return(i.dynCall_iiiiij=i.asm.dynCall_iiiiij).apply(null,arguments)},i.dynCall_iiiiijj=function(){return(i.dynCall_iiiiijj=i.asm.dynCall_iiiiijj).apply(null,arguments)},i.dynCall_iiiiiijj=function(){return(i.dynCall_iiiiiijj=i.asm.dynCall_iiiiiijj).apply(null,arguments)},i.dynCall_jjj=function(){return(i.dynCall_jjj=i.asm.dynCall_jjj).apply(null,arguments)},i.dynCall_iiiijj=function(){return(i.dynCall_iiiijj=i.asm.dynCall_iiiijj).apply(null,arguments)},i.dynCall_viijj=function(){return(i.dynCall_viijj=i.asm.dynCall_viijj).apply(null,arguments)},i.dynCall_viiijjj=function(){return(i.dynCall_viiijjj=i.asm.dynCall_viiijjj).apply(null,arguments)},i.dynCall_iiijj=function(){return(i.dynCall_iiijj=i.asm.dynCall_iiijj).apply(null,arguments)},i.dynCall_viijjj=function(){return(i.dynCall_viijjj=i.asm.dynCall_viijjj).apply(null,arguments)},i.___start_em_js=1334580,i.___stop_em_js=1337732,i.addRunDependency=bt,i.removeRunDependency=nt,i.FS_createPath=y.createPath,i.FS_createDataFile=y.createDataFile,i.FS_createLazyFile=y.createLazyFile,i.FS_createDevice=y.createDevice,i.FS_unlink=y.unlink,i.stringToNewUTF8=Tr,i.FS_createPreloadedFile=y.createPreloadedFile,i.FS=y,i.GL=Q;var qn;Xe=function e(){qn||au(),qn||(Xe=e)};function au(){if(tt>0||(_e(),tt>0))return;function e(){qn||(qn=!0,i.calledRun=!0,!Le&&(Re(),c(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),vt()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),e()},1)):e()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return au(),$l=function(){},a.ready}})();const tc=ec,rc=()=>{const r=document.createElement("canvas");return r.style.maxWidth="100%",r.style.objectFit="cover",r},ma=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),nc=r=>(r!==""&&!r.endsWith("/")&&(r+="/"),a=>r+a),ic=r=>a=>r[a],oc=async(r,a={})=>{if(await ma())a.info?.('The platform supports SIMD. Going to use "BanubaSDK.simd.wasm"');else return a.info?.('The platform does not support SIMD. Using "BanubaSDK.wasm"'),r;const i=r("BanubaSDK.simd.wasm");return i?await fetch(i,{method:"HEAD"}).then(c=>c.ok)?c=>{const[g,v]=c.split(".");if(v!=="wasm")return r(c);const w=[g,"simd",v].join(".");return r(w)}:(a.warn?.(`Unable to fetch "BanubaSDK.simd.wasm" from the "${i}". Using "BanubaSDK.wasm" as a fallback`),r):(a.warn?.('"BanubaSDK.simd.wasm" is missing in the "locateFile" option. Using "BanubaSDK.wasm" as a fallback'),r)},ac=(()=>{try{return new URL(".",document.currentScript.src).toString()}catch{return""}})(),sc=async(r,a)=>(typeof r>"u"&&(r=ac),typeof r=="string"&&(r=nc(r)),typeof r=="object"&&(r=ic(r)),r=await oc(r,a),r);var Pr=(r=>(r.ERROR="error",r.WARNING="warn",r.INFO="info",r.DEBUG="debug",r))(Pr||{});function lc(r){const a=Object.keys(Pr).reverse().find(c=>typeof r[Pr[c]]=="function")??"ERROR",i=c=>{for(const v in Pr)if(c.includes(v)){const w=r[Pr[v]];if(typeof w=="function"){w.call(r,c);return}}const g=r.debug;typeof g=="function"&&g.call(r,c)};return{logLevel:a,print:i,printErr:i}}const uc=["isAliasOf","clone","delete","isDeleted","deleteLater"],cc=["size","get","set","push_back"],ba=r=>{if(r==null||typeof r!="function")return!1;const{prototype:a}=r;return a?uc.every(i=>i in a):!1},ga=r=>r==null||typeof r!="object"?!1:ba(r.constructor),ya=r=>ga(r)&&cc.every(a=>a in r),fc=(r,a)=>new Proxy(r,{get(i,c){const g=i[c];return typeof g=="function"?_a(g,a):g}}),_a=(r,a)=>new Proxy(r,{apply(i,c,g){try{const v=i.apply(c,g);return ga(v)?fc(v,a):v}catch(v){throw typeof v=="number"&&(v=new Error(a(v))),v}}}),dc=(r,a)=>new Proxy(r,{construct(i,c){try{return new i(...c)}catch(g){throw typeof g=="number"&&(g=new Error(a(g))),g}},get(i,c){const g=i[c];return typeof g=="function"?_a(g,a):g}}),hc=(r,a)=>{for(const[i,c]of Object.entries(r))ba(c)&&Object.defineProperty(r,i,{value:dc(c,a)})},pc="recognizer_features_update";async function va({clientToken:r,locateFile:a,canvas:i=rc(),logger:c={warn:console.warn,error:console.error},...g}){const v=await sc(a,c),{logLevel:w,print:_,printErr:I}=lc(c),D=await new Promise((B,te)=>tc({locateFile:v,print:_,printErr:I,onAbort:H=>{H instanceof WebAssembly.CompileError&&te(new Error(`Failed to compile "BanubaSDK.wasm": the file "${v("BanubaSDK.wasm")}" is invalid. This error is usually caused by misconfigured "locateFile" option, see https://docs.banuba.com/face-ar-sdk-v1/generated/typedoc/modules.html#SDKOptions. Original Error: `+H))},...g}).then(B,te));return hc(D,B=>D.getExceptionMessage(B)),D.UtilityManager.initialize(new D.VectorString,r),D.UtilityManager.setLogLevel(D.SeverityLevel[w]),D.setCanvasSize=(B,te)=>{Object.assign(i,{width:B,height:te})},D.createContext(i,!0,!0,{alpha:!0,antialias:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0,stencil:!1}),D.canvas=i,wa(D.ctx),D}function wa(r){const a=["EXT_color_buffer_half_float","EXT_color_buffer_float"];for(const i of a)r.getExtension(i)}var ct=(r=>(r[r.Running=0]="Running",r[r.Idle=1]="Idle",r[r.Paused=2]="Paused",r))(ct||{}),Ea={exports:{}},pi={exports:{}},Ht={},Ir={};Ir.byteLength=gc,Ir.toByteArray=_c,Ir.fromByteArray=Ec;for(var Pt=[],xt=[],mc=typeof Uint8Array<"u"?Uint8Array:Array,mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pr=0,bc=mi.length;pr<bc;++pr)Pt[pr]=mi[pr],xt[mi.charCodeAt(pr)]=pr;xt["-".charCodeAt(0)]=62,xt["_".charCodeAt(0)]=63;function Sa(r){var a=r.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=r.indexOf("=");i===-1&&(i=a);var c=i===a?0:4-i%4;return[i,c]}function gc(r){var a=Sa(r),i=a[0],c=a[1];return(i+c)*3/4-c}function yc(r,a,i){return(a+i)*3/4-i}function _c(r){var a,i=Sa(r),c=i[0],g=i[1],v=new mc(yc(r,c,g)),w=0,_=g>0?c-4:c,I;for(I=0;I<_;I+=4)a=xt[r.charCodeAt(I)]<<18|xt[r.charCodeAt(I+1)]<<12|xt[r.charCodeAt(I+2)]<<6|xt[r.charCodeAt(I+3)],v[w++]=a>>16&255,v[w++]=a>>8&255,v[w++]=a&255;return g===2&&(a=xt[r.charCodeAt(I)]<<2|xt[r.charCodeAt(I+1)]>>4,v[w++]=a&255),g===1&&(a=xt[r.charCodeAt(I)]<<10|xt[r.charCodeAt(I+1)]<<4|xt[r.charCodeAt(I+2)]>>2,v[w++]=a>>8&255,v[w++]=a&255),v}function vc(r){return Pt[r>>18&63]+Pt[r>>12&63]+Pt[r>>6&63]+Pt[r&63]}function wc(r,a,i){for(var c,g=[],v=a;v<i;v+=3)c=(r[v]<<16&16711680)+(r[v+1]<<8&65280)+(r[v+2]&255),g.push(vc(c));return g.join("")}function Ec(r){for(var a,i=r.length,c=i%3,g=[],v=16383,w=0,_=i-c;w<_;w+=v)g.push(wc(r,w,w+v>_?_:w+v));return c===1?(a=r[i-1],g.push(Pt[a>>2]+Pt[a<<4&63]+"==")):c===2&&(a=(r[i-2]<<8)+r[i-1],g.push(Pt[a>>10]+Pt[a>>4&63]+Pt[a<<2&63]+"=")),g.join("")}var tn={};tn.read=function(r,a,i,c,g){var v,w,_=g*8-c-1,I=(1<<_)-1,D=I>>1,B=-7,te=i?g-1:0,H=i?-1:1,re=r[a+te];for(te+=H,v=re&(1<<-B)-1,re>>=-B,B+=_;B>0;v=v*256+r[a+te],te+=H,B-=8);for(w=v&(1<<-B)-1,v>>=-B,B+=c;B>0;w=w*256+r[a+te],te+=H,B-=8);if(v===0)v=1-D;else{if(v===I)return w?NaN:(re?-1:1)*(1/0);w=w+Math.pow(2,c),v=v-D}return(re?-1:1)*w*Math.pow(2,v-c)},tn.write=function(r,a,i,c,g,v){var w,_,I,D=v*8-g-1,B=(1<<D)-1,te=B>>1,H=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=c?0:v-1,X=c?1:-1,Se=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(_=isNaN(a)?1:0,w=B):(w=Math.floor(Math.log(a)/Math.LN2),a*(I=Math.pow(2,-w))<1&&(w--,I*=2),w+te>=1?a+=H/I:a+=H*Math.pow(2,1-te),a*I>=2&&(w++,I/=2),w+te>=B?(_=0,w=B):w+te>=1?(_=(a*I-1)*Math.pow(2,g),w=w+te):(_=a*Math.pow(2,te-1)*Math.pow(2,g),w=0));g>=8;r[i+re]=_&255,re+=X,_/=256,g-=8);for(w=w<<g|_,D+=g;D>0;r[i+re]=w&255,re+=X,w/=256,D-=8);r[i+re-X]|=Se*128};(function(r){const a=Ir,i=tn,c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=_,r.SlowBuffer=J,r.INSPECT_MAX_BYTES=50;const g=2147483647;r.kMaxLength=g,_.TYPED_ARRAY_SUPPORT=v(),!_.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function v(){try{const l=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(l,f),l.foo()===42}catch{return!1}}Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}});function w(l){if(l>g)throw new RangeError('The value "'+l+'" is invalid for option "size"');const f=new Uint8Array(l);return Object.setPrototypeOf(f,_.prototype),f}function _(l,f,b){if(typeof l=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return te(l)}return I(l,f,b)}_.poolSize=8192;function I(l,f,b){if(typeof l=="string")return H(l,f);if(ArrayBuffer.isView(l))return X(l);if(l==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(ee(l,ArrayBuffer)||l&&ee(l.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ee(l,SharedArrayBuffer)||l&&ee(l.buffer,SharedArrayBuffer)))return Se(l,f,b);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const A=l.valueOf&&l.valueOf();if(A!=null&&A!==l)return _.from(A,f,b);const M=fe(l);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return _.from(l[Symbol.toPrimitive]("string"),f,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}_.from=function(l,f,b){return I(l,f,b)},Object.setPrototypeOf(_.prototype,Uint8Array.prototype),Object.setPrototypeOf(_,Uint8Array);function D(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function B(l,f,b){return D(l),l<=0?w(l):f!==void 0?typeof b=="string"?w(l).fill(f,b):w(l).fill(f):w(l)}_.alloc=function(l,f,b){return B(l,f,b)};function te(l){return D(l),w(l<0?0:ge(l)|0)}_.allocUnsafe=function(l){return te(l)},_.allocUnsafeSlow=function(l){return te(l)};function H(l,f){if((typeof f!="string"||f==="")&&(f="utf8"),!_.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const b=Le(l,f)|0;let A=w(b);const M=A.write(l,f);return M!==b&&(A=A.slice(0,M)),A}function re(l){const f=l.length<0?0:ge(l.length)|0,b=w(f);for(let A=0;A<f;A+=1)b[A]=l[A]&255;return b}function X(l){if(ee(l,Uint8Array)){const f=new Uint8Array(l);return Se(f.buffer,f.byteOffset,f.byteLength)}return re(l)}function Se(l,f,b){if(f<0||l.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<f+(b||0))throw new RangeError('"length" is outside of buffer bounds');let A;return f===void 0&&b===void 0?A=new Uint8Array(l):b===void 0?A=new Uint8Array(l,f):A=new Uint8Array(l,f,b),Object.setPrototypeOf(A,_.prototype),A}function fe(l){if(_.isBuffer(l)){const f=ge(l.length)|0,b=w(f);return b.length===0||l.copy(b,0,0,f),b}if(l.length!==void 0)return typeof l.length!="number"||ke(l.length)?w(0):re(l);if(l.type==="Buffer"&&Array.isArray(l.data))return re(l.data)}function ge(l){if(l>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return l|0}function J(l){return+l!=l&&(l=0),_.alloc(+l)}_.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==_.prototype},_.compare=function(l,f){if(ee(l,Uint8Array)&&(l=_.from(l,l.offset,l.byteLength)),ee(f,Uint8Array)&&(f=_.from(f,f.offset,f.byteLength)),!_.isBuffer(l)||!_.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===f)return 0;let b=l.length,A=f.length;for(let M=0,$=Math.min(b,A);M<$;++M)if(l[M]!==f[M]){b=l[M],A=f[M];break}return b<A?-1:A<b?1:0},_.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(l,f){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return _.alloc(0);let b;if(f===void 0)for(f=0,b=0;b<l.length;++b)f+=l[b].length;const A=_.allocUnsafe(f);let M=0;for(b=0;b<l.length;++b){let $=l[b];if(ee($,Uint8Array))M+$.length>A.length?(_.isBuffer($)||($=_.from($)),$.copy(A,M)):Uint8Array.prototype.set.call(A,$,M);else if(_.isBuffer($))$.copy(A,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=$.length}return A};function Le(l,f){if(_.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||ee(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);const b=l.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&b===0)return 0;let M=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return h(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return U(l).length;default:if(M)return A?-1:h(l).length;f=(""+f).toLowerCase(),M=!0}}_.byteLength=Le;function We(l,f,b){let A=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,f>>>=0,b<=f))return"";for(l||(l="utf8");;)switch(l){case"hex":return at(this,f,b);case"utf8":case"utf-8":return Ce(this,f,b);case"ascii":return ze(this,f,b);case"latin1":case"binary":return Oe(this,f,b);case"base64":return Pe(this,f,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,f,b);default:if(A)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),A=!0}}_.prototype._isBuffer=!0;function pe(l,f,b){const A=l[f];l[f]=l[b],l[b]=A}_.prototype.swap16=function(){const l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<l;f+=2)pe(this,f,f+1);return this},_.prototype.swap32=function(){const l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<l;f+=4)pe(this,f,f+3),pe(this,f+1,f+2);return this},_.prototype.swap64=function(){const l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<l;f+=8)pe(this,f,f+7),pe(this,f+1,f+6),pe(this,f+2,f+5),pe(this,f+3,f+4);return this},_.prototype.toString=function(){const l=this.length;return l===0?"":arguments.length===0?Ce(this,0,l):We.apply(this,arguments)},_.prototype.toLocaleString=_.prototype.toString,_.prototype.equals=function(l){if(!_.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:_.compare(this,l)===0},_.prototype.inspect=function(){let l="";const f=r.INSPECT_MAX_BYTES;return l=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(l+=" ... "),"<Buffer "+l+">"},c&&(_.prototype[c]=_.prototype.inspect),_.prototype.compare=function(l,f,b,A,M){if(ee(l,Uint8Array)&&(l=_.from(l,l.offset,l.byteLength)),!_.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(f===void 0&&(f=0),b===void 0&&(b=l?l.length:0),A===void 0&&(A=0),M===void 0&&(M=this.length),f<0||b>l.length||A<0||M>this.length)throw new RangeError("out of range index");if(A>=M&&f>=b)return 0;if(A>=M)return-1;if(f>=b)return 1;if(f>>>=0,b>>>=0,A>>>=0,M>>>=0,this===l)return 0;let $=M-A,ne=b-f;const je=Math.min($,ne),He=this.slice(A,M),me=l.slice(f,b);for(let Me=0;Me<je;++Me)if(He[Me]!==me[Me]){$=He[Me],ne=me[Me];break}return $<ne?-1:ne<$?1:0};function we(l,f,b,A,M){if(l.length===0)return-1;if(typeof b=="string"?(A=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,ke(b)&&(b=M?0:l.length-1),b<0&&(b=l.length+b),b>=l.length){if(M)return-1;b=l.length-1}else if(b<0)if(M)b=0;else return-1;if(typeof f=="string"&&(f=_.from(f,A)),_.isBuffer(f))return f.length===0?-1:de(l,f,b,A,M);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(l,f,b):Uint8Array.prototype.lastIndexOf.call(l,f,b):de(l,[f],b,A,M);throw new TypeError("val must be string, number or Buffer")}function de(l,f,b,A,M){let $=1,ne=l.length,je=f.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(l.length<2||f.length<2)return-1;$=2,ne/=2,je/=2,b/=2}function He(Me,Be){return $===1?Me[Be]:Me.readUInt16BE(Be*$)}let me;if(M){let Me=-1;for(me=b;me<ne;me++)if(He(l,me)===He(f,Me===-1?0:me-Me)){if(Me===-1&&(Me=me),me-Me+1===je)return Me*$}else Me!==-1&&(me-=me-Me),Me=-1}else for(b+je>ne&&(b=ne-je),me=b;me>=0;me--){let Me=!0;for(let Be=0;Be<je;Be++)if(He(l,me+Be)!==He(f,Be)){Me=!1;break}if(Me)return me}return-1}_.prototype.includes=function(l,f,b){return this.indexOf(l,f,b)!==-1},_.prototype.indexOf=function(l,f,b){return we(this,l,f,b,!0)},_.prototype.lastIndexOf=function(l,f,b){return we(this,l,f,b,!1)};function xe(l,f,b,A){b=Number(b)||0;const M=l.length-b;A?(A=Number(A),A>M&&(A=M)):A=M;const $=f.length;A>$/2&&(A=$/2);let ne;for(ne=0;ne<A;++ne){const je=parseInt(f.substr(ne*2,2),16);if(ke(je))return ne;l[b+ne]=je}return ne}function ye(l,f,b,A){return j(h(f,l.length-b),l,b,A)}function F(l,f,b,A){return j(E(f),l,b,A)}function Y(l,f,b,A){return j(U(f),l,b,A)}function De(l,f,b,A){return j(L(f,l.length-b),l,b,A)}_.prototype.write=function(l,f,b,A){if(f===void 0)A="utf8",b=this.length,f=0;else if(b===void 0&&typeof f=="string")A=f,b=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(b)?(b=b>>>0,A===void 0&&(A="utf8")):(A=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const M=this.length-f;if((b===void 0||b>M)&&(b=M),l.length>0&&(b<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");A||(A="utf8");let $=!1;for(;;)switch(A){case"hex":return xe(this,l,f,b);case"utf8":case"utf-8":return ye(this,l,f,b);case"ascii":case"latin1":case"binary":return F(this,l,f,b);case"base64":return Y(this,l,f,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,l,f,b);default:if($)throw new TypeError("Unknown encoding: "+A);A=(""+A).toLowerCase(),$=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Pe(l,f,b){return f===0&&b===l.length?a.fromByteArray(l):a.fromByteArray(l.slice(f,b))}function Ce(l,f,b){b=Math.min(l.length,b);const A=[];let M=f;for(;M<b;){const $=l[M];let ne=null,je=$>239?4:$>223?3:$>191?2:1;if(M+je<=b){let He,me,Me,Be;switch(je){case 1:$<128&&(ne=$);break;case 2:He=l[M+1],(He&192)===128&&(Be=($&31)<<6|He&63,Be>127&&(ne=Be));break;case 3:He=l[M+1],me=l[M+2],(He&192)===128&&(me&192)===128&&(Be=($&15)<<12|(He&63)<<6|me&63,Be>2047&&(Be<55296||Be>57343)&&(ne=Be));break;case 4:He=l[M+1],me=l[M+2],Me=l[M+3],(He&192)===128&&(me&192)===128&&(Me&192)===128&&(Be=($&15)<<18|(He&63)<<12|(me&63)<<6|Me&63,Be>65535&&Be<1114112&&(ne=Be))}}ne===null?(ne=65533,je=1):ne>65535&&(ne-=65536,A.push(ne>>>10&1023|55296),ne=56320|ne&1023),A.push(ne),M+=je}return Ge(A)}const ve=4096;function Ge(l){const f=l.length;if(f<=ve)return String.fromCharCode.apply(String,l);let b="",A=0;for(;A<f;)b+=String.fromCharCode.apply(String,l.slice(A,A+=ve));return b}function ze(l,f,b){let A="";b=Math.min(l.length,b);for(let M=f;M<b;++M)A+=String.fromCharCode(l[M]&127);return A}function Oe(l,f,b){let A="";b=Math.min(l.length,b);for(let M=f;M<b;++M)A+=String.fromCharCode(l[M]);return A}function at(l,f,b){const A=l.length;(!f||f<0)&&(f=0),(!b||b<0||b>A)&&(b=A);let M="";for(let $=f;$<b;++$)M+=Ve[l[$]];return M}function oe(l,f,b){const A=l.slice(f,b);let M="";for(let $=0;$<A.length-1;$+=2)M+=String.fromCharCode(A[$]+A[$+1]*256);return M}_.prototype.slice=function(l,f){const b=this.length;l=~~l,f=f===void 0?b:~~f,l<0?(l+=b,l<0&&(l=0)):l>b&&(l=b),f<0?(f+=b,f<0&&(f=0)):f>b&&(f=b),f<l&&(f=l);const A=this.subarray(l,f);return Object.setPrototypeOf(A,_.prototype),A};function _e(l,f,b){if(l%1!==0||l<0)throw new RangeError("offset is not uint");if(l+f>b)throw new RangeError("Trying to access beyond buffer length")}_.prototype.readUintLE=_.prototype.readUIntLE=function(l,f,b){l=l>>>0,f=f>>>0,b||_e(l,f,this.length);let A=this[l],M=1,$=0;for(;++$<f&&(M*=256);)A+=this[l+$]*M;return A},_.prototype.readUintBE=_.prototype.readUIntBE=function(l,f,b){l=l>>>0,f=f>>>0,b||_e(l,f,this.length);let A=this[l+--f],M=1;for(;f>0&&(M*=256);)A+=this[l+--f]*M;return A},_.prototype.readUint8=_.prototype.readUInt8=function(l,f){return l=l>>>0,f||_e(l,1,this.length),this[l]},_.prototype.readUint16LE=_.prototype.readUInt16LE=function(l,f){return l=l>>>0,f||_e(l,2,this.length),this[l]|this[l+1]<<8},_.prototype.readUint16BE=_.prototype.readUInt16BE=function(l,f){return l=l>>>0,f||_e(l,2,this.length),this[l]<<8|this[l+1]},_.prototype.readUint32LE=_.prototype.readUInt32LE=function(l,f){return l=l>>>0,f||_e(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},_.prototype.readUint32BE=_.prototype.readUInt32BE=function(l,f){return l=l>>>0,f||_e(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},_.prototype.readBigUInt64LE=C(function(l){l=l>>>0,P(l,"offset");const f=this[l],b=this[l+7];(f===void 0||b===void 0)&&N(l,this.length-8);const A=f+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,M=this[++l]+this[++l]*2**8+this[++l]*2**16+b*2**24;return BigInt(A)+(BigInt(M)<<BigInt(32))}),_.prototype.readBigUInt64BE=C(function(l){l=l>>>0,P(l,"offset");const f=this[l],b=this[l+7];(f===void 0||b===void 0)&&N(l,this.length-8);const A=f*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],M=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+b;return(BigInt(A)<<BigInt(32))+BigInt(M)}),_.prototype.readIntLE=function(l,f,b){l=l>>>0,f=f>>>0,b||_e(l,f,this.length);let A=this[l],M=1,$=0;for(;++$<f&&(M*=256);)A+=this[l+$]*M;return M*=128,A>=M&&(A-=Math.pow(2,8*f)),A},_.prototype.readIntBE=function(l,f,b){l=l>>>0,f=f>>>0,b||_e(l,f,this.length);let A=f,M=1,$=this[l+--A];for(;A>0&&(M*=256);)$+=this[l+--A]*M;return M*=128,$>=M&&($-=Math.pow(2,8*f)),$},_.prototype.readInt8=function(l,f){return l=l>>>0,f||_e(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},_.prototype.readInt16LE=function(l,f){l=l>>>0,f||_e(l,2,this.length);const b=this[l]|this[l+1]<<8;return b&32768?b|4294901760:b},_.prototype.readInt16BE=function(l,f){l=l>>>0,f||_e(l,2,this.length);const b=this[l+1]|this[l]<<8;return b&32768?b|4294901760:b},_.prototype.readInt32LE=function(l,f){return l=l>>>0,f||_e(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},_.prototype.readInt32BE=function(l,f){return l=l>>>0,f||_e(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},_.prototype.readBigInt64LE=C(function(l){l=l>>>0,P(l,"offset");const f=this[l],b=this[l+7];(f===void 0||b===void 0)&&N(l,this.length-8);const A=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(b<<24);return(BigInt(A)<<BigInt(32))+BigInt(f+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),_.prototype.readBigInt64BE=C(function(l){l=l>>>0,P(l,"offset");const f=this[l],b=this[l+7];(f===void 0||b===void 0)&&N(l,this.length-8);const A=(f<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(A)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+b)}),_.prototype.readFloatLE=function(l,f){return l=l>>>0,f||_e(l,4,this.length),i.read(this,l,!0,23,4)},_.prototype.readFloatBE=function(l,f){return l=l>>>0,f||_e(l,4,this.length),i.read(this,l,!1,23,4)},_.prototype.readDoubleLE=function(l,f){return l=l>>>0,f||_e(l,8,this.length),i.read(this,l,!0,52,8)},_.prototype.readDoubleBE=function(l,f){return l=l>>>0,f||_e(l,8,this.length),i.read(this,l,!1,52,8)};function Re(l,f,b,A,M,$){if(!_.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>M||f<$)throw new RangeError('"value" argument is out of bounds');if(b+A>l.length)throw new RangeError("Index out of range")}_.prototype.writeUintLE=_.prototype.writeUIntLE=function(l,f,b,A){if(l=+l,f=f>>>0,b=b>>>0,!A){const ne=Math.pow(2,8*b)-1;Re(this,l,f,b,ne,0)}let M=1,$=0;for(this[f]=l&255;++$<b&&(M*=256);)this[f+$]=l/M&255;return f+b},_.prototype.writeUintBE=_.prototype.writeUIntBE=function(l,f,b,A){if(l=+l,f=f>>>0,b=b>>>0,!A){const ne=Math.pow(2,8*b)-1;Re(this,l,f,b,ne,0)}let M=b-1,$=1;for(this[f+M]=l&255;--M>=0&&($*=256);)this[f+M]=l/$&255;return f+b},_.prototype.writeUint8=_.prototype.writeUInt8=function(l,f,b){return l=+l,f=f>>>0,b||Re(this,l,f,1,255,0),this[f]=l&255,f+1},_.prototype.writeUint16LE=_.prototype.writeUInt16LE=function(l,f,b){return l=+l,f=f>>>0,b||Re(this,l,f,2,65535,0),this[f]=l&255,this[f+1]=l>>>8,f+2},_.prototype.writeUint16BE=_.prototype.writeUInt16BE=function(l,f,b){return l=+l,f=f>>>0,b||Re(this,l,f,2,65535,0),this[f]=l>>>8,this[f+1]=l&255,f+2},_.prototype.writeUint32LE=_.prototype.writeUInt32LE=function(l,f,b){return l=+l,f=f>>>0,b||Re(this,l,f,4,4294967295,0),this[f+3]=l>>>24,this[f+2]=l>>>16,this[f+1]=l>>>8,this[f]=l&255,f+4},_.prototype.writeUint32BE=_.prototype.writeUInt32BE=function(l,f,b){return l=+l,f=f>>>0,b||Re(this,l,f,4,4294967295,0),this[f]=l>>>24,this[f+1]=l>>>16,this[f+2]=l>>>8,this[f+3]=l&255,f+4};function vt(l,f,b,A,M){Qe(f,A,M,l,b,7);let $=Number(f&BigInt(4294967295));l[b++]=$,$=$>>8,l[b++]=$,$=$>>8,l[b++]=$,$=$>>8,l[b++]=$;let ne=Number(f>>BigInt(32)&BigInt(4294967295));return l[b++]=ne,ne=ne>>8,l[b++]=ne,ne=ne>>8,l[b++]=ne,ne=ne>>8,l[b++]=ne,b}function wt(l,f,b,A,M){Qe(f,A,M,l,b,7);let $=Number(f&BigInt(4294967295));l[b+7]=$,$=$>>8,l[b+6]=$,$=$>>8,l[b+5]=$,$=$>>8,l[b+4]=$;let ne=Number(f>>BigInt(32)&BigInt(4294967295));return l[b+3]=ne,ne=ne>>8,l[b+2]=ne,ne=ne>>8,l[b+1]=ne,ne=ne>>8,l[b]=ne,b+8}_.prototype.writeBigUInt64LE=C(function(l,f=0){return vt(this,l,f,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeBigUInt64BE=C(function(l,f=0){return wt(this,l,f,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeIntLE=function(l,f,b,A){if(l=+l,f=f>>>0,!A){const je=Math.pow(2,8*b-1);Re(this,l,f,b,je-1,-je)}let M=0,$=1,ne=0;for(this[f]=l&255;++M<b&&($*=256);)l<0&&ne===0&&this[f+M-1]!==0&&(ne=1),this[f+M]=(l/$>>0)-ne&255;return f+b},_.prototype.writeIntBE=function(l,f,b,A){if(l=+l,f=f>>>0,!A){const je=Math.pow(2,8*b-1);Re(this,l,f,b,je-1,-je)}let M=b-1,$=1,ne=0;for(this[f+M]=l&255;--M>=0&&($*=256);)l<0&&ne===0&&this[f+M+1]!==0&&(ne=1),this[f+M]=(l/$>>0)-ne&255;return f+b},_.prototype.writeInt8=function(l,f,b){return l=+l,f=f>>>0,b||Re(this,l,f,1,127,-128),l<0&&(l=255+l+1),this[f]=l&255,f+1},_.prototype.writeInt16LE=function(l,f,b){return l=+l,f=f>>>0,b||Re(this,l,f,2,32767,-32768),this[f]=l&255,this[f+1]=l>>>8,f+2},_.prototype.writeInt16BE=function(l,f,b){return l=+l,f=f>>>0,b||Re(this,l,f,2,32767,-32768),this[f]=l>>>8,this[f+1]=l&255,f+2},_.prototype.writeInt32LE=function(l,f,b){return l=+l,f=f>>>0,b||Re(this,l,f,4,2147483647,-2147483648),this[f]=l&255,this[f+1]=l>>>8,this[f+2]=l>>>16,this[f+3]=l>>>24,f+4},_.prototype.writeInt32BE=function(l,f,b){return l=+l,f=f>>>0,b||Re(this,l,f,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[f]=l>>>24,this[f+1]=l>>>16,this[f+2]=l>>>8,this[f+3]=l&255,f+4},_.prototype.writeBigInt64LE=C(function(l,f=0){return vt(this,l,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),_.prototype.writeBigInt64BE=C(function(l,f=0){return wt(this,l,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function dt(l,f,b,A,M,$){if(b+A>l.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function Nt(l,f,b,A,M){return f=+f,b=b>>>0,M||dt(l,f,b,4),i.write(l,f,b,A,23,4),b+4}_.prototype.writeFloatLE=function(l,f,b){return Nt(this,l,f,!0,b)},_.prototype.writeFloatBE=function(l,f,b){return Nt(this,l,f,!1,b)};function tt(l,f,b,A,M){return f=+f,b=b>>>0,M||dt(l,f,b,8),i.write(l,f,b,A,52,8),b+8}_.prototype.writeDoubleLE=function(l,f,b){return tt(this,l,f,!0,b)},_.prototype.writeDoubleBE=function(l,f,b){return tt(this,l,f,!1,b)},_.prototype.copy=function(l,f,b,A){if(!_.isBuffer(l))throw new TypeError("argument should be a Buffer");if(b||(b=0),!A&&A!==0&&(A=this.length),f>=l.length&&(f=l.length),f||(f=0),A>0&&A<b&&(A=b),A===b||l.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("sourceEnd out of bounds");A>this.length&&(A=this.length),l.length-f<A-b&&(A=l.length-f+b);const M=A-b;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,b,A):Uint8Array.prototype.set.call(l,this.subarray(b,A),f),M},_.prototype.fill=function(l,f,b,A){if(typeof l=="string"){if(typeof f=="string"?(A=f,f=0,b=this.length):typeof b=="string"&&(A=b,b=this.length),A!==void 0&&typeof A!="string")throw new TypeError("encoding must be a string");if(typeof A=="string"&&!_.isEncoding(A))throw new TypeError("Unknown encoding: "+A);if(l.length===1){const $=l.charCodeAt(0);(A==="utf8"&&$<128||A==="latin1")&&(l=$)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(f<0||this.length<f||this.length<b)throw new RangeError("Out of range index");if(b<=f)return this;f=f>>>0,b=b===void 0?this.length:b>>>0,l||(l=0);let M;if(typeof l=="number")for(M=f;M<b;++M)this[M]=l;else{const $=_.isBuffer(l)?l:_.from(l,A),ne=$.length;if(ne===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(M=0;M<b-f;++M)this[M+f]=$[M%ne]}return this};const Xe={};function ht(l,f,b){Xe[l]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,delete this.name}get code(){return l}set code(A){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:A,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}ht("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ht("ERR_INVALID_ARG_TYPE",function(l,f){return`The "${l}" argument must be of type number. Received type ${typeof f}`},TypeError),ht("ERR_OUT_OF_RANGE",function(l,f,b){let A=`The value of "${l}" is out of range.`,M=b;return Number.isInteger(b)&&Math.abs(b)>2**32?M=bt(String(b)):typeof b=="bigint"&&(M=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(M=bt(M)),M+="n"),A+=` It must be ${f}. Received ${M}`,A},RangeError);function bt(l){let f="",b=l.length;const A=l[0]==="-"?1:0;for(;b>=A+4;b-=3)f=`_${l.slice(b-3,b)}${f}`;return`${l.slice(0,b)}${f}`}function nt(l,f,b){P(f,"offset"),(l[f]===void 0||l[f+b]===void 0)&&N(f,l.length-(b+1))}function Qe(l,f,b,A,M,$){if(l>b||l<f){const ne=typeof f=="bigint"?"n":"";let je;throw $>3?f===0||f===BigInt(0)?je=`>= 0${ne} and < 2${ne} ** ${($+1)*8}${ne}`:je=`>= -(2${ne} ** ${($+1)*8-1}${ne}) and < 2 ** ${($+1)*8-1}${ne}`:je=`>= ${f}${ne} and <= ${b}${ne}`,new Xe.ERR_OUT_OF_RANGE("value",je,l)}nt(A,M,$)}function P(l,f){if(typeof l!="number")throw new Xe.ERR_INVALID_ARG_TYPE(f,"number",l)}function N(l,f,b){throw Math.floor(l)!==l?(P(l,b),new Xe.ERR_OUT_OF_RANGE(b||"offset","an integer",l)):f<0?new Xe.ERR_BUFFER_OUT_OF_BOUNDS:new Xe.ERR_OUT_OF_RANGE(b||"offset",`>= ${b?1:0} and <= ${f}`,l)}const q=/[^+/0-9A-Za-z-_]/g;function u(l){if(l=l.split("=")[0],l=l.trim().replace(q,""),l.length<2)return"";for(;l.length%4!==0;)l=l+"=";return l}function h(l,f){f=f||1/0;let b;const A=l.length;let M=null;const $=[];for(let ne=0;ne<A;++ne){if(b=l.charCodeAt(ne),b>55295&&b<57344){if(!M){if(b>56319){(f-=3)>-1&&$.push(239,191,189);continue}else if(ne+1===A){(f-=3)>-1&&$.push(239,191,189);continue}M=b;continue}if(b<56320){(f-=3)>-1&&$.push(239,191,189),M=b;continue}b=(M-55296<<10|b-56320)+65536}else M&&(f-=3)>-1&&$.push(239,191,189);if(M=null,b<128){if((f-=1)<0)break;$.push(b)}else if(b<2048){if((f-=2)<0)break;$.push(b>>6|192,b&63|128)}else if(b<65536){if((f-=3)<0)break;$.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((f-=4)<0)break;$.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return $}function E(l){const f=[];for(let b=0;b<l.length;++b)f.push(l.charCodeAt(b)&255);return f}function L(l,f){let b,A,M;const $=[];for(let ne=0;ne<l.length&&!((f-=2)<0);++ne)b=l.charCodeAt(ne),A=b>>8,M=b%256,$.push(M),$.push(A);return $}function U(l){return a.toByteArray(u(l))}function j(l,f,b,A){let M;for(M=0;M<A&&!(M+b>=f.length||M>=l.length);++M)f[M+b]=l[M];return M}function ee(l,f){return l instanceof f||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===f.name}function ke(l){return l!==l}const Ve=function(){const l="0123456789abcdef",f=new Array(256);for(let b=0;b<16;++b){const A=b*16;for(let M=0;M<16;++M)f[A+M]=l[b]+l[M]}return f}();function C(l){return typeof BigInt>"u"?T:l}function T(){throw new Error("BigInt not supported")}})(Ht);var et={ArrayIsArray(r){return Array.isArray(r)},ArrayPrototypeIncludes(r,a){return r.includes(a)},ArrayPrototypeIndexOf(r,a){return r.indexOf(a)},ArrayPrototypeJoin(r,a){return r.join(a)},ArrayPrototypeMap(r,a){return r.map(a)},ArrayPrototypePop(r,a){return r.pop(a)},ArrayPrototypePush(r,a){return r.push(a)},ArrayPrototypeSlice(r,a,i){return r.slice(a,i)},Error,FunctionPrototypeCall(r,a,...i){return r.call(a,...i)},FunctionPrototypeSymbolHasInstance(r,a){return Function.prototype[Symbol.hasInstance].call(r,a)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(r,a){return Object.defineProperties(r,a)},ObjectDefineProperty(r,a,i){return Object.defineProperty(r,a,i)},ObjectGetOwnPropertyDescriptor(r,a){return Object.getOwnPropertyDescriptor(r,a)},ObjectKeys(r){return Object.keys(r)},ObjectSetPrototypeOf(r,a){return Object.setPrototypeOf(r,a)},Promise,PromisePrototypeCatch(r,a){return r.catch(a)},PromisePrototypeThen(r,a,i){return r.then(a,i)},PromiseReject(r){return Promise.reject(r)},ReflectApply:Reflect.apply,RegExpPrototypeTest(r,a){return r.test(a)},SafeSet:Set,String,StringPrototypeSlice(r,a,i){return r.slice(a,i)},StringPrototypeToLowerCase(r){return r.toLowerCase()},StringPrototypeToUpperCase(r){return r.toUpperCase()},StringPrototypeTrim(r){return r.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(r,a,i){return r.set(a,i)},Uint8Array},Ca={exports:{}};(function(r){const a=Ht,i=Object.getPrototypeOf(async function(){}).constructor,c=globalThis.Blob||a.Blob,g=typeof c<"u"?function(w){return w instanceof c}:function(w){return!1};class v extends Error{constructor(_){if(!Array.isArray(_))throw new TypeError(`Expected input to be an Array, got ${typeof _}`);let I="";for(let D=0;D<_.length;D++)I+=`    ${_[D].stack}
`;super(I),this.name="AggregateError",this.errors=_}}r.exports={AggregateError:v,kEmptyObject:Object.freeze({}),once(w){let _=!1;return function(...I){_||(_=!0,w.apply(this,I))}},createDeferredPromise:function(){let w,_;return{promise:new Promise((I,D)=>{w=I,_=D}),resolve:w,reject:_}},promisify(w){return new Promise((_,I)=>{w((D,...B)=>D?I(D):_(...B))})},debuglog(){return function(){}},format(w,..._){return w.replace(/%([sdifj])/g,function(...[I,D]){const B=_.shift();return D==="f"?B.toFixed(6):D==="j"?JSON.stringify(B):D==="s"&&typeof B=="object"?`${B.constructor!==Object?B.constructor.name:""} {}`.trim():B.toString()})},inspect(w){switch(typeof w){case"string":if(w.includes("'"))if(w.includes('"')){if(!w.includes("`")&&!w.includes("${"))return`\`${w}\``}else return`"${w}"`;return`'${w}'`;case"number":return isNaN(w)?"NaN":Object.is(w,-0)?String(w):w;case"bigint":return`${String(w)}n`;case"boolean":case"undefined":return String(w);case"object":return"{}"}},types:{isAsyncFunction(w){return w instanceof i},isArrayBufferView(w){return ArrayBuffer.isView(w)}},isBlob:g},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(Ca);var $t=Ca.exports,bi={},Dr={exports:{}},Ta;function gi(){if(Ta)return Dr.exports;Ta=1;const{AbortController:r,AbortSignal:a}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Dr.exports=r,Dr.exports.AbortSignal=a,Dr.exports.default=r,Dr.exports}const{format:Sc,inspect:rn,AggregateError:Cc}=$t,Tc=globalThis.AggregateError||Cc,xc=Symbol("kIsNodeError"),kc=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Ac=/^([A-Z][a-z0-9]*)+$/,Rc="__node_internal_",nn={};function tr(r,a){if(!r)throw new nn.ERR_INTERNAL_ASSERTION(a)}function xa(r){let a="",i=r.length;const c=r[0]==="-"?1:0;for(;i>=c+4;i-=3)a=`_${r.slice(i-3,i)}${a}`;return`${r.slice(0,i)}${a}`}function Lc(r,a,i){if(typeof a=="function")return tr(a.length<=i.length,`Code: ${r}; The provided arguments length (${i.length}) does not match the required ones (${a.length}).`),a(...i);const c=(a.match(/%[dfijoOs]/g)||[]).length;return tr(c===i.length,`Code: ${r}; The provided arguments length (${i.length}) does not match the required ones (${c}).`),i.length===0?a:Sc(a,...i)}function ot(r,a,i){i||(i=Error);class c extends i{constructor(...v){super(Lc(r,a,v))}toString(){return`${this.name} [${r}]: ${this.message}`}}Object.defineProperties(c.prototype,{name:{value:i.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${r}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),c.prototype.code=r,c.prototype[xc]=!0,nn[r]=c}function ka(r){const a=Rc+r.name;return Object.defineProperty(r,"name",{value:a}),r}function Fc(r,a){if(r&&a&&r!==a){if(Array.isArray(a.errors))return a.errors.push(r),a;const i=new Tc([a,r],a.message);return i.code=a.code,i}return r||a}let Pc=class extends Error{constructor(r="The operation was aborted",a=void 0){if(a!==void 0&&typeof a!="object")throw new nn.ERR_INVALID_ARG_TYPE("options","Object",a);super(r,a),this.code="ABORT_ERR",this.name="AbortError"}};ot("ERR_ASSERTION","%s",Error),ot("ERR_INVALID_ARG_TYPE",(r,a,i)=>{tr(typeof r=="string","'name' must be a string"),Array.isArray(a)||(a=[a]);let c="The ";r.endsWith(" argument")?c+=`${r} `:c+=`"${r}" ${r.includes(".")?"property":"argument"} `,c+="must be ";const g=[],v=[],w=[];for(const I of a)tr(typeof I=="string","All expected entries have to be of type string"),kc.includes(I)?g.push(I.toLowerCase()):Ac.test(I)?v.push(I):(tr(I!=="object",'The value "object" should be written as "Object"'),w.push(I));if(v.length>0){const I=g.indexOf("object");I!==-1&&(g.splice(g,I,1),v.push("Object"))}if(g.length>0){switch(g.length){case 1:c+=`of type ${g[0]}`;break;case 2:c+=`one of type ${g[0]} or ${g[1]}`;break;default:{const I=g.pop();c+=`one of type ${g.join(", ")}, or ${I}`}}(v.length>0||w.length>0)&&(c+=" or ")}if(v.length>0){switch(v.length){case 1:c+=`an instance of ${v[0]}`;break;case 2:c+=`an instance of ${v[0]} or ${v[1]}`;break;default:{const I=v.pop();c+=`an instance of ${v.join(", ")}, or ${I}`}}w.length>0&&(c+=" or ")}switch(w.length){case 0:break;case 1:w[0].toLowerCase()!==w[0]&&(c+="an "),c+=`${w[0]}`;break;case 2:c+=`one of ${w[0]} or ${w[1]}`;break;default:{const I=w.pop();c+=`one of ${w.join(", ")}, or ${I}`}}if(i==null)c+=`. Received ${i}`;else if(typeof i=="function"&&i.name)c+=`. Received function ${i.name}`;else if(typeof i=="object"){var _;if((_=i.constructor)!==null&&_!==void 0&&_.name)c+=`. Received an instance of ${i.constructor.name}`;else{const I=rn(i,{depth:-1});c+=`. Received ${I}`}}else{let I=rn(i,{colors:!1});I.length>25&&(I=`${I.slice(0,25)}...`),c+=`. Received type ${typeof i} (${I})`}return c},TypeError),ot("ERR_INVALID_ARG_VALUE",(r,a,i="is invalid")=>{let c=rn(a);return c.length>128&&(c=c.slice(0,128)+"..."),`The ${r.includes(".")?"property":"argument"} '${r}' ${i}. Received ${c}`},TypeError),ot("ERR_INVALID_RETURN_VALUE",(r,a,i)=>{var c;const g=i!=null&&(c=i.constructor)!==null&&c!==void 0&&c.name?`instance of ${i.constructor.name}`:`type ${typeof i}`;return`Expected ${r} to be returned from the "${a}" function but got ${g}.`},TypeError),ot("ERR_MISSING_ARGS",(...r)=>{tr(r.length>0,"At least one arg needs to be specified");let a;const i=r.length;switch(r=(Array.isArray(r)?r:[r]).map(c=>`"${c}"`).join(" or "),i){case 1:a+=`The ${r[0]} argument`;break;case 2:a+=`The ${r[0]} and ${r[1]} arguments`;break;default:{const c=r.pop();a+=`The ${r.join(", ")}, and ${c} arguments`}break}return`${a} must be specified`},TypeError),ot("ERR_OUT_OF_RANGE",(r,a,i)=>{tr(a,'Missing "range" argument');let c;return Number.isInteger(i)&&Math.abs(i)>2**32?c=xa(String(i)):typeof i=="bigint"?(c=String(i),(i>2n**32n||i<-(2n**32n))&&(c=xa(c)),c+="n"):c=rn(i),`The value of "${r}" is out of range. It must be ${a}. Received ${c}`},RangeError),ot("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),ot("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),ot("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),ot("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),ot("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),ot("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),ot("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),ot("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),ot("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),ot("ERR_STREAM_WRITE_AFTER_END","write after end",Error),ot("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var mt={AbortError:Pc,aggregateTwoErrors:ka(Fc),hideStackFrames:ka,codes:nn};const{ArrayIsArray:yi,ArrayPrototypeIncludes:Aa,ArrayPrototypeJoin:Ra,ArrayPrototypeMap:Ic,NumberIsInteger:_i,NumberIsNaN:Dc,NumberMAX_SAFE_INTEGER:Mc,NumberMIN_SAFE_INTEGER:jc,NumberParseInt:Oc,ObjectPrototypeHasOwnProperty:Nc,RegExpPrototypeExec:La,String:Bc,StringPrototypeToUpperCase:Uc,StringPrototypeTrim:Wc}=et,{hideStackFrames:kt,codes:{ERR_SOCKET_BAD_PORT:zc,ERR_INVALID_ARG_TYPE:ft,ERR_INVALID_ARG_VALUE:mr,ERR_OUT_OF_RANGE:rr,ERR_UNKNOWN_SIGNAL:Fa}}=mt,{normalizeEncoding:$c}=$t,{isAsyncFunction:Gc,isArrayBufferView:Vc}=$t.types,Pa={};function Yc(r){return r===(r|0)}function Kc(r){return r===r>>>0}const Xc=/^[0-7]+$/,Hc="must be a 32-bit unsigned integer or an octal string";function qc(r,a,i){if(typeof r>"u"&&(r=i),typeof r=="string"){if(La(Xc,r)===null)throw new mr(a,r,Hc);r=Oc(r,8)}return Ia(r,a),r}const Jc=kt((r,a,i=jc,c=Mc)=>{if(typeof r!="number")throw new ft(a,"number",r);if(!_i(r))throw new rr(a,"an integer",r);if(r<i||r>c)throw new rr(a,`>= ${i} && <= ${c}`,r)}),Qc=kt((r,a,i=-2147483648,c=2147483647)=>{if(typeof r!="number")throw new ft(a,"number",r);if(!_i(r))throw new rr(a,"an integer",r);if(r<i||r>c)throw new rr(a,`>= ${i} && <= ${c}`,r)}),Ia=kt((r,a,i=!1)=>{if(typeof r!="number")throw new ft(a,"number",r);if(!_i(r))throw new rr(a,"an integer",r);const c=i?1:0,g=4294967295;if(r<c||r>g)throw new rr(a,`>= ${c} && <= ${g}`,r)});function vi(r,a){if(typeof r!="string")throw new ft(a,"string",r)}function Zc(r,a,i=void 0,c){if(typeof r!="number")throw new ft(a,"number",r);if(i!=null&&r<i||c!=null&&r>c||(i!=null||c!=null)&&Dc(r))throw new rr(a,`${i!=null?`>= ${i}`:""}${i!=null&&c!=null?" && ":""}${c!=null?`<= ${c}`:""}`,r)}const ef=kt((r,a,i)=>{if(!Aa(i,r)){const c="must be one of: "+Ra(Ic(i,g=>typeof g=="string"?`'${g}'`:Bc(g)),", ");throw new mr(a,r,c)}});function Da(r,a){if(typeof r!="boolean")throw new ft(a,"boolean",r)}function wi(r,a,i){return r==null||!Nc(r,a)?i:r[a]}const tf=kt((r,a,i=null)=>{const c=wi(i,"allowArray",!1),g=wi(i,"allowFunction",!1);if(!wi(i,"nullable",!1)&&r===null||!c&&yi(r)||typeof r!="object"&&(!g||typeof r!="function"))throw new ft(a,"Object",r)}),rf=kt((r,a)=>{if(r!=null&&typeof r!="object"&&typeof r!="function")throw new ft(a,"a dictionary",r)}),Ei=kt((r,a,i=0)=>{if(!yi(r))throw new ft(a,"Array",r);if(r.length<i){const c=`must be longer than ${i}`;throw new mr(a,r,c)}});function nf(r,a){Ei(r,a);for(let i=0;i<r.length;i++)vi(r[i],`${a}[${i}]`)}function of(r,a){Ei(r,a);for(let i=0;i<r.length;i++)Da(r[i],`${a}[${i}]`)}function af(r,a="signal"){if(vi(r,a),Pa[r]===void 0)throw Pa[Uc(r)]!==void 0?new Fa(r+" (signals must use all capital letters)"):new Fa(r)}const sf=kt((r,a="buffer")=>{if(!Vc(r))throw new ft(a,["Buffer","TypedArray","DataView"],r)});function lf(r,a){const i=$c(a),c=r.length;if(i==="hex"&&c%2!==0)throw new mr("encoding",a,`is invalid for data of length ${c}`)}function uf(r,a="Port",i=!0){if(typeof r!="number"&&typeof r!="string"||typeof r=="string"&&Wc(r).length===0||+r!==+r>>>0||r>65535||r===0&&!i)throw new zc(a,r,i);return r|0}const cf=kt((r,a)=>{if(r!==void 0&&(r===null||typeof r!="object"||!("aborted"in r)))throw new ft(a,"AbortSignal",r)}),ff=kt((r,a)=>{if(typeof r!="function")throw new ft(a,"Function",r)}),df=kt((r,a)=>{if(typeof r!="function"||Gc(r))throw new ft(a,"Function",r)}),hf=kt((r,a)=>{if(r!==void 0)throw new ft(a,"undefined",r)});function pf(r,a,i){if(!Aa(i,r))throw new ft(a,`('${Ra(i,"|")}')`,r)}const mf=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Ma(r,a){if(typeof r>"u"||!La(mf,r))throw new mr(a,r,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function bf(r){if(typeof r=="string")return Ma(r,"hints"),r;if(yi(r)){const a=r.length;let i="";if(a===0)return i;for(let c=0;c<a;c++){const g=r[c];Ma(g,"hints"),i+=g,c!==a-1&&(i+=", ")}return i}throw new mr("hints",r,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var on={isInt32:Yc,isUint32:Kc,parseFileMode:qc,validateArray:Ei,validateStringArray:nf,validateBooleanArray:of,validateBoolean:Da,validateBuffer:sf,validateDictionary:rf,validateEncoding:lf,validateFunction:ff,validateInt32:Qc,validateInteger:Jc,validateNumber:Zc,validateObject:tf,validateOneOf:ef,validatePlainFunction:df,validatePort:uf,validateSignalName:af,validateString:vi,validateUint32:Ia,validateUndefined:hf,validateUnion:pf,validateAbortSignal:cf,validateLinkHeaderValue:bf},Si={exports:{}},ja={exports:{}},qe=ja.exports={},It,Dt;function Ci(){throw new Error("setTimeout has not been defined")}function Ti(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?It=setTimeout:It=Ci}catch{It=Ci}try{typeof clearTimeout=="function"?Dt=clearTimeout:Dt=Ti}catch{Dt=Ti}})();function Oa(r){if(It===setTimeout)return setTimeout(r,0);if((It===Ci||!It)&&setTimeout)return It=setTimeout,setTimeout(r,0);try{return It(r,0)}catch{try{return It.call(null,r,0)}catch{return It.call(this,r,0)}}}function gf(r){if(Dt===clearTimeout)return clearTimeout(r);if((Dt===Ti||!Dt)&&clearTimeout)return Dt=clearTimeout,clearTimeout(r);try{return Dt(r)}catch{try{return Dt.call(null,r)}catch{return Dt.call(this,r)}}}var Gt=[],br=!1,nr,an=-1;function yf(){!br||!nr||(br=!1,nr.length?Gt=nr.concat(Gt):an=-1,Gt.length&&Na())}function Na(){if(!br){var r=Oa(yf);br=!0;for(var a=Gt.length;a;){for(nr=Gt,Gt=[];++an<a;)nr&&nr[an].run();an=-1,a=Gt.length}nr=null,br=!1,gf(r)}}qe.nextTick=function(r){var a=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)a[i-1]=arguments[i];Gt.push(new Ba(r,a)),Gt.length===1&&!br&&Oa(Na)};function Ba(r,a){this.fun=r,this.array=a}Ba.prototype.run=function(){this.fun.apply(null,this.array)},qe.title="browser",qe.browser=!0,qe.env={},qe.argv=[],qe.version="",qe.versions={};function Vt(){}qe.on=Vt,qe.addListener=Vt,qe.once=Vt,qe.off=Vt,qe.removeListener=Vt,qe.removeAllListeners=Vt,qe.emit=Vt,qe.prependListener=Vt,qe.prependOnceListener=Vt,qe.listeners=function(r){return[]},qe.binding=function(r){throw new Error("process.binding is not supported")},qe.cwd=function(){return"/"},qe.chdir=function(r){throw new Error("process.chdir is not supported")},qe.umask=function(){return 0};var ir=ja.exports;const{Symbol:sn,SymbolAsyncIterator:Ua,SymbolIterator:Wa,SymbolFor:za}=et,$a=sn("kDestroyed"),Ga=sn("kIsErrored"),xi=sn("kIsReadable"),Va=sn("kIsDisturbed"),_f=za("nodejs.webstream.isClosedPromise"),vf=za("nodejs.webstream.controllerErrorFunction");function ln(r,a=!1){var i;return!!(r&&typeof r.pipe=="function"&&typeof r.on=="function"&&(!a||typeof r.pause=="function"&&typeof r.resume=="function")&&(!r._writableState||((i=r._readableState)===null||i===void 0?void 0:i.readable)!==!1)&&(!r._writableState||r._readableState))}function un(r){var a;return!!(r&&typeof r.write=="function"&&typeof r.on=="function"&&(!r._readableState||((a=r._writableState)===null||a===void 0?void 0:a.writable)!==!1))}function wf(r){return!!(r&&typeof r.pipe=="function"&&r._readableState&&typeof r.on=="function"&&typeof r.write=="function")}function Mt(r){return r&&(r._readableState||r._writableState||typeof r.write=="function"&&typeof r.on=="function"||typeof r.pipe=="function"&&typeof r.on=="function")}function Ya(r){return!!(r&&!Mt(r)&&typeof r.pipeThrough=="function"&&typeof r.getReader=="function"&&typeof r.cancel=="function")}function Ka(r){return!!(r&&!Mt(r)&&typeof r.getWriter=="function"&&typeof r.abort=="function")}function Xa(r){return!!(r&&!Mt(r)&&typeof r.readable=="object"&&typeof r.writable=="object")}function Ef(r){return Ya(r)||Ka(r)||Xa(r)}function Sf(r,a){return r==null?!1:a===!0?typeof r[Ua]=="function":a===!1?typeof r[Wa]=="function":typeof r[Ua]=="function"||typeof r[Wa]=="function"}function cn(r){if(!Mt(r))return null;const a=r._writableState,i=r._readableState,c=a||i;return!!(r.destroyed||r[$a]||c!=null&&c.destroyed)}function Ha(r){if(!un(r))return null;if(r.writableEnded===!0)return!0;const a=r._writableState;return a!=null&&a.errored?!1:typeof a?.ended!="boolean"?null:a.ended}function Cf(r,a){if(!un(r))return null;if(r.writableFinished===!0)return!0;const i=r._writableState;return i!=null&&i.errored?!1:typeof i?.finished!="boolean"?null:!!(i.finished||a===!1&&i.ended===!0&&i.length===0)}function Tf(r){if(!ln(r))return null;if(r.readableEnded===!0)return!0;const a=r._readableState;return!a||a.errored?!1:typeof a?.ended!="boolean"?null:a.ended}function qa(r,a){if(!ln(r))return null;const i=r._readableState;return i!=null&&i.errored?!1:typeof i?.endEmitted!="boolean"?null:!!(i.endEmitted||a===!1&&i.ended===!0&&i.length===0)}function Ja(r){return r&&r[xi]!=null?r[xi]:typeof r?.readable!="boolean"?null:cn(r)?!1:ln(r)&&r.readable&&!qa(r)}function Qa(r){return typeof r?.writable!="boolean"?null:cn(r)?!1:un(r)&&r.writable&&!Ha(r)}function xf(r,a){return Mt(r)?cn(r)?!0:!(a?.readable!==!1&&Ja(r)||a?.writable!==!1&&Qa(r)):null}function kf(r){var a,i;return Mt(r)?r.writableErrored?r.writableErrored:(a=(i=r._writableState)===null||i===void 0?void 0:i.errored)!==null&&a!==void 0?a:null:null}function Af(r){var a,i;return Mt(r)?r.readableErrored?r.readableErrored:(a=(i=r._readableState)===null||i===void 0?void 0:i.errored)!==null&&a!==void 0?a:null:null}function Rf(r){if(!Mt(r))return null;if(typeof r.closed=="boolean")return r.closed;const a=r._writableState,i=r._readableState;return typeof a?.closed=="boolean"||typeof i?.closed=="boolean"?a?.closed||i?.closed:typeof r._closed=="boolean"&&Za(r)?r._closed:null}function Za(r){return typeof r._closed=="boolean"&&typeof r._defaultKeepAlive=="boolean"&&typeof r._removedConnection=="boolean"&&typeof r._removedContLen=="boolean"}function es(r){return typeof r._sent100=="boolean"&&Za(r)}function Lf(r){var a;return typeof r._consuming=="boolean"&&typeof r._dumped=="boolean"&&((a=r.req)===null||a===void 0?void 0:a.upgradeOrConnect)===void 0}function Ff(r){if(!Mt(r))return null;const a=r._writableState,i=r._readableState,c=a||i;return!c&&es(r)||!!(c&&c.autoDestroy&&c.emitClose&&c.closed===!1)}function Pf(r){var a;return!!(r&&((a=r[Va])!==null&&a!==void 0?a:r.readableDidRead||r.readableAborted))}function If(r){var a,i,c,g,v,w,_,I,D,B;return!!(r&&((a=(i=(c=(g=(v=(w=r[Ga])!==null&&w!==void 0?w:r.readableErrored)!==null&&v!==void 0?v:r.writableErrored)!==null&&g!==void 0?g:(_=r._readableState)===null||_===void 0?void 0:_.errorEmitted)!==null&&c!==void 0?c:(I=r._writableState)===null||I===void 0?void 0:I.errorEmitted)!==null&&i!==void 0?i:(D=r._readableState)===null||D===void 0?void 0:D.errored)!==null&&a!==void 0?a:!((B=r._writableState)===null||B===void 0)&&B.errored))}var Yt={kDestroyed:$a,isDisturbed:Pf,kIsDisturbed:Va,isErrored:If,kIsErrored:Ga,isReadable:Ja,kIsReadable:xi,kIsClosedPromise:_f,kControllerErrorFunction:vf,isClosed:Rf,isDestroyed:cn,isDuplexNodeStream:wf,isFinished:xf,isIterable:Sf,isReadableNodeStream:ln,isReadableStream:Ya,isReadableEnded:Tf,isReadableFinished:qa,isReadableErrored:Af,isNodeStream:Mt,isWebStream:Ef,isWritable:Qa,isWritableNodeStream:un,isWritableStream:Ka,isWritableEnded:Ha,isWritableFinished:Cf,isWritableErrored:kf,isServerRequest:Lf,isServerResponse:es,willEmitClose:Ff,isTransformStream:Xa};const gr=ir,{AbortError:ts,codes:Df}=mt,{ERR_INVALID_ARG_TYPE:Mf,ERR_STREAM_PREMATURE_CLOSE:rs}=Df,{kEmptyObject:ki,once:Ai}=$t,{validateAbortSignal:jf,validateFunction:Of,validateObject:Nf,validateBoolean:Bf}=on,{Promise:Uf,PromisePrototypeThen:Wf}=et,{isClosed:zf,isReadable:ns,isReadableNodeStream:Ri,isReadableStream:$f,isReadableFinished:is,isReadableErrored:os,isWritable:as,isWritableNodeStream:ss,isWritableStream:Gf,isWritableFinished:ls,isWritableErrored:us,isNodeStream:Vf,willEmitClose:Yf,kIsClosedPromise:Kf}=Yt;function Xf(r){return r.setHeader&&typeof r.abort=="function"}const Li=()=>{};function cs(r,a,i){var c,g;if(arguments.length===2?(i=a,a=ki):a==null?a=ki:Nf(a,"options"),Of(i,"callback"),jf(a.signal,"options.signal"),i=Ai(i),$f(r)||Gf(r))return Hf(r,a,i);if(!Vf(r))throw new Mf("stream",["ReadableStream","WritableStream","Stream"],r);const v=(c=a.readable)!==null&&c!==void 0?c:Ri(r),w=(g=a.writable)!==null&&g!==void 0?g:ss(r),_=r._writableState,I=r._readableState,D=()=>{r.writable||H()};let B=Yf(r)&&Ri(r)===v&&ss(r)===w,te=ls(r,!1);const H=()=>{te=!0,r.destroyed&&(B=!1),!(B&&(!r.readable||v))&&(!v||re)&&i.call(r)};let re=is(r,!1);const X=()=>{re=!0,r.destroyed&&(B=!1),!(B&&(!r.writable||w))&&(!w||te)&&i.call(r)},Se=pe=>{i.call(r,pe)};let fe=zf(r);const ge=()=>{fe=!0;const pe=us(r)||os(r);if(pe&&typeof pe!="boolean")return i.call(r,pe);if(v&&!re&&Ri(r,!0)&&!is(r,!1))return i.call(r,new rs);if(w&&!te&&!ls(r,!1))return i.call(r,new rs);i.call(r)},J=()=>{fe=!0;const pe=us(r)||os(r);if(pe&&typeof pe!="boolean")return i.call(r,pe);i.call(r)},Le=()=>{r.req.on("finish",H)};Xf(r)?(r.on("complete",H),B||r.on("abort",ge),r.req?Le():r.on("request",Le)):w&&!_&&(r.on("end",D),r.on("close",D)),!B&&typeof r.aborted=="boolean"&&r.on("aborted",ge),r.on("end",X),r.on("finish",H),a.error!==!1&&r.on("error",Se),r.on("close",ge),fe?gr.nextTick(ge):_!=null&&_.errorEmitted||I!=null&&I.errorEmitted?B||gr.nextTick(J):(!v&&(!B||ns(r))&&(te||as(r)===!1)||!w&&(!B||as(r))&&(re||ns(r)===!1)||I&&r.req&&r.aborted)&&gr.nextTick(J);const We=()=>{i=Li,r.removeListener("aborted",ge),r.removeListener("complete",H),r.removeListener("abort",ge),r.removeListener("request",Le),r.req&&r.req.removeListener("finish",H),r.removeListener("end",D),r.removeListener("close",D),r.removeListener("finish",H),r.removeListener("end",X),r.removeListener("error",Se),r.removeListener("close",ge)};if(a.signal&&!fe){const pe=()=>{const we=i;We(),we.call(r,new ts(void 0,{cause:a.signal.reason}))};if(a.signal.aborted)gr.nextTick(pe);else{const we=i;i=Ai((...de)=>{a.signal.removeEventListener("abort",pe),we.apply(r,de)}),a.signal.addEventListener("abort",pe)}}return We}function Hf(r,a,i){let c=!1,g=Li;if(a.signal)if(g=()=>{c=!0,i.call(r,new ts(void 0,{cause:a.signal.reason}))},a.signal.aborted)gr.nextTick(g);else{const w=i;i=Ai((..._)=>{a.signal.removeEventListener("abort",g),w.apply(r,_)}),a.signal.addEventListener("abort",g)}const v=(...w)=>{c||gr.nextTick(()=>i.apply(r,w))};return Wf(r[Kf].promise,v,v),Li}function qf(r,a){var i;let c=!1;return a===null&&(a=ki),(i=a)!==null&&i!==void 0&&i.cleanup&&(Bf(a.cleanup,"cleanup"),c=a.cleanup),new Uf((g,v)=>{const w=cs(r,a,_=>{c&&w(),_?v(_):g()})})}Si.exports=cs,Si.exports.finished=qf;var qt=Si.exports;const jt=ir,{aggregateTwoErrors:Jf,codes:{ERR_MULTIPLE_CALLBACK:Qf},AbortError:Zf}=mt,{Symbol:fs}=et,{kDestroyed:ed,isDestroyed:td,isFinished:rd,isServerRequest:nd}=Yt,ds=fs("kDestroy"),Fi=fs("kConstruct");function hs(r,a,i){r&&(a&&!a.errored&&(a.errored=r),i&&!i.errored&&(i.errored=r))}function id(r,a){const i=this._readableState,c=this._writableState,g=c||i;return c!=null&&c.destroyed||i!=null&&i.destroyed?(typeof a=="function"&&a(),this):(hs(r,c,i),c&&(c.destroyed=!0),i&&(i.destroyed=!0),g.constructed?ps(this,r,a):this.once(ds,function(v){ps(this,Jf(v,r),a)}),this)}function ps(r,a,i){let c=!1;function g(v){if(c)return;c=!0;const w=r._readableState,_=r._writableState;hs(v,_,w),_&&(_.closed=!0),w&&(w.closed=!0),typeof i=="function"&&i(v),v?jt.nextTick(od,r,v):jt.nextTick(ms,r)}try{r._destroy(a||null,g)}catch(v){g(v)}}function od(r,a){Pi(r,a),ms(r)}function ms(r){const a=r._readableState,i=r._writableState;i&&(i.closeEmitted=!0),a&&(a.closeEmitted=!0),(i!=null&&i.emitClose||a!=null&&a.emitClose)&&r.emit("close")}function Pi(r,a){const i=r._readableState,c=r._writableState;c!=null&&c.errorEmitted||i!=null&&i.errorEmitted||(c&&(c.errorEmitted=!0),i&&(i.errorEmitted=!0),r.emit("error",a))}function ad(){const r=this._readableState,a=this._writableState;r&&(r.constructed=!0,r.closed=!1,r.closeEmitted=!1,r.destroyed=!1,r.errored=null,r.errorEmitted=!1,r.reading=!1,r.ended=r.readable===!1,r.endEmitted=r.readable===!1),a&&(a.constructed=!0,a.destroyed=!1,a.closed=!1,a.closeEmitted=!1,a.errored=null,a.errorEmitted=!1,a.finalCalled=!1,a.prefinished=!1,a.ended=a.writable===!1,a.ending=a.writable===!1,a.finished=a.writable===!1)}function Ii(r,a,i){const c=r._readableState,g=r._writableState;if(g!=null&&g.destroyed||c!=null&&c.destroyed)return this;c!=null&&c.autoDestroy||g!=null&&g.autoDestroy?r.destroy(a):a&&(g&&!g.errored&&(g.errored=a),c&&!c.errored&&(c.errored=a),i?jt.nextTick(Pi,r,a):Pi(r,a))}function sd(r,a){if(typeof r._construct!="function")return;const i=r._readableState,c=r._writableState;i&&(i.constructed=!1),c&&(c.constructed=!1),r.once(Fi,a),!(r.listenerCount(Fi)>1)&&jt.nextTick(ld,r)}function ld(r){let a=!1;function i(c){if(a){Ii(r,c??new Qf);return}a=!0;const g=r._readableState,v=r._writableState,w=v||g;g&&(g.constructed=!0),v&&(v.constructed=!0),w.destroyed?r.emit(ds,c):c?Ii(r,c,!0):jt.nextTick(ud,r)}try{r._construct(c=>{jt.nextTick(i,c)})}catch(c){jt.nextTick(i,c)}}function ud(r){r.emit(Fi)}function bs(r){return r?.setHeader&&typeof r.abort=="function"}function gs(r){r.emit("close")}function cd(r,a){r.emit("error",a),jt.nextTick(gs,r)}function fd(r,a){!r||td(r)||(!a&&!rd(r)&&(a=new Zf),nd(r)?(r.socket=null,r.destroy(a)):bs(r)?r.abort():bs(r.req)?r.req.abort():typeof r.destroy=="function"?r.destroy(a):typeof r.close=="function"?r.close():a?jt.nextTick(cd,r,a):jt.nextTick(gs,r),r.destroyed||(r[ed]=!0))}var yr={construct:sd,destroyer:fd,destroy:id,undestroy:ad,errorOrDestroy:Ii},Di={exports:{}},_r=typeof Reflect=="object"?Reflect:null,ys=_r&&typeof _r.apply=="function"?_r.apply:function(r,a,i){return Function.prototype.apply.call(r,a,i)},fn;_r&&typeof _r.ownKeys=="function"?fn=_r.ownKeys:Object.getOwnPropertySymbols?fn=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:fn=function(r){return Object.getOwnPropertyNames(r)};function dd(r){console&&console.warn&&console.warn(r)}var _s=Number.isNaN||function(r){return r!==r};function Ne(){Ne.init.call(this)}Di.exports=Ne,Di.exports.once=bd,Ne.EventEmitter=Ne,Ne.prototype._events=void 0,Ne.prototype._eventsCount=0,Ne.prototype._maxListeners=void 0;var vs=10;function dn(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Ne,"defaultMaxListeners",{enumerable:!0,get:function(){return vs},set:function(r){if(typeof r!="number"||r<0||_s(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");vs=r}}),Ne.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ne.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||_s(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function ws(r){return r._maxListeners===void 0?Ne.defaultMaxListeners:r._maxListeners}Ne.prototype.getMaxListeners=function(){return ws(this)},Ne.prototype.emit=function(r){for(var a=[],i=1;i<arguments.length;i++)a.push(arguments[i]);var c=r==="error",g=this._events;if(g!==void 0)c=c&&g.error===void 0;else if(!c)return!1;if(c){var v;if(a.length>0&&(v=a[0]),v instanceof Error)throw v;var w=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw w.context=v,w}var _=g[r];if(_===void 0)return!1;if(typeof _=="function")ys(_,this,a);else for(var I=_.length,D=xs(_,I),i=0;i<I;++i)ys(D[i],this,a);return!0};function Es(r,a,i,c){var g,v,w;if(dn(i),v=r._events,v===void 0?(v=r._events=Object.create(null),r._eventsCount=0):(v.newListener!==void 0&&(r.emit("newListener",a,i.listener?i.listener:i),v=r._events),w=v[a]),w===void 0)w=v[a]=i,++r._eventsCount;else if(typeof w=="function"?w=v[a]=c?[i,w]:[w,i]:c?w.unshift(i):w.push(i),g=ws(r),g>0&&w.length>g&&!w.warned){w.warned=!0;var _=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(a)+" listeners added. Use emitter.setMaxListeners() to increase limit");_.name="MaxListenersExceededWarning",_.emitter=r,_.type=a,_.count=w.length,dd(_)}return r}Ne.prototype.addListener=function(r,a){return Es(this,r,a,!1)},Ne.prototype.on=Ne.prototype.addListener,Ne.prototype.prependListener=function(r,a){return Es(this,r,a,!0)};function hd(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ss(r,a,i){var c={fired:!1,wrapFn:void 0,target:r,type:a,listener:i},g=hd.bind(c);return g.listener=i,c.wrapFn=g,g}Ne.prototype.once=function(r,a){return dn(a),this.on(r,Ss(this,r,a)),this},Ne.prototype.prependOnceListener=function(r,a){return dn(a),this.prependListener(r,Ss(this,r,a)),this},Ne.prototype.removeListener=function(r,a){var i,c,g,v,w;if(dn(a),c=this._events,c===void 0)return this;if(i=c[r],i===void 0)return this;if(i===a||i.listener===a)--this._eventsCount===0?this._events=Object.create(null):(delete c[r],c.removeListener&&this.emit("removeListener",r,i.listener||a));else if(typeof i!="function"){for(g=-1,v=i.length-1;v>=0;v--)if(i[v]===a||i[v].listener===a){w=i[v].listener,g=v;break}if(g<0)return this;g===0?i.shift():pd(i,g),i.length===1&&(c[r]=i[0]),c.removeListener!==void 0&&this.emit("removeListener",r,w||a)}return this},Ne.prototype.off=Ne.prototype.removeListener,Ne.prototype.removeAllListeners=function(r){var a,i,c;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[r]),this;if(arguments.length===0){var g=Object.keys(i),v;for(c=0;c<g.length;++c)v=g[c],v!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(a=i[r],typeof a=="function")this.removeListener(r,a);else if(a!==void 0)for(c=a.length-1;c>=0;c--)this.removeListener(r,a[c]);return this};function Cs(r,a,i){var c=r._events;if(c===void 0)return[];var g=c[a];return g===void 0?[]:typeof g=="function"?i?[g.listener||g]:[g]:i?md(g):xs(g,g.length)}Ne.prototype.listeners=function(r){return Cs(this,r,!0)},Ne.prototype.rawListeners=function(r){return Cs(this,r,!1)},Ne.listenerCount=function(r,a){return typeof r.listenerCount=="function"?r.listenerCount(a):Ts.call(r,a)},Ne.prototype.listenerCount=Ts;function Ts(r){var a=this._events;if(a!==void 0){var i=a[r];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}Ne.prototype.eventNames=function(){return this._eventsCount>0?fn(this._events):[]};function xs(r,a){for(var i=new Array(a),c=0;c<a;++c)i[c]=r[c];return i}function pd(r,a){for(;a+1<r.length;a++)r[a]=r[a+1];r.pop()}function md(r){for(var a=new Array(r.length),i=0;i<a.length;++i)a[i]=r[i].listener||r[i];return a}function bd(r,a){return new Promise(function(i,c){function g(w){r.removeListener(a,v),c(w)}function v(){typeof r.removeListener=="function"&&r.removeListener("error",g),i([].slice.call(arguments))}ks(r,a,v,{once:!0}),a!=="error"&&gd(r,g,{once:!0})})}function gd(r,a,i){typeof r.on=="function"&&ks(r,"error",a,i)}function ks(r,a,i,c){if(typeof r.on=="function")c.once?r.once(a,i):r.on(a,i);else if(typeof r.addEventListener=="function")r.addEventListener(a,function g(v){c.once&&r.removeEventListener(a,g),i(v)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var Mi=Di.exports;const{ArrayIsArray:yd,ObjectSetPrototypeOf:As}=et,{EventEmitter:hn}=Mi;function pn(r){hn.call(this,r)}As(pn.prototype,hn.prototype),As(pn,hn),pn.prototype.pipe=function(r,a){const i=this;function c(B){r.writable&&r.write(B)===!1&&i.pause&&i.pause()}i.on("data",c);function g(){i.readable&&i.resume&&i.resume()}r.on("drain",g),!r._isStdio&&(!a||a.end!==!1)&&(i.on("end",w),i.on("close",_));let v=!1;function w(){v||(v=!0,r.end())}function _(){v||(v=!0,typeof r.destroy=="function"&&r.destroy())}function I(B){D(),hn.listenerCount(this,"error")===0&&this.emit("error",B)}ji(i,"error",I),ji(r,"error",I);function D(){i.removeListener("data",c),r.removeListener("drain",g),i.removeListener("end",w),i.removeListener("close",_),i.removeListener("error",I),r.removeListener("error",I),i.removeListener("end",D),i.removeListener("close",D),r.removeListener("close",D)}return i.on("end",D),i.on("close",D),r.on("close",D),r.emit("pipe",i),r};function ji(r,a,i){if(typeof r.prependListener=="function")return r.prependListener(a,i);!r._events||!r._events[a]?r.on(a,i):yd(r._events[a])?r._events[a].unshift(i):r._events[a]=[i,r._events[a]]}var Oi={Stream:pn,prependListener:ji},Rs={exports:{}};(function(r){const{AbortError:a,codes:i}=mt,{isNodeStream:c,isWebStream:g,kControllerErrorFunction:v}=Yt,w=qt,{ERR_INVALID_ARG_TYPE:_}=i,I=(D,B)=>{if(typeof D!="object"||!("aborted"in D))throw new _(B,"AbortSignal",D)};r.exports.addAbortSignal=function(D,B){if(I(D,"signal"),!c(B)&&!g(B))throw new _("stream",["ReadableStream","WritableStream","Stream"],B);return r.exports.addAbortSignalNoValidate(D,B)},r.exports.addAbortSignalNoValidate=function(D,B){if(typeof D!="object"||!("aborted"in D))return B;const te=c(B)?()=>{B.destroy(new a(void 0,{cause:D.reason}))}:()=>{B[v](new a(void 0,{cause:D.reason}))};return D.aborted?te():(D.addEventListener("abort",te),w(B,()=>D.removeEventListener("abort",te))),B}})(Rs);var mn=Rs.exports;const{StringPrototypeSlice:Ls,SymbolIterator:_d,TypedArrayPrototypeSet:bn,Uint8Array:vd}=et,{Buffer:Ni}=Ht,{inspect:wd}=$t;var Ed=class{constructor(){this.head=null,this.tail=null,this.length=0}push(r){const a={data:r,next:null};this.length>0?this.tail.next=a:this.head=a,this.tail=a,++this.length}unshift(r){const a={data:r,next:this.head};this.length===0&&(this.tail=a),this.head=a,++this.length}shift(){if(this.length===0)return;const r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}clear(){this.head=this.tail=null,this.length=0}join(r){if(this.length===0)return"";let a=this.head,i=""+a.data;for(;(a=a.next)!==null;)i+=r+a.data;return i}concat(r){if(this.length===0)return Ni.alloc(0);const a=Ni.allocUnsafe(r>>>0);let i=this.head,c=0;for(;i;)bn(a,i.data,c),c+=i.data.length,i=i.next;return a}consume(r,a){const i=this.head.data;if(r<i.length){const c=i.slice(0,r);return this.head.data=i.slice(r),c}return r===i.length?this.shift():a?this._getString(r):this._getBuffer(r)}first(){return this.head.data}*[_d](){for(let r=this.head;r;r=r.next)yield r.data}_getString(r){let a="",i=this.head,c=0;do{const g=i.data;if(r>g.length)a+=g,r-=g.length;else{r===g.length?(a+=g,++c,i.next?this.head=i.next:this.head=this.tail=null):(a+=Ls(g,0,r),this.head=i,i.data=Ls(g,r));break}++c}while((i=i.next)!==null);return this.length-=c,a}_getBuffer(r){const a=Ni.allocUnsafe(r),i=r;let c=this.head,g=0;do{const v=c.data;if(r>v.length)bn(a,v,i-r),r-=v.length;else{r===v.length?(bn(a,v,i-r),++g,c.next?this.head=c.next:this.head=this.tail=null):(bn(a,new vd(v.buffer,v.byteOffset,r),i-r),this.head=c,c.data=v.slice(r));break}++g}while((c=c.next)!==null);return this.length-=g,a}[Symbol.for("nodejs.util.inspect.custom")](r,a){return wd(this,{...a,depth:0,customInspect:!1})}};const{MathFloor:Sd,NumberIsInteger:Cd}=et,{ERR_INVALID_ARG_VALUE:Td}=mt.codes;function xd(r,a,i){return r.highWaterMark!=null?r.highWaterMark:a?r[i]:null}function Fs(r){return r?16:16*1024}function kd(r,a,i,c){const g=xd(a,c,i);if(g!=null){if(!Cd(g)||g<0){const v=c?`options.${i}`:"options.highWaterMark";throw new Td(v,g)}return Sd(g)}return Fs(r.objectMode)}var Bi={getHighWaterMark:kd,getDefaultHighWaterMark:Fs},Ps={},Ui={exports:{}},Is={};(function(r){var a=Ir,i=tn,c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=_,r.SlowBuffer=J,r.INSPECT_MAX_BYTES=50;var g=2147483647;r.kMaxLength=g,_.TYPED_ARRAY_SUPPORT=v(),!_.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function v(){try{var u=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(u,h),u.foo()===42}catch{return!1}}Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}});function w(u){if(u>g)throw new RangeError('The value "'+u+'" is invalid for option "size"');var h=new Uint8Array(u);return Object.setPrototypeOf(h,_.prototype),h}function _(u,h,E){if(typeof u=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return te(u)}return I(u,h,E)}_.poolSize=8192;function I(u,h,E){if(typeof u=="string")return H(u,h);if(ArrayBuffer.isView(u))return X(u);if(u==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if(P(u,ArrayBuffer)||u&&P(u.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(P(u,SharedArrayBuffer)||u&&P(u.buffer,SharedArrayBuffer)))return Se(u,h,E);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var L=u.valueOf&&u.valueOf();if(L!=null&&L!==u)return _.from(L,h,E);var U=fe(u);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return _.from(u[Symbol.toPrimitive]("string"),h,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}_.from=function(u,h,E){return I(u,h,E)},Object.setPrototypeOf(_.prototype,Uint8Array.prototype),Object.setPrototypeOf(_,Uint8Array);function D(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}function B(u,h,E){return D(u),u<=0?w(u):h!==void 0?typeof E=="string"?w(u).fill(h,E):w(u).fill(h):w(u)}_.alloc=function(u,h,E){return B(u,h,E)};function te(u){return D(u),w(u<0?0:ge(u)|0)}_.allocUnsafe=function(u){return te(u)},_.allocUnsafeSlow=function(u){return te(u)};function H(u,h){if((typeof h!="string"||h==="")&&(h="utf8"),!_.isEncoding(h))throw new TypeError("Unknown encoding: "+h);var E=Le(u,h)|0,L=w(E),U=L.write(u,h);return U!==E&&(L=L.slice(0,U)),L}function re(u){for(var h=u.length<0?0:ge(u.length)|0,E=w(h),L=0;L<h;L+=1)E[L]=u[L]&255;return E}function X(u){if(P(u,Uint8Array)){var h=new Uint8Array(u);return Se(h.buffer,h.byteOffset,h.byteLength)}return re(u)}function Se(u,h,E){if(h<0||u.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(u.byteLength<h+(E||0))throw new RangeError('"length" is outside of buffer bounds');var L;return h===void 0&&E===void 0?L=new Uint8Array(u):E===void 0?L=new Uint8Array(u,h):L=new Uint8Array(u,h,E),Object.setPrototypeOf(L,_.prototype),L}function fe(u){if(_.isBuffer(u)){var h=ge(u.length)|0,E=w(h);return E.length===0||u.copy(E,0,0,h),E}if(u.length!==void 0)return typeof u.length!="number"||N(u.length)?w(0):re(u);if(u.type==="Buffer"&&Array.isArray(u.data))return re(u.data)}function ge(u){if(u>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return u|0}function J(u){return+u!=u&&(u=0),_.alloc(+u)}_.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==_.prototype},_.compare=function(u,h){if(P(u,Uint8Array)&&(u=_.from(u,u.offset,u.byteLength)),P(h,Uint8Array)&&(h=_.from(h,h.offset,h.byteLength)),!_.isBuffer(u)||!_.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===h)return 0;for(var E=u.length,L=h.length,U=0,j=Math.min(E,L);U<j;++U)if(u[U]!==h[U]){E=u[U],L=h[U];break}return E<L?-1:L<E?1:0},_.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(u,h){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return _.alloc(0);var E;if(h===void 0)for(h=0,E=0;E<u.length;++E)h+=u[E].length;var L=_.allocUnsafe(h),U=0;for(E=0;E<u.length;++E){var j=u[E];if(P(j,Uint8Array))U+j.length>L.length?_.from(j).copy(L,U):Uint8Array.prototype.set.call(L,j,U);else if(_.isBuffer(j))j.copy(L,U);else throw new TypeError('"list" argument must be an Array of Buffers');U+=j.length}return L};function Le(u,h){if(_.isBuffer(u))return u.length;if(ArrayBuffer.isView(u)||P(u,ArrayBuffer))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);var E=u.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&E===0)return 0;for(var U=!1;;)switch(h){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return Xe(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return nt(u).length;default:if(U)return L?-1:Xe(u).length;h=(""+h).toLowerCase(),U=!0}}_.byteLength=Le;function We(u,h,E){var L=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,h>>>=0,E<=h))return"";for(u||(u="utf8");;)switch(u){case"hex":return at(this,h,E);case"utf8":case"utf-8":return Ce(this,h,E);case"ascii":return ze(this,h,E);case"latin1":case"binary":return Oe(this,h,E);case"base64":return Pe(this,h,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,h,E);default:if(L)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),L=!0}}_.prototype._isBuffer=!0;function pe(u,h,E){var L=u[h];u[h]=u[E],u[E]=L}_.prototype.swap16=function(){var u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<u;h+=2)pe(this,h,h+1);return this},_.prototype.swap32=function(){var u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<u;h+=4)pe(this,h,h+3),pe(this,h+1,h+2);return this},_.prototype.swap64=function(){var u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<u;h+=8)pe(this,h,h+7),pe(this,h+1,h+6),pe(this,h+2,h+5),pe(this,h+3,h+4);return this},_.prototype.toString=function(){var u=this.length;return u===0?"":arguments.length===0?Ce(this,0,u):We.apply(this,arguments)},_.prototype.toLocaleString=_.prototype.toString,_.prototype.equals=function(u){if(!_.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:_.compare(this,u)===0},_.prototype.inspect=function(){var u="",h=r.INSPECT_MAX_BYTES;return u=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(u+=" ... "),"<Buffer "+u+">"},c&&(_.prototype[c]=_.prototype.inspect),_.prototype.compare=function(u,h,E,L,U){if(P(u,Uint8Array)&&(u=_.from(u,u.offset,u.byteLength)),!_.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(h===void 0&&(h=0),E===void 0&&(E=u?u.length:0),L===void 0&&(L=0),U===void 0&&(U=this.length),h<0||E>u.length||L<0||U>this.length)throw new RangeError("out of range index");if(L>=U&&h>=E)return 0;if(L>=U)return-1;if(h>=E)return 1;if(h>>>=0,E>>>=0,L>>>=0,U>>>=0,this===u)return 0;for(var j=U-L,ee=E-h,ke=Math.min(j,ee),Ve=this.slice(L,U),C=u.slice(h,E),T=0;T<ke;++T)if(Ve[T]!==C[T]){j=Ve[T],ee=C[T];break}return j<ee?-1:ee<j?1:0};function we(u,h,E,L,U){if(u.length===0)return-1;if(typeof E=="string"?(L=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,N(E)&&(E=U?0:u.length-1),E<0&&(E=u.length+E),E>=u.length){if(U)return-1;E=u.length-1}else if(E<0)if(U)E=0;else return-1;if(typeof h=="string"&&(h=_.from(h,L)),_.isBuffer(h))return h.length===0?-1:de(u,h,E,L,U);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(u,h,E):Uint8Array.prototype.lastIndexOf.call(u,h,E):de(u,[h],E,L,U);throw new TypeError("val must be string, number or Buffer")}function de(u,h,E,L,U){var j=1,ee=u.length,ke=h.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(u.length<2||h.length<2)return-1;j=2,ee/=2,ke/=2,E/=2}function Ve(b,A){return j===1?b[A]:b.readUInt16BE(A*j)}var C;if(U){var T=-1;for(C=E;C<ee;C++)if(Ve(u,C)===Ve(h,T===-1?0:C-T)){if(T===-1&&(T=C),C-T+1===ke)return T*j}else T!==-1&&(C-=C-T),T=-1}else for(E+ke>ee&&(E=ee-ke),C=E;C>=0;C--){for(var l=!0,f=0;f<ke;f++)if(Ve(u,C+f)!==Ve(h,f)){l=!1;break}if(l)return C}return-1}_.prototype.includes=function(u,h,E){return this.indexOf(u,h,E)!==-1},_.prototype.indexOf=function(u,h,E){return we(this,u,h,E,!0)},_.prototype.lastIndexOf=function(u,h,E){return we(this,u,h,E,!1)};function xe(u,h,E,L){E=Number(E)||0;var U=u.length-E;L?(L=Number(L),L>U&&(L=U)):L=U;var j=h.length;L>j/2&&(L=j/2);for(var ee=0;ee<L;++ee){var ke=parseInt(h.substr(ee*2,2),16);if(N(ke))return ee;u[E+ee]=ke}return ee}function ye(u,h,E,L){return Qe(Xe(h,u.length-E),u,E,L)}function F(u,h,E,L){return Qe(ht(h),u,E,L)}function Y(u,h,E,L){return Qe(nt(h),u,E,L)}function De(u,h,E,L){return Qe(bt(h,u.length-E),u,E,L)}_.prototype.write=function(u,h,E,L){if(h===void 0)L="utf8",E=this.length,h=0;else if(E===void 0&&typeof h=="string")L=h,E=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(E)?(E=E>>>0,L===void 0&&(L="utf8")):(L=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var U=this.length-h;if((E===void 0||E>U)&&(E=U),u.length>0&&(E<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");for(var j=!1;;)switch(L){case"hex":return xe(this,u,h,E);case"utf8":case"utf-8":return ye(this,u,h,E);case"ascii":case"latin1":case"binary":return F(this,u,h,E);case"base64":return Y(this,u,h,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,u,h,E);default:if(j)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),j=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Pe(u,h,E){return h===0&&E===u.length?a.fromByteArray(u):a.fromByteArray(u.slice(h,E))}function Ce(u,h,E){E=Math.min(u.length,E);for(var L=[],U=h;U<E;){var j=u[U],ee=null,ke=j>239?4:j>223?3:j>191?2:1;if(U+ke<=E){var Ve,C,T,l;switch(ke){case 1:j<128&&(ee=j);break;case 2:Ve=u[U+1],(Ve&192)===128&&(l=(j&31)<<6|Ve&63,l>127&&(ee=l));break;case 3:Ve=u[U+1],C=u[U+2],(Ve&192)===128&&(C&192)===128&&(l=(j&15)<<12|(Ve&63)<<6|C&63,l>2047&&(l<55296||l>57343)&&(ee=l));break;case 4:Ve=u[U+1],C=u[U+2],T=u[U+3],(Ve&192)===128&&(C&192)===128&&(T&192)===128&&(l=(j&15)<<18|(Ve&63)<<12|(C&63)<<6|T&63,l>65535&&l<1114112&&(ee=l))}}ee===null?(ee=65533,ke=1):ee>65535&&(ee-=65536,L.push(ee>>>10&1023|55296),ee=56320|ee&1023),L.push(ee),U+=ke}return Ge(L)}var ve=4096;function Ge(u){var h=u.length;if(h<=ve)return String.fromCharCode.apply(String,u);for(var E="",L=0;L<h;)E+=String.fromCharCode.apply(String,u.slice(L,L+=ve));return E}function ze(u,h,E){var L="";E=Math.min(u.length,E);for(var U=h;U<E;++U)L+=String.fromCharCode(u[U]&127);return L}function Oe(u,h,E){var L="";E=Math.min(u.length,E);for(var U=h;U<E;++U)L+=String.fromCharCode(u[U]);return L}function at(u,h,E){var L=u.length;(!h||h<0)&&(h=0),(!E||E<0||E>L)&&(E=L);for(var U="",j=h;j<E;++j)U+=q[u[j]];return U}function oe(u,h,E){for(var L=u.slice(h,E),U="",j=0;j<L.length-1;j+=2)U+=String.fromCharCode(L[j]+L[j+1]*256);return U}_.prototype.slice=function(u,h){var E=this.length;u=~~u,h=h===void 0?E:~~h,u<0?(u+=E,u<0&&(u=0)):u>E&&(u=E),h<0?(h+=E,h<0&&(h=0)):h>E&&(h=E),h<u&&(h=u);var L=this.subarray(u,h);return Object.setPrototypeOf(L,_.prototype),L};function _e(u,h,E){if(u%1!==0||u<0)throw new RangeError("offset is not uint");if(u+h>E)throw new RangeError("Trying to access beyond buffer length")}_.prototype.readUintLE=_.prototype.readUIntLE=function(u,h,E){u=u>>>0,h=h>>>0,E||_e(u,h,this.length);for(var L=this[u],U=1,j=0;++j<h&&(U*=256);)L+=this[u+j]*U;return L},_.prototype.readUintBE=_.prototype.readUIntBE=function(u,h,E){u=u>>>0,h=h>>>0,E||_e(u,h,this.length);for(var L=this[u+--h],U=1;h>0&&(U*=256);)L+=this[u+--h]*U;return L},_.prototype.readUint8=_.prototype.readUInt8=function(u,h){return u=u>>>0,h||_e(u,1,this.length),this[u]},_.prototype.readUint16LE=_.prototype.readUInt16LE=function(u,h){return u=u>>>0,h||_e(u,2,this.length),this[u]|this[u+1]<<8},_.prototype.readUint16BE=_.prototype.readUInt16BE=function(u,h){return u=u>>>0,h||_e(u,2,this.length),this[u]<<8|this[u+1]},_.prototype.readUint32LE=_.prototype.readUInt32LE=function(u,h){return u=u>>>0,h||_e(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},_.prototype.readUint32BE=_.prototype.readUInt32BE=function(u,h){return u=u>>>0,h||_e(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},_.prototype.readIntLE=function(u,h,E){u=u>>>0,h=h>>>0,E||_e(u,h,this.length);for(var L=this[u],U=1,j=0;++j<h&&(U*=256);)L+=this[u+j]*U;return U*=128,L>=U&&(L-=Math.pow(2,8*h)),L},_.prototype.readIntBE=function(u,h,E){u=u>>>0,h=h>>>0,E||_e(u,h,this.length);for(var L=h,U=1,j=this[u+--L];L>0&&(U*=256);)j+=this[u+--L]*U;return U*=128,j>=U&&(j-=Math.pow(2,8*h)),j},_.prototype.readInt8=function(u,h){return u=u>>>0,h||_e(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},_.prototype.readInt16LE=function(u,h){u=u>>>0,h||_e(u,2,this.length);var E=this[u]|this[u+1]<<8;return E&32768?E|4294901760:E},_.prototype.readInt16BE=function(u,h){u=u>>>0,h||_e(u,2,this.length);var E=this[u+1]|this[u]<<8;return E&32768?E|4294901760:E},_.prototype.readInt32LE=function(u,h){return u=u>>>0,h||_e(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},_.prototype.readInt32BE=function(u,h){return u=u>>>0,h||_e(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},_.prototype.readFloatLE=function(u,h){return u=u>>>0,h||_e(u,4,this.length),i.read(this,u,!0,23,4)},_.prototype.readFloatBE=function(u,h){return u=u>>>0,h||_e(u,4,this.length),i.read(this,u,!1,23,4)},_.prototype.readDoubleLE=function(u,h){return u=u>>>0,h||_e(u,8,this.length),i.read(this,u,!0,52,8)},_.prototype.readDoubleBE=function(u,h){return u=u>>>0,h||_e(u,8,this.length),i.read(this,u,!1,52,8)};function Re(u,h,E,L,U,j){if(!_.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>U||h<j)throw new RangeError('"value" argument is out of bounds');if(E+L>u.length)throw new RangeError("Index out of range")}_.prototype.writeUintLE=_.prototype.writeUIntLE=function(u,h,E,L){if(u=+u,h=h>>>0,E=E>>>0,!L){var U=Math.pow(2,8*E)-1;Re(this,u,h,E,U,0)}var j=1,ee=0;for(this[h]=u&255;++ee<E&&(j*=256);)this[h+ee]=u/j&255;return h+E},_.prototype.writeUintBE=_.prototype.writeUIntBE=function(u,h,E,L){if(u=+u,h=h>>>0,E=E>>>0,!L){var U=Math.pow(2,8*E)-1;Re(this,u,h,E,U,0)}var j=E-1,ee=1;for(this[h+j]=u&255;--j>=0&&(ee*=256);)this[h+j]=u/ee&255;return h+E},_.prototype.writeUint8=_.prototype.writeUInt8=function(u,h,E){return u=+u,h=h>>>0,E||Re(this,u,h,1,255,0),this[h]=u&255,h+1},_.prototype.writeUint16LE=_.prototype.writeUInt16LE=function(u,h,E){return u=+u,h=h>>>0,E||Re(this,u,h,2,65535,0),this[h]=u&255,this[h+1]=u>>>8,h+2},_.prototype.writeUint16BE=_.prototype.writeUInt16BE=function(u,h,E){return u=+u,h=h>>>0,E||Re(this,u,h,2,65535,0),this[h]=u>>>8,this[h+1]=u&255,h+2},_.prototype.writeUint32LE=_.prototype.writeUInt32LE=function(u,h,E){return u=+u,h=h>>>0,E||Re(this,u,h,4,4294967295,0),this[h+3]=u>>>24,this[h+2]=u>>>16,this[h+1]=u>>>8,this[h]=u&255,h+4},_.prototype.writeUint32BE=_.prototype.writeUInt32BE=function(u,h,E){return u=+u,h=h>>>0,E||Re(this,u,h,4,4294967295,0),this[h]=u>>>24,this[h+1]=u>>>16,this[h+2]=u>>>8,this[h+3]=u&255,h+4},_.prototype.writeIntLE=function(u,h,E,L){if(u=+u,h=h>>>0,!L){var U=Math.pow(2,8*E-1);Re(this,u,h,E,U-1,-U)}var j=0,ee=1,ke=0;for(this[h]=u&255;++j<E&&(ee*=256);)u<0&&ke===0&&this[h+j-1]!==0&&(ke=1),this[h+j]=(u/ee>>0)-ke&255;return h+E},_.prototype.writeIntBE=function(u,h,E,L){if(u=+u,h=h>>>0,!L){var U=Math.pow(2,8*E-1);Re(this,u,h,E,U-1,-U)}var j=E-1,ee=1,ke=0;for(this[h+j]=u&255;--j>=0&&(ee*=256);)u<0&&ke===0&&this[h+j+1]!==0&&(ke=1),this[h+j]=(u/ee>>0)-ke&255;return h+E},_.prototype.writeInt8=function(u,h,E){return u=+u,h=h>>>0,E||Re(this,u,h,1,127,-128),u<0&&(u=255+u+1),this[h]=u&255,h+1},_.prototype.writeInt16LE=function(u,h,E){return u=+u,h=h>>>0,E||Re(this,u,h,2,32767,-32768),this[h]=u&255,this[h+1]=u>>>8,h+2},_.prototype.writeInt16BE=function(u,h,E){return u=+u,h=h>>>0,E||Re(this,u,h,2,32767,-32768),this[h]=u>>>8,this[h+1]=u&255,h+2},_.prototype.writeInt32LE=function(u,h,E){return u=+u,h=h>>>0,E||Re(this,u,h,4,2147483647,-2147483648),this[h]=u&255,this[h+1]=u>>>8,this[h+2]=u>>>16,this[h+3]=u>>>24,h+4},_.prototype.writeInt32BE=function(u,h,E){return u=+u,h=h>>>0,E||Re(this,u,h,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[h]=u>>>24,this[h+1]=u>>>16,this[h+2]=u>>>8,this[h+3]=u&255,h+4};function vt(u,h,E,L,U,j){if(E+L>u.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function wt(u,h,E,L,U){return h=+h,E=E>>>0,U||vt(u,h,E,4),i.write(u,h,E,L,23,4),E+4}_.prototype.writeFloatLE=function(u,h,E){return wt(this,u,h,!0,E)},_.prototype.writeFloatBE=function(u,h,E){return wt(this,u,h,!1,E)};function dt(u,h,E,L,U){return h=+h,E=E>>>0,U||vt(u,h,E,8),i.write(u,h,E,L,52,8),E+8}_.prototype.writeDoubleLE=function(u,h,E){return dt(this,u,h,!0,E)},_.prototype.writeDoubleBE=function(u,h,E){return dt(this,u,h,!1,E)},_.prototype.copy=function(u,h,E,L){if(!_.isBuffer(u))throw new TypeError("argument should be a Buffer");if(E||(E=0),!L&&L!==0&&(L=this.length),h>=u.length&&(h=u.length),h||(h=0),L>0&&L<E&&(L=E),L===E||u.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),u.length-h<L-E&&(L=u.length-h+E);var U=L-E;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,E,L):Uint8Array.prototype.set.call(u,this.subarray(E,L),h),U},_.prototype.fill=function(u,h,E,L){if(typeof u=="string"){if(typeof h=="string"?(L=h,h=0,E=this.length):typeof E=="string"&&(L=E,E=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!_.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(u.length===1){var U=u.charCodeAt(0);(L==="utf8"&&U<128||L==="latin1")&&(u=U)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(h<0||this.length<h||this.length<E)throw new RangeError("Out of range index");if(E<=h)return this;h=h>>>0,E=E===void 0?this.length:E>>>0,u||(u=0);var j;if(typeof u=="number")for(j=h;j<E;++j)this[j]=u;else{var ee=_.isBuffer(u)?u:_.from(u,L),ke=ee.length;if(ke===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(j=0;j<E-h;++j)this[j+h]=ee[j%ke]}return this};var Nt=/[^+/0-9A-Za-z-_]/g;function tt(u){if(u=u.split("=")[0],u=u.trim().replace(Nt,""),u.length<2)return"";for(;u.length%4!==0;)u=u+"=";return u}function Xe(u,h){h=h||1/0;for(var E,L=u.length,U=null,j=[],ee=0;ee<L;++ee){if(E=u.charCodeAt(ee),E>55295&&E<57344){if(!U){if(E>56319){(h-=3)>-1&&j.push(239,191,189);continue}else if(ee+1===L){(h-=3)>-1&&j.push(239,191,189);continue}U=E;continue}if(E<56320){(h-=3)>-1&&j.push(239,191,189),U=E;continue}E=(U-55296<<10|E-56320)+65536}else U&&(h-=3)>-1&&j.push(239,191,189);if(U=null,E<128){if((h-=1)<0)break;j.push(E)}else if(E<2048){if((h-=2)<0)break;j.push(E>>6|192,E&63|128)}else if(E<65536){if((h-=3)<0)break;j.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((h-=4)<0)break;j.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return j}function ht(u){for(var h=[],E=0;E<u.length;++E)h.push(u.charCodeAt(E)&255);return h}function bt(u,h){for(var E,L,U,j=[],ee=0;ee<u.length&&!((h-=2)<0);++ee)E=u.charCodeAt(ee),L=E>>8,U=E%256,j.push(U),j.push(L);return j}function nt(u){return a.toByteArray(tt(u))}function Qe(u,h,E,L){for(var U=0;U<L&&!(U+E>=h.length||U>=u.length);++U)h[U+E]=u[U];return U}function P(u,h){return u instanceof h||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===h.name}function N(u){return u!==u}var q=function(){for(var u="0123456789abcdef",h=new Array(256),E=0;E<16;++E)for(var L=E*16,U=0;U<16;++U)h[L+U]=u[E]+u[U];return h}()})(Is);(function(r,a){var i=Is,c=i.Buffer;function g(w,_){for(var I in w)_[I]=w[I]}c.from&&c.alloc&&c.allocUnsafe&&c.allocUnsafeSlow?r.exports=i:(g(i,a),a.Buffer=v);function v(w,_,I){return c(w,_,I)}v.prototype=Object.create(c.prototype),g(c,v),v.from=function(w,_,I){if(typeof w=="number")throw new TypeError("Argument must not be a number");return c(w,_,I)},v.alloc=function(w,_,I){if(typeof w!="number")throw new TypeError("Argument must be a number");var D=c(w);return _!==void 0?typeof I=="string"?D.fill(_,I):D.fill(_):D.fill(0),D},v.allocUnsafe=function(w){if(typeof w!="number")throw new TypeError("Argument must be a number");return c(w)},v.allocUnsafeSlow=function(w){if(typeof w!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(w)}})(Ui,Ui.exports);var Ad=Ui.exports,Wi=Ad.Buffer,Ds=Wi.isEncoding||function(r){switch(r=""+r,r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Rd(r){if(!r)return"utf8";for(var a;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(a)return;r=(""+r).toLowerCase(),a=!0}}function Ld(r){var a=Rd(r);if(typeof a!="string"&&(Wi.isEncoding===Ds||!Ds(r)))throw new Error("Unknown encoding: "+r);return a||r}Ps.StringDecoder=Mr;function Mr(r){this.encoding=Ld(r);var a;switch(this.encoding){case"utf16le":this.text=jd,this.end=Od,a=4;break;case"utf8":this.fillLast=Id,a=4;break;case"base64":this.text=Nd,this.end=Bd,a=3;break;default:this.write=Ud,this.end=Wd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Wi.allocUnsafe(a)}Mr.prototype.write=function(r){if(r.length===0)return"";var a,i;if(this.lastNeed){if(a=this.fillLast(r),a===void 0)return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<r.length?a?a+this.text(r,i):this.text(r,i):a||""},Mr.prototype.end=Md,Mr.prototype.text=Dd,Mr.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};function zi(r){return r<=127?0:r>>5===6?2:r>>4===14?3:r>>3===30?4:r>>6===2?-1:-2}function Fd(r,a,i){var c=a.length-1;if(c<i)return 0;var g=zi(a[c]);return g>=0?(g>0&&(r.lastNeed=g-1),g):--c<i||g===-2?0:(g=zi(a[c]),g>=0?(g>0&&(r.lastNeed=g-2),g):--c<i||g===-2?0:(g=zi(a[c]),g>=0?(g>0&&(g===2?g=0:r.lastNeed=g-3),g):0))}function Pd(r,a,i){if((a[0]&192)!==128)return r.lastNeed=0,"\uFFFD";if(r.lastNeed>1&&a.length>1){if((a[1]&192)!==128)return r.lastNeed=1,"\uFFFD";if(r.lastNeed>2&&a.length>2&&(a[2]&192)!==128)return r.lastNeed=2,"\uFFFD"}}function Id(r){var a=this.lastTotal-this.lastNeed,i=Pd(this,r);if(i!==void 0)return i;if(this.lastNeed<=r.length)return r.copy(this.lastChar,a,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,a,0,r.length),this.lastNeed-=r.length}function Dd(r,a){var i=Fd(this,r,a);if(!this.lastNeed)return r.toString("utf8",a);this.lastTotal=i;var c=r.length-(i-this.lastNeed);return r.copy(this.lastChar,0,c),r.toString("utf8",a,c)}function Md(r){var a=r&&r.length?this.write(r):"";return this.lastNeed?a+"\uFFFD":a}function jd(r,a){if((r.length-a)%2===0){var i=r.toString("utf16le",a);if(i){var c=i.charCodeAt(i.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",a,r.length-1)}function Od(r){var a=r&&r.length?this.write(r):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return a+this.lastChar.toString("utf16le",0,i)}return a}function Nd(r,a){var i=(r.length-a)%3;return i===0?r.toString("base64",a):(this.lastNeed=3-i,this.lastTotal=3,i===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",a,r.length-i))}function Bd(r){var a=r&&r.length?this.write(r):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function Ud(r){return r.toString(this.encoding)}function Wd(r){return r&&r.length?this.write(r):""}const Ms=ir,{PromisePrototypeThen:zd,SymbolAsyncIterator:js,SymbolIterator:Os}=et,{Buffer:$d}=Ht,{ERR_INVALID_ARG_TYPE:Gd,ERR_STREAM_NULL_VALUES:Vd}=mt.codes;function Yd(r,a,i){let c;if(typeof a=="string"||a instanceof $d)return new r({objectMode:!0,...i,read(){this.push(a),this.push(null)}});let g;if(a&&a[js])g=!0,c=a[js]();else if(a&&a[Os])g=!1,c=a[Os]();else throw new Gd("iterable",["Iterable"],a);const v=new r({objectMode:!0,highWaterMark:1,...i});let w=!1;v._read=function(){w||(w=!0,I())},v._destroy=function(D,B){zd(_(D),()=>Ms.nextTick(B,D),te=>Ms.nextTick(B,te||D))};async function _(D){const B=D!=null,te=typeof c.throw=="function";if(B&&te){const{value:H,done:re}=await c.throw(D);if(await H,re)return}if(typeof c.return=="function"){const{value:H}=await c.return();await H}}async function I(){for(;;){try{const{value:D,done:B}=g?await c.next():c.next();if(B)v.push(null);else{const te=D&&typeof D.then=="function"?await D:D;if(te===null)throw w=!1,new Vd;if(v.push(te))continue;w=!1}}catch(D){v.destroy(D)}break}}return v}var Ns=Yd,$i,Bs;function gn(){if(Bs)return $i;Bs=1;const r=ir,{ArrayPrototypeIndexOf:a,NumberIsInteger:i,NumberIsNaN:c,NumberParseInt:g,ObjectDefineProperties:v,ObjectKeys:w,ObjectSetPrototypeOf:_,Promise:I,SafeSet:D,SymbolAsyncIterator:B,Symbol:te}=et;$i=oe,oe.ReadableState=at;const{EventEmitter:H}=Mi,{Stream:re,prependListener:X}=Oi,{Buffer:Se}=Ht,{addAbortSignal:fe}=mn,ge=qt;let J=$t.debuglog("stream",C=>{J=C});const Le=Ed,We=yr,{getHighWaterMark:pe,getDefaultHighWaterMark:we}=Bi,{aggregateTwoErrors:de,codes:{ERR_INVALID_ARG_TYPE:xe,ERR_METHOD_NOT_IMPLEMENTED:ye,ERR_OUT_OF_RANGE:F,ERR_STREAM_PUSH_AFTER_EOF:Y,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:De}}=mt,{validateObject:Pe}=on,Ce=te("kPaused"),{StringDecoder:ve}=Ps,Ge=Ns;_(oe.prototype,re.prototype),_(oe,re);const ze=()=>{},{errorOrDestroy:Oe}=We;function at(C,T,l){typeof l!="boolean"&&(l=T instanceof Kt()),this.objectMode=!!(C&&C.objectMode),l&&(this.objectMode=this.objectMode||!!(C&&C.readableObjectMode)),this.highWaterMark=C?pe(this,C,"readableHighWaterMark",l):we(!1),this.buffer=new Le,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Ce]=null,this.errorEmitted=!1,this.emitClose=!C||C.emitClose!==!1,this.autoDestroy=!C||C.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=C&&C.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,C&&C.encoding&&(this.decoder=new ve(C.encoding),this.encoding=C.encoding)}function oe(C){if(!(this instanceof oe))return new oe(C);const T=this instanceof Kt();this._readableState=new at(C,this,T),C&&(typeof C.read=="function"&&(this._read=C.read),typeof C.destroy=="function"&&(this._destroy=C.destroy),typeof C.construct=="function"&&(this._construct=C.construct),C.signal&&!T&&fe(C.signal,this)),re.call(this,C),We.construct(this,()=>{this._readableState.needReadable&&ht(this,this._readableState)})}oe.prototype.destroy=We.destroy,oe.prototype._undestroy=We.undestroy,oe.prototype._destroy=function(C,T){T(C)},oe.prototype[H.captureRejectionSymbol]=function(C){this.destroy(C)},oe.prototype.push=function(C,T){return _e(this,C,T,!1)},oe.prototype.unshift=function(C,T){return _e(this,C,T,!0)};function _e(C,T,l,f){J("readableAddChunk",T);const b=C._readableState;let A;if(b.objectMode||(typeof T=="string"?(l=l||b.defaultEncoding,b.encoding!==l&&(f&&b.encoding?T=Se.from(T,l).toString(b.encoding):(T=Se.from(T,l),l=""))):T instanceof Se?l="":re._isUint8Array(T)?(T=re._uint8ArrayToBuffer(T),l=""):T!=null&&(A=new xe("chunk",["string","Buffer","Uint8Array"],T))),A)Oe(C,A);else if(T===null)b.reading=!1,Nt(C,b);else if(b.objectMode||T&&T.length>0)if(f)if(b.endEmitted)Oe(C,new De);else{if(b.destroyed||b.errored)return!1;Re(C,b,T,!0)}else if(b.ended)Oe(C,new Y);else{if(b.destroyed||b.errored)return!1;b.reading=!1,b.decoder&&!l?(T=b.decoder.write(T),b.objectMode||T.length!==0?Re(C,b,T,!1):ht(C,b)):Re(C,b,T,!1)}else f||(b.reading=!1,ht(C,b));return!b.ended&&(b.length<b.highWaterMark||b.length===0)}function Re(C,T,l,f){T.flowing&&T.length===0&&!T.sync&&C.listenerCount("data")>0?(T.multiAwaitDrain?T.awaitDrainWriters.clear():T.awaitDrainWriters=null,T.dataEmitted=!0,C.emit("data",l)):(T.length+=T.objectMode?1:l.length,f?T.buffer.unshift(l):T.buffer.push(l),T.needReadable&&tt(C)),ht(C,T)}oe.prototype.isPaused=function(){const C=this._readableState;return C[Ce]===!0||C.flowing===!1},oe.prototype.setEncoding=function(C){const T=new ve(C);this._readableState.decoder=T,this._readableState.encoding=this._readableState.decoder.encoding;const l=this._readableState.buffer;let f="";for(const b of l)f+=T.write(b);return l.clear(),f!==""&&l.push(f),this._readableState.length=f.length,this};const vt=1073741824;function wt(C){if(C>vt)throw new F("size","<= 1GiB",C);return C--,C|=C>>>1,C|=C>>>2,C|=C>>>4,C|=C>>>8,C|=C>>>16,C++,C}function dt(C,T){return C<=0||T.length===0&&T.ended?0:T.objectMode?1:c(C)?T.flowing&&T.length?T.buffer.first().length:T.length:C<=T.length?C:T.ended?T.length:0}oe.prototype.read=function(C){J("read",C),C===void 0?C=NaN:i(C)||(C=g(C,10));const T=this._readableState,l=C;if(C>T.highWaterMark&&(T.highWaterMark=wt(C)),C!==0&&(T.emittedReadable=!1),C===0&&T.needReadable&&((T.highWaterMark!==0?T.length>=T.highWaterMark:T.length>0)||T.ended))return J("read: emitReadable",T.length,T.ended),T.length===0&&T.ended?U(this):tt(this),null;if(C=dt(C,T),C===0&&T.ended)return T.length===0&&U(this),null;let f=T.needReadable;if(J("need readable",f),(T.length===0||T.length-C<T.highWaterMark)&&(f=!0,J("length less than watermark",f)),T.ended||T.reading||T.destroyed||T.errored||!T.constructed)f=!1,J("reading, ended or constructing",f);else if(f){J("do read"),T.reading=!0,T.sync=!0,T.length===0&&(T.needReadable=!0);try{this._read(T.highWaterMark)}catch(A){Oe(this,A)}T.sync=!1,T.reading||(C=dt(l,T))}let b;return C>0?b=L(C,T):b=null,b===null?(T.needReadable=T.length<=T.highWaterMark,C=0):(T.length-=C,T.multiAwaitDrain?T.awaitDrainWriters.clear():T.awaitDrainWriters=null),T.length===0&&(T.ended||(T.needReadable=!0),l!==C&&T.ended&&U(this)),b!==null&&!T.errorEmitted&&!T.closeEmitted&&(T.dataEmitted=!0,this.emit("data",b)),b};function Nt(C,T){if(J("onEofChunk"),!T.ended){if(T.decoder){const l=T.decoder.end();l&&l.length&&(T.buffer.push(l),T.length+=T.objectMode?1:l.length)}T.ended=!0,T.sync?tt(C):(T.needReadable=!1,T.emittedReadable=!0,Xe(C))}}function tt(C){const T=C._readableState;J("emitReadable",T.needReadable,T.emittedReadable),T.needReadable=!1,T.emittedReadable||(J("emitReadable",T.flowing),T.emittedReadable=!0,r.nextTick(Xe,C))}function Xe(C){const T=C._readableState;J("emitReadable_",T.destroyed,T.length,T.ended),!T.destroyed&&!T.errored&&(T.length||T.ended)&&(C.emit("readable"),T.emittedReadable=!1),T.needReadable=!T.flowing&&!T.ended&&T.length<=T.highWaterMark,u(C)}function ht(C,T){!T.readingMore&&T.constructed&&(T.readingMore=!0,r.nextTick(bt,C,T))}function bt(C,T){for(;!T.reading&&!T.ended&&(T.length<T.highWaterMark||T.flowing&&T.length===0);){const l=T.length;if(J("maybeReadMore read 0"),C.read(0),l===T.length)break}T.readingMore=!1}oe.prototype._read=function(C){throw new ye("_read()")},oe.prototype.pipe=function(C,T){const l=this,f=this._readableState;f.pipes.length===1&&(f.multiAwaitDrain||(f.multiAwaitDrain=!0,f.awaitDrainWriters=new D(f.awaitDrainWriters?[f.awaitDrainWriters]:[]))),f.pipes.push(C),J("pipe count=%d opts=%j",f.pipes.length,T);const b=(!T||T.end!==!1)&&C!==r.stdout&&C!==r.stderr?M:Jt;f.endEmitted?r.nextTick(b):l.once("end",b),C.on("unpipe",A);function A(gt,St){J("onunpipe"),gt===l&&St&&St.hasUnpiped===!1&&(St.hasUnpiped=!0,je())}function M(){J("onend"),C.end()}let $,ne=!1;function je(){J("cleanup"),C.removeListener("close",Be),C.removeListener("finish",Et),$&&C.removeListener("drain",$),C.removeListener("error",Me),C.removeListener("unpipe",A),l.removeListener("end",M),l.removeListener("end",Jt),l.removeListener("data",me),ne=!0,$&&f.awaitDrainWriters&&(!C._writableState||C._writableState.needDrain)&&$()}function He(){ne||(f.pipes.length===1&&f.pipes[0]===C?(J("false write response, pause",0),f.awaitDrainWriters=C,f.multiAwaitDrain=!1):f.pipes.length>1&&f.pipes.includes(C)&&(J("false write response, pause",f.awaitDrainWriters.size),f.awaitDrainWriters.add(C)),l.pause()),$||($=nt(l,C),C.on("drain",$))}l.on("data",me);function me(gt){J("ondata");const St=C.write(gt);J("dest.write",St),St===!1&&He()}function Me(gt){if(J("onerror",gt),Jt(),C.removeListener("error",Me),C.listenerCount("error")===0){const St=C._writableState||C._readableState;St&&!St.errorEmitted?Oe(C,gt):C.emit("error",gt)}}X(C,"error",Me);function Be(){C.removeListener("finish",Et),Jt()}C.once("close",Be);function Et(){J("onfinish"),C.removeListener("close",Be),Jt()}C.once("finish",Et);function Jt(){J("unpipe"),l.unpipe(C)}return C.emit("pipe",l),C.writableNeedDrain===!0?f.flowing&&He():f.flowing||(J("pipe resume"),l.resume()),C};function nt(C,T){return function(){const l=C._readableState;l.awaitDrainWriters===T?(J("pipeOnDrain",1),l.awaitDrainWriters=null):l.multiAwaitDrain&&(J("pipeOnDrain",l.awaitDrainWriters.size),l.awaitDrainWriters.delete(T)),(!l.awaitDrainWriters||l.awaitDrainWriters.size===0)&&C.listenerCount("data")&&C.resume()}}oe.prototype.unpipe=function(C){const T=this._readableState,l={hasUnpiped:!1};if(T.pipes.length===0)return this;if(!C){const b=T.pipes;T.pipes=[],this.pause();for(let A=0;A<b.length;A++)b[A].emit("unpipe",this,{hasUnpiped:!1});return this}const f=a(T.pipes,C);return f===-1?this:(T.pipes.splice(f,1),T.pipes.length===0&&this.pause(),C.emit("unpipe",this,l),this)},oe.prototype.on=function(C,T){const l=re.prototype.on.call(this,C,T),f=this._readableState;return C==="data"?(f.readableListening=this.listenerCount("readable")>0,f.flowing!==!1&&this.resume()):C==="readable"&&!f.endEmitted&&!f.readableListening&&(f.readableListening=f.needReadable=!0,f.flowing=!1,f.emittedReadable=!1,J("on readable",f.length,f.reading),f.length?tt(this):f.reading||r.nextTick(P,this)),l},oe.prototype.addListener=oe.prototype.on,oe.prototype.removeListener=function(C,T){const l=re.prototype.removeListener.call(this,C,T);return C==="readable"&&r.nextTick(Qe,this),l},oe.prototype.off=oe.prototype.removeListener,oe.prototype.removeAllListeners=function(C){const T=re.prototype.removeAllListeners.apply(this,arguments);return(C==="readable"||C===void 0)&&r.nextTick(Qe,this),T};function Qe(C){const T=C._readableState;T.readableListening=C.listenerCount("readable")>0,T.resumeScheduled&&T[Ce]===!1?T.flowing=!0:C.listenerCount("data")>0?C.resume():T.readableListening||(T.flowing=null)}function P(C){J("readable nexttick read 0"),C.read(0)}oe.prototype.resume=function(){const C=this._readableState;return C.flowing||(J("resume"),C.flowing=!C.readableListening,N(this,C)),C[Ce]=!1,this};function N(C,T){T.resumeScheduled||(T.resumeScheduled=!0,r.nextTick(q,C,T))}function q(C,T){J("resume",T.reading),T.reading||C.read(0),T.resumeScheduled=!1,C.emit("resume"),u(C),T.flowing&&!T.reading&&C.read(0)}oe.prototype.pause=function(){return J("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(J("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ce]=!0,this};function u(C){const T=C._readableState;for(J("flow",T.flowing);T.flowing&&C.read()!==null;);}oe.prototype.wrap=function(C){let T=!1;C.on("data",f=>{!this.push(f)&&C.pause&&(T=!0,C.pause())}),C.on("end",()=>{this.push(null)}),C.on("error",f=>{Oe(this,f)}),C.on("close",()=>{this.destroy()}),C.on("destroy",()=>{this.destroy()}),this._read=()=>{T&&C.resume&&(T=!1,C.resume())};const l=w(C);for(let f=1;f<l.length;f++){const b=l[f];this[b]===void 0&&typeof C[b]=="function"&&(this[b]=C[b].bind(C))}return this},oe.prototype[B]=function(){return h(this)},oe.prototype.iterator=function(C){return C!==void 0&&Pe(C,"options"),h(this,C)};function h(C,T){typeof C.read!="function"&&(C=oe.wrap(C,{objectMode:!0}));const l=E(C,T);return l.stream=C,l}async function*E(C,T){let l=ze;function f(M){this===C?(l(),l=ze):l=M}C.on("readable",f);let b;const A=ge(C,{writable:!1},M=>{b=M?de(b,M):null,l(),l=ze});try{for(;;){const M=C.destroyed?null:C.read();if(M!==null)yield M;else{if(b)throw b;if(b===null)return;await new I(f)}}}catch(M){throw b=de(b,M),b}finally{(b||T?.destroyOnReturn!==!1)&&(b===void 0||C._readableState.autoDestroy)?We.destroyer(C,null):(C.off("readable",f),A())}}v(oe.prototype,{readable:{__proto__:null,get(){const C=this._readableState;return!!C&&C.readable!==!1&&!C.destroyed&&!C.errorEmitted&&!C.endEmitted},set(C){this._readableState&&(this._readableState.readable=!!C)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(C){this._readableState&&(this._readableState.flowing=C)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(C){this._readableState&&(this._readableState.destroyed=C)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),v(at.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Ce]!==!1},set(C){this[Ce]=!!C}}}),oe._fromList=L;function L(C,T){if(T.length===0)return null;let l;return T.objectMode?l=T.buffer.shift():!C||C>=T.length?(T.decoder?l=T.buffer.join(""):T.buffer.length===1?l=T.buffer.first():l=T.buffer.concat(T.length),T.buffer.clear()):l=T.buffer.consume(C,T.decoder),l}function U(C){const T=C._readableState;J("endReadable",T.endEmitted),T.endEmitted||(T.ended=!0,r.nextTick(j,T,C))}function j(C,T){if(J("endReadableNT",C.endEmitted,C.length),!C.errored&&!C.closeEmitted&&!C.endEmitted&&C.length===0){if(C.endEmitted=!0,T.emit("end"),T.writable&&T.allowHalfOpen===!1)r.nextTick(ee,T);else if(C.autoDestroy){const l=T._writableState;(!l||l.autoDestroy&&(l.finished||l.writable===!1))&&T.destroy()}}}function ee(C){C.writable&&!C.writableEnded&&!C.destroyed&&C.end()}oe.from=function(C,T){return Ge(oe,C,T)};let ke;function Ve(){return ke===void 0&&(ke={}),ke}return oe.fromWeb=function(C,T){return Ve().newStreamReadableFromReadableStream(C,T)},oe.toWeb=function(C,T){return Ve().newReadableStreamFromStreamReadable(C,T)},oe.wrap=function(C,T){var l,f;return new oe({objectMode:(l=(f=C.readableObjectMode)!==null&&f!==void 0?f:C.objectMode)!==null&&l!==void 0?l:!0,...T,destroy(b,A){We.destroyer(C,b),A(b)}}).wrap(C)},$i}var Gi,Us;function Ws(){if(Us)return Gi;Us=1;const r=ir,{ArrayPrototypeSlice:a,Error:i,FunctionPrototypeSymbolHasInstance:c,ObjectDefineProperty:g,ObjectDefineProperties:v,ObjectSetPrototypeOf:w,StringPrototypeToLowerCase:_,Symbol:I,SymbolHasInstance:D}=et;Gi=ve,ve.WritableState=Pe;const{EventEmitter:B}=Mi,te=Oi.Stream,{Buffer:H}=Ht,re=yr,{addAbortSignal:X}=mn,{getHighWaterMark:Se,getDefaultHighWaterMark:fe}=Bi,{ERR_INVALID_ARG_TYPE:ge,ERR_METHOD_NOT_IMPLEMENTED:J,ERR_MULTIPLE_CALLBACK:Le,ERR_STREAM_CANNOT_PIPE:We,ERR_STREAM_DESTROYED:pe,ERR_STREAM_ALREADY_FINISHED:we,ERR_STREAM_NULL_VALUES:de,ERR_STREAM_WRITE_AFTER_END:xe,ERR_UNKNOWN_ENCODING:ye}=mt.codes,{errorOrDestroy:F}=re;w(ve.prototype,te.prototype),w(ve,te);function Y(){}const De=I("kOnFinished");function Pe(P,N,q){typeof q!="boolean"&&(q=N instanceof Kt()),this.objectMode=!!(P&&P.objectMode),q&&(this.objectMode=this.objectMode||!!(P&&P.writableObjectMode)),this.highWaterMark=P?Se(this,P,"writableHighWaterMark",q):fe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const u=!!(P&&P.decodeStrings===!1);this.decodeStrings=!u,this.defaultEncoding=P&&P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=oe.bind(void 0,N),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Ce(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!P||P.emitClose!==!1,this.autoDestroy=!P||P.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[De]=[]}function Ce(P){P.buffered=[],P.bufferedIndex=0,P.allBuffers=!0,P.allNoop=!0}Pe.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},g(Pe.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ve(P){const N=this instanceof Kt();if(!N&&!c(ve,this))return new ve(P);this._writableState=new Pe(P,this,N),P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final),typeof P.construct=="function"&&(this._construct=P.construct),P.signal&&X(P.signal,this)),te.call(this,P),re.construct(this,()=>{const q=this._writableState;q.writing||wt(this,q),Xe(this,q)})}g(ve,D,{__proto__:null,value:function(P){return c(this,P)?!0:this!==ve?!1:P&&P._writableState instanceof Pe}}),ve.prototype.pipe=function(){F(this,new We)};function Ge(P,N,q,u){const h=P._writableState;if(typeof q=="function")u=q,q=h.defaultEncoding;else{if(!q)q=h.defaultEncoding;else if(q!=="buffer"&&!H.isEncoding(q))throw new ye(q);typeof u!="function"&&(u=Y)}if(N===null)throw new de;if(!h.objectMode)if(typeof N=="string")h.decodeStrings!==!1&&(N=H.from(N,q),q="buffer");else if(N instanceof H)q="buffer";else if(te._isUint8Array(N))N=te._uint8ArrayToBuffer(N),q="buffer";else throw new ge("chunk",["string","Buffer","Uint8Array"],N);let E;return h.ending?E=new xe:h.destroyed&&(E=new pe("write")),E?(r.nextTick(u,E),F(P,E,!0),E):(h.pendingcb++,ze(P,h,N,q,u))}ve.prototype.write=function(P,N,q){return Ge(this,P,N,q)===!0},ve.prototype.cork=function(){this._writableState.corked++},ve.prototype.uncork=function(){const P=this._writableState;P.corked&&(P.corked--,P.writing||wt(this,P))},ve.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=_(P)),!H.isEncoding(P))throw new ye(P);return this._writableState.defaultEncoding=P,this};function ze(P,N,q,u,h){const E=N.objectMode?1:q.length;N.length+=E;const L=N.length<N.highWaterMark;return L||(N.needDrain=!0),N.writing||N.corked||N.errored||!N.constructed?(N.buffered.push({chunk:q,encoding:u,callback:h}),N.allBuffers&&u!=="buffer"&&(N.allBuffers=!1),N.allNoop&&h!==Y&&(N.allNoop=!1)):(N.writelen=E,N.writecb=h,N.writing=!0,N.sync=!0,P._write(q,u,N.onwrite),N.sync=!1),L&&!N.errored&&!N.destroyed}function Oe(P,N,q,u,h,E,L){N.writelen=u,N.writecb=L,N.writing=!0,N.sync=!0,N.destroyed?N.onwrite(new pe("write")):q?P._writev(h,N.onwrite):P._write(h,E,N.onwrite),N.sync=!1}function at(P,N,q,u){--N.pendingcb,u(q),vt(N),F(P,q)}function oe(P,N){const q=P._writableState,u=q.sync,h=q.writecb;if(typeof h!="function"){F(P,new Le);return}q.writing=!1,q.writecb=null,q.length-=q.writelen,q.writelen=0,N?(q.errored||(q.errored=N),P._readableState&&!P._readableState.errored&&(P._readableState.errored=N),u?r.nextTick(at,P,q,N,h):at(P,q,N,h)):(q.buffered.length>q.bufferedIndex&&wt(P,q),u?q.afterWriteTickInfo!==null&&q.afterWriteTickInfo.cb===h?q.afterWriteTickInfo.count++:(q.afterWriteTickInfo={count:1,cb:h,stream:P,state:q},r.nextTick(_e,q.afterWriteTickInfo)):Re(P,q,1,h))}function _e({stream:P,state:N,count:q,cb:u}){return N.afterWriteTickInfo=null,Re(P,N,q,u)}function Re(P,N,q,u){for(!N.ending&&!P.destroyed&&N.length===0&&N.needDrain&&(N.needDrain=!1,P.emit("drain"));q-- >0;)N.pendingcb--,u();N.destroyed&&vt(N),Xe(P,N)}function vt(P){if(P.writing)return;for(let h=P.bufferedIndex;h<P.buffered.length;++h){var N;const{chunk:E,callback:L}=P.buffered[h],U=P.objectMode?1:E.length;P.length-=U,L((N=P.errored)!==null&&N!==void 0?N:new pe("write"))}const q=P[De].splice(0);for(let h=0;h<q.length;h++){var u;q[h]((u=P.errored)!==null&&u!==void 0?u:new pe("end"))}Ce(P)}function wt(P,N){if(N.corked||N.bufferProcessing||N.destroyed||!N.constructed)return;const{buffered:q,bufferedIndex:u,objectMode:h}=N,E=q.length-u;if(!E)return;let L=u;if(N.bufferProcessing=!0,E>1&&P._writev){N.pendingcb-=E-1;const U=N.allNoop?Y:ee=>{for(let ke=L;ke<q.length;++ke)q[ke].callback(ee)},j=N.allNoop&&L===0?q:a(q,L);j.allBuffers=N.allBuffers,Oe(P,N,!0,N.length,j,"",U),Ce(N)}else{do{const{chunk:U,encoding:j,callback:ee}=q[L];q[L++]=null;const ke=h?1:U.length;Oe(P,N,!1,ke,U,j,ee)}while(L<q.length&&!N.writing);L===q.length?Ce(N):L>256?(q.splice(0,L),N.bufferedIndex=0):N.bufferedIndex=L}N.bufferProcessing=!1}ve.prototype._write=function(P,N,q){if(this._writev)this._writev([{chunk:P,encoding:N}],q);else throw new J("_write()")},ve.prototype._writev=null,ve.prototype.end=function(P,N,q){const u=this._writableState;typeof P=="function"?(q=P,P=null,N=null):typeof N=="function"&&(q=N,N=null);let h;if(P!=null){const E=Ge(this,P,N);E instanceof i&&(h=E)}return u.corked&&(u.corked=1,this.uncork()),h||(!u.errored&&!u.ending?(u.ending=!0,Xe(this,u,!0),u.ended=!0):u.finished?h=new we("end"):u.destroyed&&(h=new pe("end"))),typeof q=="function"&&(h||u.finished?r.nextTick(q,h):u[De].push(q)),this};function dt(P){return P.ending&&!P.destroyed&&P.constructed&&P.length===0&&!P.errored&&P.buffered.length===0&&!P.finished&&!P.writing&&!P.errorEmitted&&!P.closeEmitted}function Nt(P,N){let q=!1;function u(h){if(q){F(P,h??Le());return}if(q=!0,N.pendingcb--,h){const E=N[De].splice(0);for(let L=0;L<E.length;L++)E[L](h);F(P,h,N.sync)}else dt(N)&&(N.prefinished=!0,P.emit("prefinish"),N.pendingcb++,r.nextTick(ht,P,N))}N.sync=!0,N.pendingcb++;try{P._final(u)}catch(h){u(h)}N.sync=!1}function tt(P,N){!N.prefinished&&!N.finalCalled&&(typeof P._final=="function"&&!N.destroyed?(N.finalCalled=!0,Nt(P,N)):(N.prefinished=!0,P.emit("prefinish")))}function Xe(P,N,q){dt(N)&&(tt(P,N),N.pendingcb===0&&(q?(N.pendingcb++,r.nextTick((u,h)=>{dt(h)?ht(u,h):h.pendingcb--},P,N)):dt(N)&&(N.pendingcb++,ht(P,N))))}function ht(P,N){N.pendingcb--,N.finished=!0;const q=N[De].splice(0);for(let u=0;u<q.length;u++)q[u]();if(P.emit("finish"),N.autoDestroy){const u=P._readableState;(!u||u.autoDestroy&&(u.endEmitted||u.readable===!1))&&P.destroy()}}v(ve.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(P){this._writableState&&(this._writableState.destroyed=P)}},writable:{__proto__:null,get(){const P=this._writableState;return!!P&&P.writable!==!1&&!P.destroyed&&!P.errored&&!P.ending&&!P.ended},set(P){this._writableState&&(this._writableState.writable=!!P)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const P=this._writableState;return P?!P.destroyed&&!P.ending&&P.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const bt=re.destroy;ve.prototype.destroy=function(P,N){const q=this._writableState;return!q.destroyed&&(q.bufferedIndex<q.buffered.length||q[De].length)&&r.nextTick(vt,q),bt.call(this,P,N),this},ve.prototype._undestroy=re.undestroy,ve.prototype._destroy=function(P,N){N(P)},ve.prototype[B.captureRejectionSymbol]=function(P){this.destroy(P)};let nt;function Qe(){return nt===void 0&&(nt={}),nt}return ve.fromWeb=function(P,N){return Qe().newStreamWritableFromWritableStream(P,N)},ve.toWeb=function(P){return Qe().newWritableStreamFromStreamWritable(P)},Gi}var Vi,zs;function Kd(){if(zs)return Vi;zs=1;const r=ir,a=Ht,{isReadable:i,isWritable:c,isIterable:g,isNodeStream:v,isReadableNodeStream:w,isWritableNodeStream:_,isDuplexNodeStream:I}=Yt,D=qt,{AbortError:B,codes:{ERR_INVALID_ARG_TYPE:te,ERR_INVALID_RETURN_VALUE:H}}=mt,{destroyer:re}=yr,X=Kt(),Se=gn(),{createDeferredPromise:fe}=$t,ge=Ns,J=globalThis.Blob||a.Blob,Le=typeof J<"u"?function(ye){return ye instanceof J}:function(ye){return!1},We=globalThis.AbortController||gi().AbortController,{FunctionPrototypeCall:pe}=et;class we extends X{constructor(F){super(F),F?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),F?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Vi=function ye(F,Y){if(I(F))return F;if(w(F))return xe({readable:F});if(_(F))return xe({writable:F});if(v(F))return xe({writable:!1,readable:!1});if(typeof F=="function"){const{value:Pe,write:Ce,final:ve,destroy:Ge}=de(F);if(g(Pe))return ge(we,Pe,{objectMode:!0,write:Ce,final:ve,destroy:Ge});const ze=Pe?.then;if(typeof ze=="function"){let Oe;const at=pe(ze,Pe,oe=>{if(oe!=null)throw new H("nully","body",oe)},oe=>{re(Oe,oe)});return Oe=new we({objectMode:!0,readable:!1,write:Ce,final(oe){ve(async()=>{try{await at,r.nextTick(oe,null)}catch(_e){r.nextTick(oe,_e)}})},destroy:Ge})}throw new H("Iterable, AsyncIterable or AsyncFunction",Y,Pe)}if(Le(F))return ye(F.arrayBuffer());if(g(F))return ge(we,F,{objectMode:!0,writable:!1});if(typeof F?.writable=="object"||typeof F?.readable=="object"){const Pe=F!=null&&F.readable?w(F?.readable)?F?.readable:ye(F.readable):void 0,Ce=F!=null&&F.writable?_(F?.writable)?F?.writable:ye(F.writable):void 0;return xe({readable:Pe,writable:Ce})}const De=F?.then;if(typeof De=="function"){let Pe;return pe(De,F,Ce=>{Ce!=null&&Pe.push(Ce),Pe.push(null)},Ce=>{re(Pe,Ce)}),Pe=new we({objectMode:!0,writable:!1,read(){}})}throw new te(Y,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],F)};function de(ye){let{promise:F,resolve:Y}=fe();const De=new We,Pe=De.signal;return{value:ye(async function*(){for(;;){const Ce=F;F=null;const{chunk:ve,done:Ge,cb:ze}=await Ce;if(r.nextTick(ze),Ge)return;if(Pe.aborted)throw new B(void 0,{cause:Pe.reason});({promise:F,resolve:Y}=fe()),yield ve}}(),{signal:Pe}),write(Ce,ve,Ge){const ze=Y;Y=null,ze({chunk:Ce,done:!1,cb:Ge})},final(Ce){const ve=Y;Y=null,ve({done:!0,cb:Ce})},destroy(Ce,ve){De.abort(),ve(Ce)}}}function xe(ye){const F=ye.readable&&typeof ye.readable.read!="function"?Se.wrap(ye.readable):ye.readable,Y=ye.writable;let De=!!i(F),Pe=!!c(Y),Ce,ve,Ge,ze,Oe;function at(oe){const _e=ze;ze=null,_e?_e(oe):oe&&Oe.destroy(oe)}return Oe=new we({readableObjectMode:!!(F!=null&&F.readableObjectMode),writableObjectMode:!!(Y!=null&&Y.writableObjectMode),readable:De,writable:Pe}),Pe&&(D(Y,oe=>{Pe=!1,oe&&re(F,oe),at(oe)}),Oe._write=function(oe,_e,Re){Y.write(oe,_e)?Re():Ce=Re},Oe._final=function(oe){Y.end(),ve=oe},Y.on("drain",function(){if(Ce){const oe=Ce;Ce=null,oe()}}),Y.on("finish",function(){if(ve){const oe=ve;ve=null,oe()}})),De&&(D(F,oe=>{De=!1,oe&&re(F,oe),at(oe)}),F.on("readable",function(){if(Ge){const oe=Ge;Ge=null,oe()}}),F.on("end",function(){Oe.push(null)}),Oe._read=function(){for(;;){const oe=F.read();if(oe===null){Ge=Oe._read;return}if(!Oe.push(oe))return}}),Oe._destroy=function(oe,_e){!oe&&ze!==null&&(oe=new B),Ge=null,Ce=null,ve=null,ze===null?_e(oe):(ze=_e,re(Y,oe),re(F,oe))},Oe}return Vi}var Yi,$s;function Kt(){if($s)return Yi;$s=1;const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:a,ObjectKeys:i,ObjectSetPrototypeOf:c}=et;Yi=w;const g=gn(),v=Ws();c(w.prototype,g.prototype),c(w,g);{const B=i(v.prototype);for(let te=0;te<B.length;te++){const H=B[te];w.prototype[H]||(w.prototype[H]=v.prototype[H])}}function w(B){if(!(this instanceof w))return new w(B);g.call(this,B),v.call(this,B),B?(this.allowHalfOpen=B.allowHalfOpen!==!1,B.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),B.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(w.prototype,{writable:{__proto__:null,...a(v.prototype,"writable")},writableHighWaterMark:{__proto__:null,...a(v.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...a(v.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...a(v.prototype,"writableBuffer")},writableLength:{__proto__:null,...a(v.prototype,"writableLength")},writableFinished:{__proto__:null,...a(v.prototype,"writableFinished")},writableCorked:{__proto__:null,...a(v.prototype,"writableCorked")},writableEnded:{__proto__:null,...a(v.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...a(v.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(B){this._readableState&&this._writableState&&(this._readableState.destroyed=B,this._writableState.destroyed=B)}}});let _;function I(){return _===void 0&&(_={}),_}w.fromWeb=function(B,te){return I().newStreamDuplexFromReadableWritablePair(B,te)},w.toWeb=function(B){return I().newReadableWritablePairFromDuplex(B)};let D;return w.from=function(B){return D||(D=Kd()),D(B,"body")},Yi}const{ObjectSetPrototypeOf:Gs,Symbol:Xd}=et;var Vs=Xt;const{ERR_METHOD_NOT_IMPLEMENTED:Hd}=mt.codes,Ki=Kt(),{getHighWaterMark:qd}=Bi;Gs(Xt.prototype,Ki.prototype),Gs(Xt,Ki);const jr=Xd("kCallback");function Xt(r){if(!(this instanceof Xt))return new Xt(r);const a=r?qd(this,r,"readableHighWaterMark",!0):null;a===0&&(r={...r,highWaterMark:null,readableHighWaterMark:a,writableHighWaterMark:r.writableHighWaterMark||0}),Ki.call(this,r),this._readableState.sync=!1,this[jr]=null,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",Jd)}function Xi(r){typeof this._flush=="function"&&!this.destroyed?this._flush((a,i)=>{if(a){r?r(a):this.destroy(a);return}i!=null&&this.push(i),this.push(null),r&&r()}):(this.push(null),r&&r())}function Jd(){this._final!==Xi&&Xi.call(this)}Xt.prototype._final=Xi,Xt.prototype._transform=function(r,a,i){throw new Hd("_transform()")},Xt.prototype._write=function(r,a,i){const c=this._readableState,g=this._writableState,v=c.length;this._transform(r,a,(w,_)=>{if(w){i(w);return}_!=null&&this.push(_),g.ended||v===c.length||c.length<c.highWaterMark?i():this[jr]=i})},Xt.prototype._read=function(){if(this[jr]){const r=this[jr];this[jr]=null,r()}};const{ObjectSetPrototypeOf:Ys}=et;var Ks=vr;const Hi=Vs;Ys(vr.prototype,Hi.prototype),Ys(vr,Hi);function vr(r){if(!(this instanceof vr))return new vr(r);Hi.call(this,r)}vr.prototype._transform=function(r,a,i){i(null,r)};const Or=ir,{ArrayIsArray:Qd,Promise:Zd,SymbolAsyncIterator:eh}=et,yn=qt,{once:th}=$t,rh=yr,Xs=Kt(),{aggregateTwoErrors:nh,codes:{ERR_INVALID_ARG_TYPE:qi,ERR_INVALID_RETURN_VALUE:Ji,ERR_MISSING_ARGS:ih,ERR_STREAM_DESTROYED:oh,ERR_STREAM_PREMATURE_CLOSE:ah},AbortError:sh}=mt,{validateFunction:lh,validateAbortSignal:uh}=on,{isIterable:or,isReadable:Qi,isReadableNodeStream:_n,isNodeStream:Hs,isTransformStream:wr,isWebStream:ch,isReadableStream:Zi,isReadableEnded:fh}=Yt,dh=globalThis.AbortController||gi().AbortController;let eo,to;function qs(r,a,i){let c=!1;r.on("close",()=>{c=!0});const g=yn(r,{readable:a,writable:i},v=>{c=!v});return{destroy:v=>{c||(c=!0,rh.destroyer(r,v||new oh("pipe")))},cleanup:g}}function hh(r){return lh(r[r.length-1],"streams[stream.length - 1]"),r.pop()}function ro(r){if(or(r))return r;if(_n(r))return ph(r);throw new qi("val",["Readable","Iterable","AsyncIterable"],r)}async function*ph(r){to||(to=gn()),yield*to.prototype[eh].call(r)}async function vn(r,a,i,{end:c}){let g,v=null;const w=D=>{if(D&&(g=D),v){const B=v;v=null,B()}},_=()=>new Zd((D,B)=>{g?B(g):v=()=>{g?B(g):D()}});a.on("drain",w);const I=yn(a,{readable:!1},w);try{a.writableNeedDrain&&await _();for await(const D of r)a.write(D)||await _();c&&a.end(),await _(),i()}catch(D){i(g!==D?nh(g,D):D)}finally{I(),a.off("drain",w)}}async function no(r,a,i,{end:c}){wr(a)&&(a=a.writable);const g=a.getWriter();try{for await(const v of r)await g.ready,g.write(v).catch(()=>{});await g.ready,c&&await g.close(),i()}catch(v){try{await g.abort(v),i(v)}catch(w){i(w)}}}function mh(...r){return Js(r,th(hh(r)))}function Js(r,a,i){if(r.length===1&&Qd(r[0])&&(r=r[0]),r.length<2)throw new ih("streams");const c=new dh,g=c.signal,v=i?.signal,w=[];uh(v,"options.signal");function _(){re(new sh)}v?.addEventListener("abort",_);let I,D;const B=[];let te=0;function H(ge){re(ge,--te===0)}function re(ge,J){if(ge&&(!I||I.code==="ERR_STREAM_PREMATURE_CLOSE")&&(I=ge),!(!I&&!J)){for(;B.length;)B.shift()(I);v?.removeEventListener("abort",_),c.abort(),J&&(I||w.forEach(Le=>Le()),Or.nextTick(a,I,D))}}let X;for(let ge=0;ge<r.length;ge++){const J=r[ge],Le=ge<r.length-1,We=ge>0,pe=Le||i?.end!==!1,we=ge===r.length-1;if(Hs(J)){let de=function(xe){xe&&xe.name!=="AbortError"&&xe.code!=="ERR_STREAM_PREMATURE_CLOSE"&&H(xe)};if(pe){const{destroy:xe,cleanup:ye}=qs(J,Le,We);B.push(xe),Qi(J)&&we&&w.push(ye)}J.on("error",de),Qi(J)&&we&&w.push(()=>{J.removeListener("error",de)})}if(ge===0)if(typeof J=="function"){if(X=J({signal:g}),!or(X))throw new Ji("Iterable, AsyncIterable or Stream","source",X)}else or(J)||_n(J)||wr(J)?X=J:X=Xs.from(J);else if(typeof J=="function"){if(wr(X)){var Se;X=ro((Se=X)===null||Se===void 0?void 0:Se.readable)}else X=ro(X);if(X=J(X,{signal:g}),Le){if(!or(X,!0))throw new Ji("AsyncIterable",`transform[${ge-1}]`,X)}else{var fe;eo||(eo=Ks);const de=new eo({objectMode:!0}),xe=(fe=X)===null||fe===void 0?void 0:fe.then;if(typeof xe=="function")te++,xe.call(X,Y=>{D=Y,Y!=null&&de.write(Y),pe&&de.end(),Or.nextTick(H)},Y=>{de.destroy(Y),Or.nextTick(H,Y)});else if(or(X,!0))te++,vn(X,de,H,{end:pe});else if(Zi(X)||wr(X)){const Y=X.readable||X;te++,vn(Y,de,H,{end:pe})}else throw new Ji("AsyncIterable or Promise","destination",X);X=de;const{destroy:ye,cleanup:F}=qs(X,!1,!0);B.push(ye),we&&w.push(F)}}else if(Hs(J)){if(_n(X)){te+=2;const de=bh(X,J,H,{end:pe});Qi(J)&&we&&w.push(de)}else if(wr(X)||Zi(X)){const de=X.readable||X;te++,vn(de,J,H,{end:pe})}else if(or(X))te++,vn(X,J,H,{end:pe});else throw new qi("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],X);X=J}else if(ch(J)){if(_n(X))te++,no(ro(X),J,H,{end:pe});else if(Zi(X)||or(X))te++,no(X,J,H,{end:pe});else if(wr(X))te++,no(X.readable,J,H,{end:pe});else throw new qi("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],X);X=J}else X=Xs.from(J)}return(g!=null&&g.aborted||v!=null&&v.aborted)&&Or.nextTick(_),X}function bh(r,a,i,{end:c}){let g=!1;if(a.on("close",()=>{g||i(new ah)}),r.pipe(a,{end:!1}),c){let v=function(){g=!0,a.end()};fh(r)?Or.nextTick(v):r.once("end",v)}else i();return yn(r,{readable:!0,writable:!1},v=>{const w=r._readableState;v&&v.code==="ERR_STREAM_PREMATURE_CLOSE"&&w&&w.ended&&!w.errored&&!w.errorEmitted?r.once("end",i).once("error",i):i(v)}),yn(a,{readable:!1,writable:!0},i)}var io={pipelineImpl:Js,pipeline:mh};const{pipeline:gh}=io,wn=Kt(),{destroyer:yh}=yr,{isNodeStream:En,isReadable:Qs,isWritable:Zs,isWebStream:oo,isTransformStream:ar,isWritableStream:el,isReadableStream:tl}=Yt,{AbortError:_h,codes:{ERR_INVALID_ARG_VALUE:rl,ERR_MISSING_ARGS:vh}}=mt,wh=qt;var nl=function(...r){if(r.length===0)throw new vh("streams");if(r.length===1)return wn.from(r[0]);const a=[...r];if(typeof r[0]=="function"&&(r[0]=wn.from(r[0])),typeof r[r.length-1]=="function"){const H=r.length-1;r[H]=wn.from(r[H])}for(let H=0;H<r.length;++H)if(!(!En(r[H])&&!oo(r[H]))){if(H<r.length-1&&!(Qs(r[H])||tl(r[H])||ar(r[H])))throw new rl(`streams[${H}]`,a[H],"must be readable");if(H>0&&!(Zs(r[H])||el(r[H])||ar(r[H])))throw new rl(`streams[${H}]`,a[H],"must be writable")}let i,c,g,v,w;function _(H){const re=v;v=null,re?re(H):H?w.destroy(H):!te&&!B&&w.destroy()}const I=r[0],D=gh(r,_),B=!!(Zs(I)||el(I)||ar(I)),te=!!(Qs(D)||tl(D)||ar(D));if(w=new wn({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(D!=null&&D.writableObjectMode),writable:B,readable:te}),B){if(En(I))w._write=function(re,X,Se){I.write(re,X)?Se():i=Se},w._final=function(re){I.end(),c=re},I.on("drain",function(){if(i){const re=i;i=null,re()}});else if(oo(I)){const re=(ar(I)?I.writable:I).getWriter();w._write=async function(X,Se,fe){try{await re.ready,re.write(X).catch(()=>{}),fe()}catch(ge){fe(ge)}},w._final=async function(X){try{await re.ready,re.close().catch(()=>{}),c=X}catch(Se){X(Se)}}}const H=ar(D)?D.readable:D;wh(H,()=>{if(c){const re=c;c=null,re()}})}if(te){if(En(D))D.on("readable",function(){if(g){const H=g;g=null,H()}}),D.on("end",function(){w.push(null)}),w._read=function(){for(;;){const H=D.read();if(H===null){g=w._read;return}if(!w.push(H))return}};else if(oo(D)){const H=(ar(D)?D.readable:D).getReader();w._read=async function(){for(;;)try{const{value:re,done:X}=await H.read();if(!w.push(re))return;if(X){w.push(null);return}}catch{return}}}}return w._destroy=function(H,re){!H&&v!==null&&(H=new _h),g=null,i=null,c=null,v===null?re(H):(v=re,En(D)&&yh(D,H))},w};const il=globalThis.AbortController||gi().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Eh,ERR_INVALID_ARG_TYPE:Nr,ERR_MISSING_ARGS:Sh,ERR_OUT_OF_RANGE:Ch},AbortError:Ot}=mt,{validateAbortSignal:sr,validateInteger:Th,validateObject:lr}=on,xh=et.Symbol("kWeak"),{finished:kh}=qt,Ah=nl,{addAbortSignalNoValidate:Rh}=mn,{isWritable:Lh,isNodeStream:Fh}=Yt,{ArrayPrototypePush:Ph,MathFloor:Ih,Number:Dh,NumberIsNaN:Mh,Promise:ol,PromiseReject:al,PromisePrototypeThen:jh,Symbol:sl}=et,Sn=sl("kEmpty"),ll=sl("kEof");function Oh(r,a){if(a!=null&&lr(a,"options"),a?.signal!=null&&sr(a.signal,"options.signal"),Fh(r)&&!Lh(r))throw new Eh("stream",r,"must be writable");const i=Ah(this,r);return a!=null&&a.signal&&Rh(a.signal,i),i}function Cn(r,a){if(typeof r!="function")throw new Nr("fn",["Function","AsyncFunction"],r);a!=null&&lr(a,"options"),a?.signal!=null&&sr(a.signal,"options.signal");let i=1;return a?.concurrency!=null&&(i=Ih(a.concurrency)),Th(i,"concurrency",1),async function*(){var c,g;const v=new il,w=this,_=[],I=v.signal,D={signal:I},B=()=>v.abort();a!=null&&(c=a.signal)!==null&&c!==void 0&&c.aborted&&B(),a==null||(g=a.signal)===null||g===void 0||g.addEventListener("abort",B);let te,H,re=!1;function X(){re=!0}async function Se(){try{for await(let J of w){var fe;if(re)return;if(I.aborted)throw new Ot;try{J=r(J,D)}catch(Le){J=al(Le)}J!==Sn&&(typeof((fe=J)===null||fe===void 0?void 0:fe.catch)=="function"&&J.catch(X),_.push(J),te&&(te(),te=null),!re&&_.length&&_.length>=i&&await new ol(Le=>{H=Le}))}_.push(ll)}catch(J){const Le=al(J);jh(Le,void 0,X),_.push(Le)}finally{var ge;re=!0,te&&(te(),te=null),a==null||(ge=a.signal)===null||ge===void 0||ge.removeEventListener("abort",B)}}Se();try{for(;;){for(;_.length>0;){const fe=await _[0];if(fe===ll)return;if(I.aborted)throw new Ot;fe!==Sn&&(yield fe),_.shift(),H&&(H(),H=null)}await new ol(fe=>{te=fe})}}finally{v.abort(),re=!0,H&&(H(),H=null)}}.call(this)}function Nh(r=void 0){return r!=null&&lr(r,"options"),r?.signal!=null&&sr(r.signal,"options.signal"),async function*(){let a=0;for await(const c of this){var i;if(r!=null&&(i=r.signal)!==null&&i!==void 0&&i.aborted)throw new Ot({cause:r.signal.reason});yield[a++,c]}}.call(this)}async function ul(r,a=void 0){for await(const i of ao.call(this,r,a))return!0;return!1}async function Bh(r,a=void 0){if(typeof r!="function")throw new Nr("fn",["Function","AsyncFunction"],r);return!await ul.call(this,async(...i)=>!await r(...i),a)}async function Uh(r,a){for await(const i of ao.call(this,r,a))return i}async function Wh(r,a){if(typeof r!="function")throw new Nr("fn",["Function","AsyncFunction"],r);async function i(c,g){return await r(c,g),Sn}for await(const c of Cn.call(this,i,a));}function ao(r,a){if(typeof r!="function")throw new Nr("fn",["Function","AsyncFunction"],r);async function i(c,g){return await r(c,g)?c:Sn}return Cn.call(this,i,a)}class zh extends Sh{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function $h(r,a,i){var c;if(typeof r!="function")throw new Nr("reducer",["Function","AsyncFunction"],r);i!=null&&lr(i,"options"),i?.signal!=null&&sr(i.signal,"options.signal");let g=arguments.length>1;if(i!=null&&(c=i.signal)!==null&&c!==void 0&&c.aborted){const D=new Ot(void 0,{cause:i.signal.reason});throw this.once("error",()=>{}),await kh(this.destroy(D)),D}const v=new il,w=v.signal;if(i!=null&&i.signal){const D={once:!0,[xh]:this};i.signal.addEventListener("abort",()=>v.abort(),D)}let _=!1;try{for await(const D of this){var I;if(_=!0,i!=null&&(I=i.signal)!==null&&I!==void 0&&I.aborted)throw new Ot;g?a=await r(a,D,{signal:w}):(a=D,g=!0)}if(!_&&!g)throw new zh}finally{v.abort()}return a}async function Gh(r){r!=null&&lr(r,"options"),r?.signal!=null&&sr(r.signal,"options.signal");const a=[];for await(const c of this){var i;if(r!=null&&(i=r.signal)!==null&&i!==void 0&&i.aborted)throw new Ot(void 0,{cause:r.signal.reason});Ph(a,c)}return a}function Vh(r,a){const i=Cn.call(this,r,a);return async function*(){for await(const c of i)yield*c}.call(this)}function cl(r){if(r=Dh(r),Mh(r))return 0;if(r<0)throw new Ch("number",">= 0",r);return r}function Yh(r,a=void 0){return a!=null&&lr(a,"options"),a?.signal!=null&&sr(a.signal,"options.signal"),r=cl(r),async function*(){var i;if(a!=null&&(i=a.signal)!==null&&i!==void 0&&i.aborted)throw new Ot;for await(const g of this){var c;if(a!=null&&(c=a.signal)!==null&&c!==void 0&&c.aborted)throw new Ot;r--<=0&&(yield g)}}.call(this)}function Kh(r,a=void 0){return a!=null&&lr(a,"options"),a?.signal!=null&&sr(a.signal,"options.signal"),r=cl(r),async function*(){var i;if(a!=null&&(i=a.signal)!==null&&i!==void 0&&i.aborted)throw new Ot;for await(const g of this){var c;if(a!=null&&(c=a.signal)!==null&&c!==void 0&&c.aborted)throw new Ot;if(r-- >0)yield g;else return}}.call(this)}bi.streamReturningOperators={asIndexedPairs:Nh,drop:Yh,filter:ao,flatMap:Vh,map:Cn,take:Kh,compose:Oh},bi.promiseReturningOperators={every:Bh,forEach:Wh,reduce:$h,toArray:Gh,some:ul,find:Uh};var so,fl;function dl(){if(fl)return so;fl=1;const{ArrayPrototypePop:r,Promise:a}=et,{isIterable:i,isNodeStream:c,isWebStream:g}=Yt,{pipelineImpl:v}=io,{finished:w}=qt;pl();function _(...I){return new a((D,B)=>{let te,H;const re=I[I.length-1];if(re&&typeof re=="object"&&!c(re)&&!i(re)&&!g(re)){const X=r(I);te=X.signal,H=X.end}v(I,(X,Se)=>{X?B(X):D(Se)},{signal:te,end:H})})}return so={finished:w,pipeline:_},so}var hl;function pl(){if(hl)return pi.exports;hl=1;const{Buffer:r}=Ht,{ObjectDefineProperty:a,ObjectKeys:i,ReflectApply:c}=et,{promisify:{custom:g}}=$t,{streamReturningOperators:v,promiseReturningOperators:w}=bi,{codes:{ERR_ILLEGAL_CONSTRUCTOR:_}}=mt,I=nl,{pipeline:D}=io,{destroyer:B}=yr,te=qt,H=dl(),re=Yt,X=pi.exports=Oi.Stream;X.isDisturbed=re.isDisturbed,X.isErrored=re.isErrored,X.isReadable=re.isReadable,X.Readable=gn();for(const fe of i(v)){let ge=function(...Le){if(new.target)throw _();return X.Readable.from(c(J,this,Le))};const J=v[fe];a(ge,"name",{__proto__:null,value:J.name}),a(ge,"length",{__proto__:null,value:J.length}),a(X.Readable.prototype,fe,{__proto__:null,value:ge,enumerable:!1,configurable:!0,writable:!0})}for(const fe of i(w)){let ge=function(...Le){if(new.target)throw _();return c(J,this,Le)};const J=w[fe];a(ge,"name",{__proto__:null,value:J.name}),a(ge,"length",{__proto__:null,value:J.length}),a(X.Readable.prototype,fe,{__proto__:null,value:ge,enumerable:!1,configurable:!0,writable:!0})}X.Writable=Ws(),X.Duplex=Kt(),X.Transform=Vs,X.PassThrough=Ks,X.pipeline=D;const{addAbortSignal:Se}=mn;return X.addAbortSignal=Se,X.finished=te,X.destroy=B,X.compose=I,a(X,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return H}}),a(D,g,{__proto__:null,enumerable:!0,get(){return H.pipeline}}),a(te,g,{__proto__:null,enumerable:!0,get(){return H.finished}}),X.Stream=X,X._isUint8Array=function(fe){return fe instanceof Uint8Array},X._uint8ArrayToBuffer=function(fe){return r.from(fe.buffer,fe.byteOffset,fe.byteLength)},pi.exports}(function(r){const a=pl(),i=dl(),c=a.Readable.destroy;r.exports=a.Readable,r.exports._uint8ArrayToBuffer=a._uint8ArrayToBuffer,r.exports._isUint8Array=a._isUint8Array,r.exports.isDisturbed=a.isDisturbed,r.exports.isErrored=a.isErrored,r.exports.isReadable=a.isReadable,r.exports.Readable=a.Readable,r.exports.Writable=a.Writable,r.exports.Duplex=a.Duplex,r.exports.Transform=a.Transform,r.exports.PassThrough=a.PassThrough,r.exports.addAbortSignal=a.addAbortSignal,r.exports.finished=a.finished,r.exports.destroy=a.destroy,r.exports.destroy=c,r.exports.pipeline=a.pipeline,r.exports.compose=a.compose,Object.defineProperty(a,"promises",{configurable:!0,enumerable:!0,get(){return i}}),r.exports.Stream=a.Stream,r.exports.default=r.exports})(Ea);var lo=Ea.exports;class Xh{constructor(a){le(this,"_module"),this._module=a}allocate(a){const i=this._module.canvas.getContext("webgl2"),c=i.createTexture();i.bindTexture(i.TEXTURE_2D,c),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),a&&i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,a),i.bindTexture(i.TEXTURE_2D,null);const g=this._module.GL.getNewId(this._module.GL.textures);return this._module.GL.textures[g]=c,{id:g}}release(a){const i=typeof a=="number"?a:a.id;this._module.canvas.getContext("webgl2").deleteTexture(this._module.GL.textures[i]),this._module.GL.textures[i]=null}}class Hh{constructor(a){le(this,"_module"),this._module=a}allocate(a){const i=this._module._malloc(a);return{buffer:()=>this._module.HEAPU8.buffer,byteOffset:i,byteLength:a}}release(a){const i=typeof a=="number"?a:a.byteOffset;this._module._free(i)}}async function ml(r,a){let i=new Hh(r),c=new Xh(r);const g={width:a.displayWidth,height:a.displayHeight},v=i.allocate(a.allocationSize({rect:g})),w=a instanceof Qr?v:new DataView(v.buffer(),v.byteOffset,v.byteLength),_=a.texture?c.allocate(a.texture).id:0,I=a.horizontalFlip;switch(a.format){case"RGB":case"RGBA":case"BGR":case"BGRA":const D=a.format;return a.copyTo(w).then(()=>r.FrameData.makeFromBpc8WithTexID(_,v.byteOffset,()=>{i.release(v),c.release(_)},g.width,g.height,r.CameraOrientation.DEG_0,r.PixelFormat[D],I,0));case"NV12":return a.copyTo(w).then(B=>r.FrameData.makeFromYuvNV12(v.byteOffset+B[0].offset,v.byteOffset+B[1].offset,()=>{i.release(v)},g.width,g.height,r.CameraOrientation.DEG_0,I,0));case"I420":return a.copyTo(w).then(B=>r.FrameData.makeFromYuvI420(v.byteOffset+B[0].offset,v.byteOffset+B[1].offset,v.byteOffset+B[2].offset,()=>{i.release(v)},g.width,g.height,r.CameraOrientation.DEG_0,I,0));default:throw new Error("Unknown video frame format")}}const uo=class ti extends Lr{constructor(a,i){super(),le(this,"readable"),le(this,"_sdk"),le(this,"fps",30),this._sdk=a,this.readable=new lo.Readable({read:async()=>{const c=ui(ti.PRODUCED_EVENT),{done:g,value:v}=await i.next(this.fps),w=ci(c);if(g){this.readable.push(null),this.dispatchEvent(new CustomEvent(ti.EMPTIED_EVENT));return}if(this.readable.destroyed){v.close();return}const _=v,I=ml(this._sdk,_);this.readable.push({frame:_,frameDataPromise:I}),this.dispatchEvent(new CustomEvent(ti.PRODUCED_EVENT,{detail:w}))},objectMode:!0,highWaterMark:1})}pipe(a){return this.readable.pipe(a)}unpipe(){return this.readable.unpipe()}destroy(){this.removeAllEventListeners(),this.readable.unpipe(),this.readable.destroy()}};le(uo,"EMPTIED_EVENT","emptied"),le(uo,"PRODUCED_EVENT","produced");let Br=uo;const bl=class jo extends Lr{constructor(a,i,c,g){super(),le(this,"_sdk"),le(this,"_effectPlayer"),le(this,"_processor"),le(this,"_lastFrame",null),le(this,"transform"),this._sdk=a,this._effectPlayer=i;const v=this._sdk.ProcessorConfiguration.create();switch(c){case"image":v.setUseOfflineMode(!0),v.setUseFutureFilter(!1),v.setUseFutureInterpolate(!1);break;case"video":v.setUseOfflineMode(!1),v.setUseFutureFilter(!1),v.setUseFutureInterpolate(!1);break;case"stream":default:v.setUseOfflineMode(!1),v.setUseFutureFilter(g.useFutureFilter),v.setUseFutureInterpolate(g.useFutureInterpolate);break}this._processor=c==="image"?this._sdk.FrameProcessor.createPhotoProcessor(v):this._sdk.FrameProcessor.createRealtimeProcessor(this._sdk.RealtimeProcessorMode.SYNC,v),v.delete(),this._effectPlayer.setFrameProcessor(this._processor),this.transform=new lo.Transform({transform:async({frame:w,frameDataPromise:_},I,D)=>{this._lastFrame?.close(),this._lastFrame=w;const B=await _;if(this.transform.destroyed){B.delete();return}const te=this._process(B);this.transform.push({frame:{width:w.displayWidth,height:w.displayHeight},result:te}),D()},flush:w=>{},objectMode:!0,highWaterMark:1})}_process(a){const i=ui(jo.PROCESSED_EVENT),c=(this._processor.push(a),this._processor.pop()),g=ci(i);return a.delete(),this.dispatchEvent(new CustomEvent(jo.PROCESSED_EVENT,{detail:g})),c}async rerun(){if(!this._lastFrame||this.transform.destroyed)return!1;const a={width:this._lastFrame.displayWidth,height:this._lastFrame.displayHeight},i=await ml(this._sdk,this._lastFrame);if(this.transform.destroyed)return i.delete(),!1;const c=this._process(i);return this.transform.push({frame:a,result:c}),!0}pipe(a){return this.transform.pipe(a)}unpipe(){return this.transform.unpipe()}destroy(){this.removeAllEventListeners(),this._processor.delete(),this._lastFrame&&(this._lastFrame.close(),this._lastFrame=null),this.transform.unpipe(),this.transform.destroy()}};le(bl,"PROCESSED_EVENT","processed");let co=bl;const qh=typeof devicePixelRatio<"u"?devicePixelRatio:1,gl=class Oo extends Lr{constructor(a,i,c=qh){super(),le(this,"writable"),le(this,"fps",30),le(this,"_sdk"),le(this,"_effectPlayer"),le(this,"_effectManager"),le(this,"_lastResult",null),le(this,"_preferences"),le(this,"_width",0),le(this,"_height",0),le(this,"_then",0),this._sdk=a,this._effectPlayer=i,this._effectManager=i.effectManager(),this._preferences={devicePixelRatio:c},this.writable=new lo.Writable({write:async(g,v,w)=>{this._lastResult?.result.delete(),this._lastResult=g,await new Promise(Rr),this._render(g),w()},objectMode:!0})}get frameSize(){return{width:this._width,height:this._height}}get renderSize(){return{width:this._sdk.canvas.width,height:this._sdk.canvas.height}}updateSurfaceSize(){this._width=this._height=0}_render({frame:a,result:i}){if(i.isDeleted())return;const c=i.frameData;if(this._width!==a.width||this._height!==a.height){this._width=a.width,this._height=a.height;const{width:w,height:_}=Jh(a.width,a.height,this._preferences.devicePixelRatio);this._sdk.setCanvasSize(w,_),this._effectManager.setEffectSize(w,_),this._effectPlayer.surfaceChanged(w,_)}const g=ui(Oo.RENDERED_EVENT);this._effectPlayer.drawWithExternalFrameData(c),c.delete();const v=ci(g);this._sdk.ctx.bindFramebuffer(this._sdk.ctx.READ_FRAMEBUFFER,null),this.dispatchEvent(new CustomEvent(Oo.RENDERED_EVENT,{detail:v}))}async rerun(){if(!this._lastResult)return!1;let a=0;const i=this._then,c=1e3/this.fps,g=.1*c;for(;(a=await new Promise(Rr))-i<c-g;);return this._then=a,this._render(this._lastResult),!0}destroy(){this.removeAllEventListeners(),this._effectManager.delete(),this._lastResult&&(this._lastResult.result.delete(),this._lastResult=null),this.writable.end(),this.writable.destroy()}};le(gl,"RENDERED_EVENT","rendered");let fo=gl;function Jh(r,a,i){const c=Math.round(self.devicePixelRatio),[g,v]=[screen.width*c,screen.height*c],w=Math.max(1,g/r),_=Math.max(1,v/a),I=Math.max(w,_);i=Math.min(i,I);const D=r*i,B=a*i;return{width:D,height:B}}const Tn=class ri extends Lr{constructor(a,i,c){super(),le(this,"_sdk"),le(this,"_effectPlayer"),le(this,"_state",ct.Paused),le(this,"_producer"),le(this,"_processor"),le(this,"_renderer"),le(this,"_preferences",{fps:30,idleOnEmpty:!0,useFutureFilter:!0,useFutureInterpolate:!1}),this._sdk=a,this._effectPlayer=i,this._preferences.useFutureFilter=c.useFutureFilter,this._preferences.useFutureInterpolate=c.useFutureInterpolate,this._producer=new Br(a,async function*(){}()),this._processor=new co(a,i,"stream",this._preferences),this._renderer=new fo(a,i,c.devicePixelRatio),this._renderer.addEventListener(fo.RENDERED_EVENT,({detail:g})=>this.dispatchEvent(new CustomEvent(ri.FRAME_RENDERED_EVENT,{detail:g})))}get state(){return this._state}get frameSize(){return this._renderer.frameSize}get preferences(){return this._preferences}use(a,i){const c=this._sdk,g=this._effectPlayer;this._producer.destroy(),this._processor.destroy(),this._producer=new Br(c,a[Symbol.asyncIterator](i)),this._producer.addEventListener(Br.PRODUCED_EVENT,({detail:v})=>this.dispatchEvent(new CustomEvent(ri.FRAME_RECEIVED_EVENT,{detail:v}))),this._processor=new co(c,g,a.kind,this._preferences),this._processor.addEventListener(co.PROCESSED_EVENT,({detail:v})=>this.dispatchEvent(new CustomEvent(ri.FRAME_PROCESSED_EVENT,{detail:v}))),this._producer.addEventListener(Br.EMPTIED_EVENT,()=>this._state=ct.Idle,{once:!0}),this._producer.addEventListener(Br.EMPTIED_EVENT,()=>{this._renderer.addEventListener(fo.RENDERED_EVENT,async()=>{for(;this._state===ct.Idle&&!this._preferences.idleOnEmpty;)if(!await this._renderer.rerun())return},{once:!0})},{once:!0}),this._state===ct.Idle&&(this._state=ct.Running),this._state===ct.Running&&this._producer.pipe(this._processor.transform).pipe(this._renderer.writable)}run({fps:a=this._preferences.fps,idleOnEmpty:i=!0}){Object.assign(this._preferences,{fps:a,idleOnEmpty:i}),this._producer.fps=a,this._renderer.fps=a,!(this._state===ct.Running||this._state===ct.Idle)&&(this._producer.pipe(this._processor.transform).pipe(this._renderer.writable),this._state=ct.Running)}pause(){this._state!==ct.Paused&&(this._producer.unpipe(),this._processor.unpipe(),this._state=ct.Paused)}async rerun(){this._state===ct.Idle&&await this._processor.rerun()}async rerender(){this._state===ct.Idle&&await this._renderer.rerun()}destroy(){this.pause(),this._producer.destroy(),this._processor.destroy(),this._renderer.destroy()}updateSurfaceSize(){this._renderer.updateSurfaceSize()}};le(Tn,"FRAME_RECEIVED_EVENT","framereceived"),le(Tn,"FRAME_PROCESSED_EVENT","frameprocessed"),le(Tn,"FRAME_RENDERED_EVENT","framerendered");let xn=Tn;class yl{constructor(a){le(this,"_fd"),le(this,"_cache",new Map),this._fd=a}get(a){if(Array.isArray(a))return a.map(w=>this.get(w));const i=a.split("."),c=i.length;let g=c,v=this._fd;for(let w=!1;!w&&g>0;--g){const _=i.slice(0,g).join(".");this._cache.has(_)&&(w=!0,v=this._cache.get(_),++g)}for(;v!=null&&g<c;++g){const w=i[g];let _=v[w];if(typeof _>"u"){const D="get"+w[0].toUpperCase()+w.slice(1);_=v[D]}if(typeof _>"u"&&ya(v)){const D=parseInt(w);isNaN(D)||(_=v.get(D))}if(typeof _=="function")try{_=_.apply(v)}catch{_=void 0}const I=i.slice(0,g+1).join(".");if(a===I&&ya(_)){const D=_;_=new Array(D.size());for(let B=0,te=D.size();B<te;++B)_[B]=D.get(B)}this._cache.set(I,v=_)}return g===c?v:void 0}addTimestampUs(a){this._fd.addTimestampUs(a)}}class _l{constructor(a){le(this,"_module"),this._module=a}exists(a){try{return this._module.FS.lstat(a),!0}catch(i){if(i.errno===44||i.code==="ENOENT")return!1;throw i}}writeFile(a,i){const c=a.split("/");c[0]===""&&c.shift(),c.length>1&&c.reduce((g,v)=>(this.exists(g)||this._module.FS.mkdir(g),`${g}/${v}`)),!(a.endsWith("/")&&i.length===0)&&this._module.FS.writeFile(a,i)}}var Qh=Object.defineProperty,Zh=Object.getOwnPropertyDescriptor,ep=(r,a,i,c)=>{for(var g=c>1?void 0:c?Zh(a,i):a,v=r.length-1,w;v>=0;v--)(w=r[v])&&(g=(c?w(a,i,g):w(g))||g);return c&&g&&Qh(a,i,g),g};const vl={useFutureFilter:!0,useFutureInterpolate:!1,logger:console},wl=($e=class extends Lr{constructor(r,a={}){super(),le(this,"_sdk"),le(this,"_effectPlayer"),le(this,"_effectManager"),le(this,"_pipeline"),le(this,"_preferences"),this._sdk=r,this._preferences={...vl,...a};const i=this._sdk.EffectPlayerConfiguration.create(this._sdk.canvas.width,this._sdk.canvas.height);this._effectPlayer=this._sdk.EffectPlayer.create(i),i.delete(),this._effectManager=this._effectPlayer.effectManager(),this._effectPlayer.surfaceCreated(this._sdk.canvas.width,this._sdk.canvas.height),this._effectPlayer.addFrameDataListener(c=>{this.dispatchEvent(new CustomEvent($e.FRAME_DATA_EVENT,{detail:new yl(c)}))}),this._effectManager.addEffectActivatedListener(()=>{const c=this._effectManager.current();this.dispatchEvent(new CustomEvent($e.EFFECT_ACTIVATED_EVENT,{detail:c}))}),this._effectManager.addEffectEventListener(async c=>{c===pc&&(await new Promise(g=>Ko(g)),this._pipeline.rerun())}),this._pipeline=new xn(this._sdk,this._effectPlayer,this._preferences),this._pipeline.addEventListener(xn.FRAME_RECEIVED_EVENT,({detail:c})=>this.dispatchEvent(new CustomEvent($e.FRAME_RECEIVED_EVENT,{detail:c}))),this._pipeline.addEventListener(xn.FRAME_PROCESSED_EVENT,({detail:c})=>this.dispatchEvent(new CustomEvent($e.FRAME_PROCESSED_EVENT,{detail:c}))),this._pipeline.addEventListener(xn.FRAME_RENDERED_EVENT,({detail:c})=>this.dispatchEvent(new CustomEvent($e.FRAME_RENDERED_EVENT,{detail:c}))),this.canvas.addEventListener("webglcontextlost",async c=>{c.preventDefault(),this._effectPlayer.playbackStop(),this.pause(),this._effectPlayer.surfaceDestroyed()}),this.canvas.addEventListener("webglcontextrestored",()=>{wa(this._sdk.ctx),this._effectPlayer.surfaceCreated(this._sdk.canvas.width,this._sdk.canvas.height),this._pipeline.updateSurfaceSize(),this.play(),this._effectPlayer.playbackPlay()}),this.setVolume(0)}static async create(r){const a=await va(r);return new this(a,r)}get canvas(){return this._sdk.canvas}get frameSize(){return this._pipeline.frameSize}get preferences(){return{...this._preferences,pauseOnEmpty:this._pipeline.preferences.idleOnEmpty}}get isPlaying(){return this._pipeline.state===ct.Running}use(r,a){this._pipeline.use(r,a)}async addModule(...r){await Promise.all(r.map(a=>a._bind({FS:new _l(this._sdk)})))}async applyEffect(r){const a=this,i=r.name;return await r._bind({FS:new _l(this._sdk),evalJs:this._evalJs.bind(this),callJsMethod:this._callJsMethod.bind(this)}),new Promise(c=>{this.addEventListener($e.EFFECT_ACTIVATED_EVENT,g,{once:!0}),this.addEventListener($e.EFFECT_ACTIVATED_EVENT,v);try{this._effectManager.load(i)}catch(w){this.removeEventListener($e.EFFECT_ACTIVATED_EVENT,g),this.removeEventListener($e.EFFECT_ACTIVATED_EVENT,v),r._unbind(),this.clearEffect(),this._preferences.logger.warn?.("The effect was force cleared due to the exception:"),this._preferences.logger.error?.(w)}function g({detail:w}){c(w)}function v({detail:w}){w.url()!==`/${i}/`&&(a.removeEventListener($e.EFFECT_ACTIVATED_EVENT,v),r._unbind())}})}async clearEffect(){return new Promise(r=>{this.addEventListener($e.EFFECT_ACTIVATED_EVENT,()=>r(),{once:!0}),this._effectManager.load("")})}callJsMethod(r,a=""){return this._callJsMethod(r,a)}setVolume(r){this._effectManager.setEffectVolume(r),this.dispatchEvent(new CustomEvent("volumechange",{detail:r}))}play(r={}){this._pipeline.run({fps:r.fps,idleOnEmpty:r.pauseOnEmpty})}pause(){this._pipeline.pause()}async destroy(){this.pause(),this.removeAllEventListeners(),await this.clearEffect(),this._pipeline.destroy(),this._effectPlayer.surfaceDestroyed(),this._effectManager.delete(),this._effectPlayer.delete();for(const r in this)r.startsWith("_")&&Object.defineProperty(this,r,{get(){throw new Error("The player is destroyed.")},set(){throw new Error("The player is destroyed.")}})}async _evalJs(r){return new Promise(async a=>{const i=this._effectManager.current().evalJsSync(r);await this._pipeline.rerender(),a(i)})}async _callJsMethod(r,a=""){this._effectManager.current().callJsMethod(r,a),await this._pipeline.rerender()}},le($e,"FRAME_RECEIVED_EVENT","framereceived"),le($e,"FRAME_PROCESSED_EVENT","frameprocessed"),le($e,"FRAME_RENDERED_EVENT","framerendered"),le($e,"FRAME_DATA_EVENT","framedata"),le($e,"EFFECT_ACTIVATED_EVENT","effectactivated"),$e);ep([Ho("Please, use Effect.evalJs() instead.")],wl.prototype,"callJsMethod",1);let tp=wl;const kn=r=>{if(!(r&&"canvas"in r))throw new Error(`The "player" must be a Player instance, but "${r}" is received. Make sure you haven't forgot to place "await" before Player.create() call.`)},ho=new WeakMap,rp={render:(r,a)=>{kn(r);const i=typeof a=="string"?document.querySelector(a):a;if(!(i instanceof HTMLElement))throw new Error("Target container is not a DOM element");if(i instanceof HTMLMediaElement||i instanceof HTMLCanvasElement)throw new Error("Target container must be a plain html element like `div`");ho.set(i,r),i.appendChild(r.canvas);const{pauseOnEmpty:c}=r.preferences;r.play({pauseOnEmpty:c})},unmount:r=>{const a=typeof r=="string"?document.querySelector(r):r;if(!(a instanceof HTMLElement))throw new Error("Target container is not a DOM element");const i=ho.get(a);i&&a.removeChild(i.canvas),ho.delete(a)}};class np{constructor(a){le(this,"_player"),kn(a),this._player=a}async takePhoto(a){const i=this._player.canvas,{width:c,height:g}=this._player.frameSize,v=ip(i,a?.width??c,a?.height??g);return await new Promise((w,_)=>v.toBlob(I=>I?w(I):_(new Error("Unexpected error: Unable to create Blob")),a?.type??"image/jpeg",a?.quality))}}const ip=(r,a=r.width,i=r.height)=>{if(a!==r.width||i!==r.height){const c=op(a,i);return c.getContext("2d").drawImage(r,0,0,c.width,c.height),c}return r},op=(r,a)=>{let i;return Jo?(i=new OffscreenCanvas(r,a),i.toBlob=function(c,g,v){this.convertToBlob({type:g,quality:v}).then(c).catch(w=>c(null))}):(i=document.createElement("canvas"),i.width=r,i.height=a),i},ap=typeof MediaStream<"u"?MediaStream:class{constructor(){throw new Error("The environment does not support MediaStream API")}},El=class ni extends ap{constructor(a){kn(a),super();const i=ni.cache.get(a);if(!i||!i.active){let c=a.canvas;if(((c.getContext("webgl2")||c.getContext("webgl")).getContextAttributes()||{}).alpha){const g=c,v=(c=document.createElement("canvas")).getContext("2d",{alpha:!1});a.addEventListener("framerendered",()=>{v.canvas.width=g.width,v.canvas.height=g.height,v.drawImage(g,0,0,g.width,g.height)})}c.captureStream().getTracks().forEach(g=>this.addTrack(g)),ni.cache.set(a,this)}return ni.cache.get(a)}getVideoTrack(a=0){return this.getVideoTracks()[a]}getAudioTrack(a=0){return this.getAudioTracks()[a]}stop(){this.getTracks().forEach(a=>a.stop())}};le(El,"cache",new WeakMap);let sp=El;const lp=typeof MediaRecorder<"u"?MediaRecorder:class{constructor(){throw new Error("The environment does not support MediaRecorder API")}};class up extends lp{constructor(a,i){kn(a);const c=a.canvas.captureStream();super(c,i)}async stop(){return new Promise((a,i)=>{const c=v=>{super.removeEventListener("dataavailable",c),super.removeEventListener("error",g),a(v.data)},g=v=>{super.removeEventListener("dataavailable",c),super.removeEventListener("error",g),i(v)};super.addEventListener("dataavailable",c),super.addEventListener("error",g),super.stop()})}}const cp="1.16.4";Ie.Dom=rp,Ie.Effect=pa,Ie.FrameData=yl,Ie.Image=ta,Ie.ImageCapture=np,Ie.MediaStream=Zr,Ie.MediaStreamCapture=sp,Ie.Module=Zu,Ie.Player=tp,Ie.VERSION=cp,Ie.Video=aa,Ie.VideoRecorder=up,Ie.Webcam=Gu,Ie.createSDK=va,Ie.defaultPlayerOptions=vl,Ie.defaultVideoConstraints=en,Ie.defaultVideoOptions=oa,Ie.isBrowserSupported=qo,Ie.isSimdSupported=ma,Ie.timers=_u,Ie.utils=Vu,Object.defineProperty(Ie,Symbol.toStringTag,{value:"Module"})});
